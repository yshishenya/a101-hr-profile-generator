# –ê–Ω–∞–ª–∏–∑ –ª–æ–≥–∏–∫–∏ —Å–±–æ—Ä–∞ –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø—Ä–æ—Ñ–∏–ª–µ–π

**–î–∞—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞**: 2025-10-25
**–í–µ—Ä—Å–∏—è —Å–∏—Å—Ç–µ–º—ã**: v1.2
**–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**: DataLoader, ProfileGenerator, OrganizationMapper, KPIMapper

---

## Executive Summary

–°–∏—Å—Ç–µ–º–∞ —Å–±–æ—Ä–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç **–≤—ã—Å–æ–∫—É—é —Å—Ç–µ–ø–µ–Ω—å –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏** –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ, –Ω–æ –∏–º–µ–µ—Ç **–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –æ–±—ä–µ–º–æ–º –∏ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å—é –¥–∞–Ω–Ω—ã—Ö**, –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã—Ö –≤ LLM. –û–±–Ω–∞—Ä—É–∂–µ–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–æ–Ω –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ—Å—Ç–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö —É—Ä–æ–≤–Ω–µ–π –∏–µ—Ä–∞—Ä—Ö–∏–∏.

**–û—Å–Ω–æ–≤–Ω—ã–µ –≤—ã–≤–æ–¥—ã**:
- ‚úÖ –î–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å: –í–´–°–û–ö–ê–Ø (–æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ = –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç)
- ‚ö†Ô∏è –û–±—ä–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞: –ò–ó–ë–´–¢–û–ß–ù–´–ô (~380K —Å–∏–º–≤–æ–ª–æ–≤, –æ—Ü–µ–Ω–æ—á–Ω–æ 108K —Ç–æ–∫–µ–Ω–æ–≤)
- ‚ö†Ô∏è –†–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å: –°–†–ï–î–ù–Ø–Ø (–º–Ω–æ–≥–æ —à—É–º–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –ø–æ–∑–∏—Ü–∏–π)
- ‚ùå KPI –º–∞–ø–ø–∏–Ω–≥: –û–ì–†–ê–ù–ò–ß–ï–ù–ù–´–ô (–ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–æ–ª—å–∫–æ 9 –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–æ–≤ –∏–∑ 567 –±–∏–∑–Ω–µ—Å-–µ–¥–∏–Ω–∏—Ü)
- ‚úÖ –ß–∏—Å–ª–µ–Ω–Ω–æ—Å—Ç—å –ø–æ–¥—á–∏–Ω–µ–Ω–Ω—ã—Ö: –†–ï–ê–õ–ò–°–¢–ò–ß–ù–ê–Ø (–æ—Å–Ω–æ–≤–∞–Ω–∞ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö headcount)

---

## 1. –°—Ö–µ–º–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞ —Å–±–æ—Ä–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

### 1.1 –û–±—â–∏–π pipeline

```
ProfileGenerator.generate_profile()
    ‚Üì
DataLoader.prepare_langfuse_variables(department, position, employee_name)
    ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –≠–¢–ê–ü 1: –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ—Ä–æ—Ç–∫–æ–≥–æ –∏–º–µ–Ω–∏ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞                ‚îÇ
‚îÇ   - –ï—Å–ª–∏ department —Å–æ–¥–µ—Ä–∂–∏—Ç "/", –∏–∑–≤–ª–µ–∫–∞–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–π —ç–ª–µ–º–µ–Ω—Ç   ‚îÇ
‚îÇ   - –ü—Ä–∏–º–µ—Ä: "–ë–ª–æ–∫ –û–î/–î–ò–¢" ‚Üí "–î–ò–¢"                              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
    ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –≠–¢–ê–ü 2: –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–æ–Ω–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã                   ‚îÇ
‚îÇ   - OrganizationMapper._load_org_structure_for_department()    ‚îÇ
‚îÇ   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –∫–µ—à (organization_cache)       ‚îÇ
‚îÇ   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —É–∑–µ–ª –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞ —Å positions + children        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
    ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –≠–¢–ê–ü 3: –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø–æ–ª–Ω–æ–π –∏–µ—Ä–∞—Ä—Ö–∏–∏ –¥–æ –ø–æ–∑–∏—Ü–∏–∏                  ‚îÇ
‚îÇ   - DataLoader._extract_full_position_path()                   ‚îÇ
‚îÇ   - –ü–æ–∏—Å–∫ –ø–æ–∑–∏—Ü–∏–∏ –≤ structure.json (path-based –∏–Ω–¥–µ–∫—Å)         ‚îÇ
‚îÇ   - –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ hierarchy: –ë–ª–æ–∫ ‚Üí –î–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç ‚Üí –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ ‚Üí... ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
    ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –≠–¢–ê–ü 4: –ú–∞–ø–ø–∏–Ω–≥ –∏ –∑–∞–≥—Ä—É–∑–∫–∞ KPI —Ñ–∞–π–ª–∞                           ‚îÇ
‚îÇ   - KPIMapper.find_kpi_file(department_short_name)             ‚îÇ
‚îÇ   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç KPIDepartmentMapper –¥–ª—è —É–º–Ω–æ–≥–æ –º–∞–ø–ø–∏–Ω–≥–∞         ‚îÇ
‚îÇ   - Fallback –Ω–∞ "KPI_DIT.md" –µ—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
    ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –≠–¢–ê–ü 5: –†–∞—Å—á–µ—Ç —á–∏—Å–ª–µ–Ω–Ω–æ—Å—Ç–∏ –∏ –ø–æ–¥—á–∏–Ω–µ–Ω–Ω—ã—Ö                       ‚îÇ
‚îÇ   - OrganizationMapper.get_headcount_info()                    ‚îÇ
‚îÇ   - OrganizationMapper.calculate_subordinates_count()          ‚îÇ
‚îÇ   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ headcount –∏–∑ structure.json     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
    ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –≠–¢–ê–ü 6: –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö (—Å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º)           ‚îÇ
‚îÇ   - _load_company_map_cached() ‚Üí 180K (~51K —Ç–æ–∫–µ–Ω–æ–≤)          ‚îÇ
‚îÇ   - _load_it_systems_cached() ‚Üí 16K (~4.5K —Ç–æ–∫–µ–Ω–æ–≤)           ‚îÇ
‚îÇ   - _load_profile_schema_cached() ‚Üí ~3K (~1K —Ç–æ–∫–µ–Ω–æ–≤)         ‚îÇ
‚îÇ   - _get_organization_structure_with_target() ‚Üí ~356K (~101K)  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
    ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –≠–¢–ê–ü 7: –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∏–Ω–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –¥–ª—è Langfuse         ‚îÇ
‚îÇ   - 30+ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤–∫–ª—é—á–∞—è: company_map, org_structure,        ‚îÇ
‚îÇ     KPI data, hierarchy info, headcount info, metadata         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
    ‚Üì
LLMClient.generate_profile_from_langfuse()
    ‚Üí Langfuse –ø—Ä–æ–º–ø—Ç + –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ ‚Üí Gemini 2.5 Flash ‚Üí JSON –ø—Ä–æ—Ñ–∏–ª—å
```

### 1.2 –î–µ—Ç–∞–ª–∏ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–µ—à–∞

**OrganizationCacheManager** (Singleton):
- **–ó–∞–≥—Ä—É–∑–∫–∞**: –û–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- **–ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è**:
  - `_path_index`: 567 –±–∏–∑–Ω–µ—Å-–µ–¥–∏–Ω–∏—Ü –ø–æ –ø–æ–ª–Ω–æ–º—É –ø—É—Ç–∏ (–ë–ï–ó –ü–û–¢–ï–†–ò –¥–∞–Ω–Ω—ã—Ö)
  - `_name_to_paths`: –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –∏–º–µ–Ω
  - `_department_index`: Legacy –∏–Ω–¥–µ–∫—Å –ø–æ –∏–º–µ–Ω–∞–º (–¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)
- **Thread-safe**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `threading.Lock()` –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–π —Ä–∞–±–æ—Ç—ã

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- ‚úÖ –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–æ–Ω–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- ‚úÖ –ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø O(1) –∫ –ª—é–±–æ–π –±–∏–∑–Ω–µ—Å-–µ–¥–∏–Ω–∏—Ü–µ
- ‚úÖ –†–µ—à–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –∏–º–µ–Ω —á–µ—Ä–µ–∑ path-based –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—é

---

## 2. –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### 2.1 DataLoader.prepare_langfuse_variables()

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ì–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Å–±–æ—Ä–∞ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø—Ä–æ—Ñ–∏–ª—è

**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**:
```python
department: str        # –ü–æ–ª–Ω—ã–π –ø—É—Ç—å –∏–ª–∏ –∫–æ—Ä–æ—Ç–∫–æ–µ –∏–º—è ("–ë–ª–æ–∫ –û–î/–î–ò–¢" –∏–ª–∏ "–î–ò–¢")
position: str          # –ù–∞–∑–≤–∞–Ω–∏–µ –¥–æ–ª–∂–Ω–æ—Å—Ç–∏
employee_name: Optional[str]  # –§–ò–û (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```

**–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**: –°–ª–æ–≤–∞—Ä—å –∏–∑ **30+ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö** –¥–ª—è Langfuse –ø—Ä–æ–º–ø—Ç–∞

#### 2.1.1 –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –†–∞–∑–º–µ—Ä (—Å–∏–º–≤–æ–ª—ã) | –¢–æ–∫–µ–Ω—ã (–æ—Ü–µ–Ω–∫–∞) | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|-----------|-----------|------------------|-----------------|------------|
| **–û–°–ù–û–í–ù–û–ô –ö–û–ù–¢–ï–ö–°–¢** | | | | |
| | `company_map` | ~180,000 | ~51,000 | –ü–æ–ª–Ω–∞—è –∫–∞—Ä—Ç–∞ –∫–æ–º–ø–∞–Ω–∏–∏ –ê101 |
| | `json_schema` | ~3,000 | ~1,000 | JSON —Å—Ö–µ–º–∞ –ø—Ä–æ—Ñ–∏–ª—è |
| **–û–†–ì–ê–ù–ò–ó–ê–¶–ò–û–ù–ù–ê–Ø –°–¢–†–£–ö–¢–£–†–ê** | | | | |
| | `org_structure` | ~5,000 | ~1,400 | –†–µ–ª–µ–≤–∞–Ω—Ç–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞ |
| | `OrgStructure` | ~356,000 | ~101,000 | –ü–û–õ–ù–ê–Ø —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (567 –µ–¥–∏–Ω–∏—Ü) —Å target highlighting |
| | `department_path` | ~100 | ~30 | –ü—É—Ç—å –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞ –≤ –∏–µ—Ä–∞—Ä—Ö–∏–∏ |
| **–ü–û–ó–ò–¶–ò–û–ù–ù–´–ï –î–ê–ù–ù–´–ï** | | | | |
| | `position` | ~50 | ~15 | –ù–∞–∑–≤–∞–Ω–∏–µ –¥–æ–ª–∂–Ω–æ—Å—Ç–∏ |
| | `department` | ~100 | ~30 | –ü–æ–ª–Ω—ã–π –ø—É—Ç—å –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞ |
| | `department_name` | ~50 | ~15 | –ö–æ—Ä–æ—Ç–∫–æ–µ –∏–º—è –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞ |
| | `employee_name` | ~50 | ~15 | –§–ò–û —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) |
| **KPI –î–ê–ù–ù–´–ï** | | | | |
| | `kpi_data` | 0-45,000 | 0-13,000 | KPI –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞ (–æ–±—Ä–µ–∑–∞–µ—Ç—Å—è –ø—Ä–∏ >45K) |
| | `it_systems` | ~16,000 | ~4,500 | –ö–∞—Ä—Ç–∞ IT —Å–∏—Å—Ç–µ–º (–æ–±—Ä–µ–∑–∞–µ—Ç—Å—è –ø—Ä–∏ >60K) |
| **–ß–ò–°–õ–ï–ù–ù–û–°–¢–¨ –ò –ü–û–î–ß–ò–ù–ï–ù–ù–û–°–¢–¨** | | | | |
| | `headcount_info` | ~200 | ~60 | –û–±—ä–µ–∫—Ç —Å –¥–∞–Ω–Ω—ã–º–∏ –æ —á–∏—Å–ª–µ–Ω–Ω–æ—Å—Ç–∏ |
| | `subordinates_calculation` | ~150 | ~45 | –û–±—ä–µ–∫—Ç —Å —Ä–∞—Å—á–µ—Ç–æ–º –ø–æ–¥—á–∏–Ω–µ–Ω–Ω—ã—Ö |
| | `department_headcount` | ~10 | ~3 | –ü—Ä—è–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —á–∏—Å–ª–µ–Ω–Ω–æ—Å—Ç–∏ |
| | `headcount_source` | ~50 | ~15 | –ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö (–£—Ä–æ–≤–µ–Ω—å 2/3/4) |
| | `subordinates_departments` | ~5 | ~2 | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–¥—á–∏–Ω–µ–Ω–Ω—ã—Ö –ø–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–π |
| | `subordinates_direct_reports` | ~5 | ~2 | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä—è–º—ã—Ö –ø–æ–¥—á–∏–Ω–µ–Ω–Ω—ã—Ö |
| **–ò–ï–†–ê–†–•–ò–Ø (6 –£–†–û–í–ù–ï–ô)** | | | | |
| | `business_block` | ~50 | ~15 | –£—Ä–æ–≤–µ–Ω—å 1: –ë–ª–æ–∫ |
| | `department_unit` | ~50 | ~15 | –£—Ä–æ–≤–µ–Ω—å 2: –î–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç |
| | `section_unit` | ~50 | ~15 | –£—Ä–æ–≤–µ–Ω—å 3: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ/–û—Ç–¥–µ–ª |
| | `group_unit` | ~50 | ~15 | –£—Ä–æ–≤–µ–Ω—å 4: –û—Ç–¥–µ–ª |
| | `sub_section_unit` | ~50 | ~15 | –£—Ä–æ–≤–µ–Ω—å 5: –ü–æ–¥-–æ—Ç–¥–µ–ª |
| | `final_group_unit` | ~50 | ~15 | –£—Ä–æ–≤–µ–Ω—å 6: –ì—Ä—É–ø–ø–∞ |
| | `hierarchy_level` | ~5 | ~2 | –ù–æ–º–µ—Ä —É—Ä–æ–≤–Ω—è (1-6) |
| | `full_hierarchy_path` | ~200 | ~60 | –ü–æ–ª–Ω—ã–π –ø—É—Ç—å —Å —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è–º–∏ |
| | `hierarchy_levels_list` | ~200 | ~60 | –°–ø–∏—Å–æ–∫ —É—Ä–æ–≤–Ω–µ–π —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é |
| | `hierarchy_current_level` | ~5 | ~2 | –¢–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å |
| | `hierarchy_final_unit` | ~50 | ~15 | –§–∏–Ω–∞–ª—å–Ω–∞—è –µ–¥–∏–Ω–∏—Ü–∞ –≤ –∏–µ—Ä–∞—Ä—Ö–∏–∏ |
| | `position_location` | ~150 | ~45 | –ü–æ–ª–Ω–∞—è –ª–æ–∫–∞—Ü–∏—è –ø–æ–∑–∏—Ü–∏–∏ |
| **–ú–ï–¢–ê–î–ê–ù–ù–´–ï** | | | | |
| | `generation_timestamp` | ~30 | ~10 | ISO timestamp –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ |
| | `data_version` | ~10 | ~3 | –í–µ—Ä—Å–∏—è –¥–∞–Ω–Ω—ã—Ö (v1.2) |
| | `estimated_input_tokens` | ~10 | ~3 | –û—Ü–µ–Ω–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤ |
| **–ò–¢–û–ì–û** | | **~561,000** | **~158,000** | |

**üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–ë–õ–ï–ú–ê**: –ü–µ—Ä–µ–¥–∞–µ—Ç—Å—è **158K —Ç–æ–∫–µ–Ω–æ–≤** –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞, –ø—Ä–∏ —ç—Ç–æ–º:
- Gemini 2.5 Flash: context window 1M —Ç–æ–∫–µ–Ω–æ–≤
- –ù–û: —Å—Ç–æ–∏–º–æ—Å—Ç—å input = $0.03/1M —Ç–æ–∫–µ–Ω–æ–≤
- **–ö–∞–∂–¥–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Ç–æ–∏—Ç ~$0.00474** —Ç–æ–ª—å–∫–æ –∑–∞ input

#### 2.1.2 –ê–Ω–∞–ª–∏–∑ –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏

**–í–æ–ø—Ä–æ—Å**: –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –ª–∏ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö?

**–û—Ç–≤–µ—Ç**: ‚úÖ **–î–ê, —Å –æ–≥–æ–≤–æ—Ä–∫–∞–º–∏**

**–î–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**:
1. ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–æ—Ä–æ—Ç–∫–æ–≥–æ –∏–º–µ–Ω–∏ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞ (—Å—Ç–∞–±–∏–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ split)
2. ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–æ–Ω–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã (–∏–∑ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–µ—à–∞)
3. ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏–µ—Ä–∞—Ä—Ö–∏–∏ (path-based –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è)
4. ‚úÖ KPI –º–∞–ø–ø–∏–Ω–≥ (–¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –≤ KPIDepartmentMapper)
5. ‚úÖ –†–∞—Å—á–µ—Ç –ø–æ–¥—á–∏–Ω–µ–Ω–Ω—ã—Ö (–æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö headcount –¥–∞–Ω–Ω—ã—Ö)
6. ‚úÖ –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã (–∫–µ—à–∏—Ä—É—é—Ç—Å—è –Ω–∞–≤—Å–µ–≥–¥–∞ –≤ _cache)

**–ù–µ–¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**:
1. ‚ö†Ô∏è `generation_timestamp` (–∏–∑–º–µ–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—É—Å–∫–µ)
2. ‚ö†Ô∏è `estimated_input_tokens` (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –¥–ª–∏–Ω—ã –¥—Ä—É–≥–∏—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö)

**–í—ã–≤–æ–¥**: –î–ª—è –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö `(department, position, employee_name)` –∫–æ–Ω—Ç–µ–∫—Å—Ç –±—É–¥–µ—Ç **–∏–¥–µ–Ω—Ç–∏—á–µ–Ω** –∑–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º timestamp.

---

### 2.2 OrganizationMapper - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–æ–Ω–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –î–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ–π –æ—Ä–≥—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–ª—è –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞

#### 2.2.1 –ú–µ—Ç–æ–¥ get_positions_for_department()

**–ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö**: `structure.json` —á–µ—Ä–µ–∑ `organization_cache`

**–ê–ª–≥–æ—Ä–∏—Ç–º**:
```python
def get_positions_for_department(department_name: str) -> List[str]:
    # 1. –û–±—Ä–∞—â–µ–Ω–∏–µ –∫ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–º—É –∫–µ—à—É
    positions = organization_cache.get_department_positions(department_name)

    # 2. –ï—Å–ª–∏ –Ω–∞–π–¥–µ–Ω–æ - –≤–æ–∑–≤—Ä–∞—â–∞–µ–º
    if positions:
        return positions

    # 3. –ò–Ω–∞—á–µ - –ª–æ–≥–∏—Ä—É–µ–º warning –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º []
    return []
```

**–ü—Ä–∏–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö –∏–∑ structure.json**:
```json
{
  "organization": {
    "–ë–ª–æ–∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏": {
      "number": 24001190,
      "positions": [
        "–ó–∞–º–µ—Å—Ç–∏—Ç–µ–ª—å –≥–µ–Ω–µ—Ä–∞–ª—å–Ω–æ–≥–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∞ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏"
      ],
      "headcount": 15,
      "headcount_source": "–£—Ä–æ–≤–µ–Ω—å 2",
      "children": {
        "–°–ª—É–∂–±–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏": {
          "positions": [
            "–†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å —Å–ª—É–∂–±—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏",
            "–í–µ–¥—É—â–∏–π —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç"
          ],
          "headcount": 14
        }
      }
    }
  }
}
```

**–ü—Ä–æ–±–ª–µ–º—ã**:
1. ‚ùå **–ù–µ—Ç fallback —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏** - –µ—Å–ª–∏ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫
2. ‚ö†Ô∏è **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç —Ç–æ—á–Ω–æ–≥–æ –∏–º–µ–Ω–∏** - "–î–ò–¢" –Ω–∞–π–¥–µ—Ç—Å—è, –Ω–æ "–î–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π" –º–æ–∂–µ—Ç –Ω–µ –Ω–∞–π—Ç–∏—Å—å
3. ‚úÖ **–•–æ—Ä–æ—à–æ**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –∫–µ—à (–±—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø)

#### 2.2.2 –ú–µ—Ç–æ–¥ get_department_headcount()

**–ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö**: –ü–æ–ª–µ `headcount` –≤ `structure.json`

**–ê–ª–≥–æ—Ä–∏—Ç–º**:
```python
def get_department_headcount(department_name: str) -> Optional[int]:
    headcount = organization_cache.get_department_headcount(department_name)
    return headcount  # –ú–æ–∂–µ—Ç –±—ã—Ç—å None
```

**–ö–∞—á–µ—Å—Ç–≤–æ –¥–∞–Ω–Ω—ã—Ö headcount –≤ structure.json**:
- ‚úÖ **–ü—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –Ω–∞ –≤—Å–µ—Ö —É—Ä–æ–≤–Ω—è—Ö**: –£—Ä–æ–≤–µ–Ω—å 2 (–ë–ª–æ–∫), 3 (–î–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç), 4 (–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ)
- ‚úÖ **–ò—Å—Ç–æ—á–Ω–∏–∫ —É–∫–∞–∑–∞–Ω**: "–£—Ä–æ–≤–µ–Ω—å 2", "–£—Ä–æ–≤–µ–Ω—å 3", "–£—Ä–æ–≤–µ–Ω—å 4"
- ‚úÖ **–î–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç-–∏—Å—Ç–æ—á–Ω–∏–∫**: –°—Å—ã–ª–∫–∞ –Ω–∞ –∫–∞–∫–æ–π –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç —è–≤–ª—è–µ—Ç—Å—è –∏—Å—Ç–æ—á–Ω–∏–∫–æ–º

**–ü—Ä–∏–º–µ—Ä**:
```json
{
  "headcount": 15,
  "headcount_source": "–£—Ä–æ–≤–µ–Ω—å 2",
  "headcount_department": "–ë–ª–æ–∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏"
}
```

#### 2.2.3 –ú–µ—Ç–æ–¥ calculate_subordinates_count()

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –†–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π —Ä–∞—Å—á–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ–¥—á–∏–Ω–µ–Ω–Ω—ã—Ö –Ω–∞ –æ—Å–Ω–æ–≤–µ —á–∏—Å–ª–µ–Ω–Ω–æ—Å—Ç–∏

**–ê–ª–≥–æ—Ä–∏—Ç–º** (—É–ø—Ä–æ—â–µ–Ω–Ω–∞—è —Å—Ö–µ–º–∞):
```python
def calculate_subordinates_count(department_name, position_title):
    # 1. –ü–æ–ª—É—á–∞–µ–º —á–∏—Å–ª–µ–Ω–Ω–æ—Å—Ç—å –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞
    dept_headcount = get_department_headcount(department_name)
    if dept_headcount is None:
        # Fallback: –æ—Ü–µ–Ω–∏–≤–∞–µ–º –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –ø–æ–∑–∏—Ü–∏–π
        estimated_headcount = len(get_positions_for_department(department_name)) * 2
    else:
        estimated_headcount = dept_headcount

    # 2. –û–ø—Ä–µ–¥–µ–ª—è–µ–º —É—Ä–æ–≤–µ–Ω—å —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º
    position_lower = position_title.lower()

    if "–≥–µ–Ω–µ—Ä–∞–ª—å–Ω—ã–π –¥–∏—Ä–µ–∫—Ç–æ—Ä" in position_lower:
        # –¢–æ–ø-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç
        departments = min(estimated_headcount // 50, 8)
        direct_reports = min(estimated_headcount // 20, 15)
    elif "–¥–∏—Ä–µ–∫—Ç–æ—Ä –ø–æ" in position_lower or "–¥–∏—Ä–µ–∫—Ç–æ—Ä –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞" in position_lower:
        # –î–∏—Ä–µ–∫—Ç–æ—Ä–∞ –±–ª–æ–∫–æ–≤/–¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–æ–≤
        departments = min(estimated_headcount // 25, 5)
        direct_reports = min(estimated_headcount // 10, 12)
    elif "—Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞" in position_lower or "—Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è" in position_lower:
        # –°—Ä–µ–¥–Ω–∏–π –º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç
        departments = min(estimated_headcount // 15, 3)
        direct_reports = min(estimated_headcount // 5, 8)
    elif "—Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –æ—Ç–¥–µ–ª–∞" in position_lower or "—Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –≥—Ä—É–ø–ø—ã" in position_lower:
        # –õ–∏–Ω–µ–π–Ω—ã–π –º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç
        departments = 0
        direct_reports = min(estimated_headcount // 3, 6)
    else:
        # –°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—ã –±–µ–∑ –ø–æ–¥—á–∏–Ω–µ–Ω–Ω—ã—Ö
        departments = 0
        direct_reports = 0

    return {"departments": departments, "direct_reports": direct_reports}
```

**–û—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞**:
- ‚úÖ **–†–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ**: –û—Å–Ω–æ–≤–∞–Ω–æ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —á–∏—Å–ª–µ–Ω–Ω–æ—Å—Ç–∏
- ‚úÖ **–î–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ**: –î–ª—è –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π
- ‚ö†Ô∏è **–£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞**: –ù–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç —Å–ø–µ—Ü–∏—Ñ–∏–∫—É —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–æ–≤
- ‚ö†Ô∏è **–ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞**: –ú–æ–≥—É—Ç –Ω–µ –ø–æ–∫—Ä—ã—Ç—å –≤—Å–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –Ω–∞–∑–≤–∞–Ω–∏–π –¥–æ–ª–∂–Ω–æ—Å—Ç–µ–π

**–ü—Ä–∏–º–µ—Ä—ã —Ä–∞—Å—á–µ—Ç–æ–≤**:

| –ü–æ–∑–∏—Ü–∏—è | –î–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç (—á–∏—Å–ª–µ–Ω–Ω–æ—Å—Ç—å) | –†–∞—Å—á–µ—Ç | –†–µ–∑—É–ª—å—Ç–∞—Ç |
|---------|---------------------------|--------|-----------|
| –ì–µ–Ω–µ—Ä–∞–ª—å–Ω—ã–π –¥–∏—Ä–µ–∫—Ç–æ—Ä | –í–°–Ø –ö–û–ú–ü–ê–ù–ò–Ø (1000) | departments=min(1000/50,8)=8<br>direct=min(1000/20,15)=15 | 8 –ø–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–π, 15 –ø–æ–¥—á–∏–Ω–µ–Ω–Ω—ã—Ö |
| –î–∏—Ä–µ–∫—Ç–æ—Ä –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞ | –î–ò–¢ (150) | departments=min(150/25,5)=5<br>direct=min(150/10,12)=12 | 5 —É–ø—Ä–∞–≤–ª–µ–Ω–∏–π, 12 –ø–æ–¥—á–∏–Ω–µ–Ω–Ω—ã—Ö |
| –†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (30) | departments=min(30/15,3)=2<br>direct=min(30/5,8)=6 | 2 –æ—Ç–¥–µ–ª–∞, 6 –ø–æ–¥—á–∏–Ω–µ–Ω–Ω—ã—Ö |
| –†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –≥—Ä—É–ø–ø—ã | –ì—Ä—É–ø–ø–∞ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (9) | departments=0<br>direct=min(9/3,6)=3 | 0 –æ—Ç–¥–µ–ª–æ–≤, 3 –ø–æ–¥—á–∏–Ω–µ–Ω–Ω—ã—Ö |
| –ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä —Ä–µ—à–µ–Ω–∏–π | –î–ò–¢ (150) | departments=0<br>direct=0 | 0 –ø–æ–¥—á–∏–Ω–µ–Ω–Ω—ã—Ö |

---

### 2.3 KPIMapper - –ú–∞–ø–ø–∏–Ω–≥ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–æ–≤ –∫ KPI —Ñ–∞–π–ª–∞–º

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –£–º–Ω—ã–π –º–∞–ø–ø–∏–Ω–≥ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–æ–≤ –∫ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º KPI —Ñ–∞–π–ª–∞–º

#### 2.3.1 –°—Ç—Ä—É–∫—Ç—É—Ä–∞ KPIDepartmentMapper

**–ú–∞–ø–ø–∏–Ω–≥ —Ç–∞–±–ª–∏—Ü–∞** (–æ—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞):
```python
DEPARTMENT_TO_KPI_FILE = {
    # IT Department (–î–ò–¢)
    "–¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π": "–î–ò–¢",
    "–¥–∏—Ç": "–î–ò–¢",
    "–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω": "–î–ò–¢",

    # Architecture & Strategy (–ê–°)
    "–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä": "–ê–°",
    "—Å—Ç—Ä–∞—Ç–µ–≥": "–ê–°",

    # Project Management (–î–ü–£)
    "—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç": "–î–ü–£",
    "–¥–ø—É": "–î–ü–£",
    "–ø—Ä–æ–µ–∫—Ç–Ω": "–î–ü–£",

    # Development (–î–†–†)
    "–¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç —Ä–∞–∑–≤–∏—Ç–∏—è –∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏": "–î–†–†",
    "–¥—Ä—Ä": "–î–†–†",
    "—Ä–∞–∑–≤–∏—Ç–∏": "–î–†–†",

    # Procurement (–ó–∞–∫—É–ø–∫–∏)
    "–∑–∞–∫—É–ø–∫": "–ó–∞–∫—É–ø–∫–∏",

    # HR (–ü–†–ü)
    "–ø–µ—Ä—Å–æ–Ω–∞–ª": "–ü–†–ü",
    "–ø—Ä–ø": "–ü–†–ü",
    "hr": "–ü–†–ü",

    # Construction Analytics (–£–í–ê–∏–ö)
    "–∞–Ω–∞–ª–∏—Ç–∏–∫": "–£–í–ê–∏–ö",
    "–∫–æ–Ω—Ç—Ä–æ–ª": "–£–í–ê–∏–ö",

    # Digital (–¶–∏—Ñ—Ä–∞)
    "—Ü–∏—Ñ—Ä": "–¶–∏—Ñ—Ä–∞",
    "—Ü–∏—Ñ—Ä–æ–≤–∏–∑–∞—Ü–∏": "–¶–∏—Ñ—Ä–∞",
}
```

**–ê–ª–≥–æ—Ä–∏—Ç–º –ø–æ–∏—Å–∫–∞**:
```python
def find_kpi_file(department: str) -> str:
    # 1. –ü—Ä—è–º–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ
    if department.lower() in DEPARTMENT_TO_KPI_FILE:
        return f"KPI_{DEPARTMENT_TO_KPI_FILE[department.lower()]}.md"

    # 2. –ß–∞—Å—Ç–∏—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ (substring match)
    for pattern, kpi_code in DEPARTMENT_TO_KPI_FILE.items():
        if pattern in department.lower() or department.lower() in pattern:
            return f"KPI_{kpi_code}.md"

    # 3. Fallback –Ω–∞ default
    return "KPI_DIT.md"
```

#### 2.3.2 –î–æ—Å—Ç—É–ø–Ω—ã–µ KPI —Ñ–∞–π–ª—ã

**–°–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤** –≤ `/home/yan/A101/HR/data/KPI/`:
```
KPI_DIT.md       (34 —Å—Ç—Ä–æ–∫–∏)   - –î–£–ë–õ–ò–ö–ê–¢ (—Å—Ç–∞—Ä–æ–µ –∏–º—è)
KPI_–î–ò–¢.md       (47 —Å—Ç—Ä–æ–∫)    - IT –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç
KPI_–ê–°.md        (53 —Å—Ç—Ä–æ–∫–∏)   - –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è
KPI_–î–ü–£.md       (35 —Å—Ç—Ä–æ–∫)    - –î–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç –ø—Ä–æ–µ–∫—Ç–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
KPI_–î–†–†.md       (56 —Å—Ç—Ä–æ–∫)    - –î–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç —Ä–∞–∑–≤–∏—Ç–∏—è –∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
KPI_–ó–∞–∫—É–ø–∫–∏.md   (33 —Å—Ç—Ä–æ–∫–∏)   - –ó–∞–∫—É–ø–∫–∏
KPI_–ü–†–ü.md       (36 —Å—Ç—Ä–æ–∫)    - –ü–µ—Ä—Å–æ–Ω–∞–ª –∏ —Ä–∞–∑–≤–∏—Ç–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–ª–∞
KPI_–£–í–ê–∏–ö.md     (27 —Å—Ç—Ä–æ–∫)    - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –∞—É–¥–∏—Ç–∞ –∏ –∫–æ–Ω—Ç—Ä–æ–ª—è
KPI_–¶–∏—Ñ—Ä–∞.md     (28 —Å—Ç—Ä–æ–∫)    - –¶–∏—Ñ—Ä–æ–≤–∏–∑–∞—Ü–∏—è
```

**–ü–æ–∫—Ä—ã—Ç–∏–µ**: 9 —Ñ–∞–π–ª–æ–≤ (–≤–∫–ª—é—á–∞—è –¥—É–±–ª–∏–∫–∞—Ç) –¥–ª—è **567 –±–∏–∑–Ω–µ—Å-–µ–¥–∏–Ω–∏—Ü**

#### 2.3.3 –ü—Ä–æ–±–ª–µ–º—ã KPI –º–∞–ø–ø–∏–Ω–≥–∞

**üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–ë–õ–ï–ú–ê #1: –ù–∏–∑–∫–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ**
- –¢–æ–ª—å–∫–æ **9 –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–æ–≤** –∏–º–µ—é—Ç KPI —Ñ–∞–π–ª—ã
- –í structure.json –µ—Å—Ç—å **567 –±–∏–∑–Ω–µ—Å-–µ–¥–∏–Ω–∏—Ü**
- **–ü–æ–∫—Ä—ã—Ç–∏–µ: ~1.6%**

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö 558 –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–æ–≤?**
```python
# –î–ª—è –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞ "–ë–ª–æ–∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏"
kpi_file = find_kpi_file("–ë–ª–æ–∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏")  # –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç "KPI_DIT.md" (fallback)

# –ü—Ä–æ–±–ª–µ–º–∞: –î–ò–¢ –∏ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å - –°–û–í–ï–†–®–ï–ù–ù–û –†–ê–ó–ù–´–ï –û–ë–õ–ê–°–¢–ò
# LLM –ø–æ–ª—É—á–∏—Ç –ù–ï–ü–†–ê–í–ò–õ–¨–ù–´–ï KPI –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏
```

**–ü—Ä–∏–º–µ—Ä—ã –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –º–∞–ø–ø–∏–Ω–≥–∞**:

| –î–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç | –ú–∞–ø–ø–∏—Ç—Å—è –Ω–∞ | –ü—Ä–∞–≤–∏–ª—å–Ω–æ –ª–∏? |
|-------------|-------------|---------------|
| –ë–ª–æ–∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ | KPI_DIT.md | ‚ùå –ù–ï–¢ (IT vs –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å) |
| –ö–æ–º–º–µ—Ä—á–µ—Å–∫–∏–π –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç | KPI_DIT.md | ‚ùå –ù–ï–¢ (IT vs –ö–æ–º–º–µ—Ä—Ü–∏—è) |
| –î–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç –ø–æ —Å–≤—è–∑—è–º —Å –æ–±—â–µ—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å—é | KPI_DIT.md | ‚ùå –ù–ï–¢ (IT vs PR) |
| –î–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–∞ | KPI_DIT.md | ‚ùå –ù–ï–¢ (IT vs –°—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–æ) |
| –§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç | KPI_DIT.md | ‚ùå –ù–ï–¢ (IT vs –§–∏–Ω–∞–Ω—Å—ã) |

**üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–ë–õ–ï–ú–ê #2: –î—É–±–ª–∏–∫–∞—Ç —Ñ–∞–π–ª–∞**
- `KPI_DIT.md` (34 —Å—Ç—Ä–æ–∫–∏) - —Å—Ç–∞—Ä—ã–π —Ñ–∞–π–ª
- `KPI_–î–ò–¢.md` (47 —Å—Ç—Ä–æ–∫) - –Ω–æ–≤—ã–π —Ñ–∞–π–ª (–Ω–∞ 38% –±–æ–ª—å—à–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞)

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç?**
- –°—Ç–∞—Ä–∞—è –ª–æ–≥–∏–∫–∞ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `KPI_DIT.md` (—É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –¥–∞–Ω–Ω—ã–µ)
- –ù–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `KPI_–î–ò–¢.md` (–∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ)
- **–ù–µ–¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –Ω–∞–∑–≤–∞–Ω–∏—è –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞**

#### 2.3.4 –ö–∞—á–µ—Å—Ç–≤–æ KPI –¥–∞–Ω–Ω—ã—Ö

**–ü—Ä–∏–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã KPI_–î–ò–¢.md**:
```markdown
---
department: –î–ò–¢
responsible: –°–ª–æ–∂–µ–Ω–∏–∫–∏–Ω –ê
positions_map:
  –î–∏—Ä–µ–∫—Ç–æ—Ä –ø–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–º —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è–º: –°–ª–æ–∂–µ–Ω–∏–∫–∏–Ω –ê–ª–µ–∫—Å–µ–π –í—è—á–µ—Å–ª–∞–≤–æ–≤–∏—á
  –†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –æ—Ç–¥–µ–ª–∞: –ù–æ—Ä –ï–≤–≥–µ–Ω–∏–π –ê–ª–µ–∫—Å–µ–µ–≤–∏—á
source_file: –ö–ü–≠ 2025_–î–ò–¢ (–°–ª–æ–∂–µ–Ω–∏–∫–∏–Ω –ê)+.xlsx
format_version: '1.0'
---

| –ö–ü–≠ | –¶–µ–ª–µ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ | –ï–¥. –∏–∑–º. | –î–∏—Ä–µ–∫—Ç–æ—Ä | –†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å 1 | ... | –ú–µ—Ç–æ–¥–∏–∫–∞ | –ò—Å—Ç–æ—á–Ω–∏–∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ |
|-----|------------------|----------|----------|----------------|-----|----------|---------------------|
| –ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ –ö–ü–≠ | - | - | 4 | 1 | ... | - | - |
| –ü—Ä–æ–¥–∞–∂–∏/–≤—ã—Ä—É—á–∫–∞ | 126041 | –º–ª–Ω. —Ä—É–±. | 0.15 | 0.3 | ... | - | - |
| –ü–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ SLA | 99.3 | % | 0.1 | - | ... | SLA = (–í–î–ø-–í–†–ó)/–í–î–ø | –û—Ç—á–µ—Ç BI |
| ... | ... | ... | ... | ... | ... | ... | ... |
```

**–û—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞**:
- ‚úÖ **–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å**: YAML frontmatter + —Ç–∞–±–ª–∏—Ü–∞
- ‚úÖ **–î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è**: –¶–µ–ª–µ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è, –µ–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è, –º–µ—Ç–æ–¥–∏–∫–∞ —Ä–∞—Å—á–µ—Ç–∞
- ‚úÖ **–ü—Ä–∏–≤—è–∑–∫–∞ –∫ –ø–æ–∑–∏—Ü–∏—è–º**: positions_map —Å–≤—è–∑—ã–≤–∞–µ—Ç –ö–ü–≠ —Å –¥–æ–ª–∂–Ω–æ—Å—Ç—è–º–∏
- ‚ö†Ô∏è **–†–∞–∑–º–µ—Ä**: 33-56 —Å—Ç—Ä–æ–∫ (–º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –≥–ª—É–±–æ–∫–æ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è)
- ‚ùå **–ü–æ–∫—Ä—ã—Ç–∏–µ**: –¢–æ–ª—å–∫–æ 9 –∏–∑ 567 –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–æ–≤

---

### 2.4 –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø–æ–ª–Ω–æ–π –∏–µ—Ä–∞—Ä—Ö–∏–∏ - _extract_full_position_path()

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –†–∞–∑–ª–æ–∂–∏—Ç—å –ø–æ–ª–Ω—ã–π –ø—É—Ç—å –ø–æ–∑–∏—Ü–∏–∏ –Ω–∞ 6 —É—Ä–æ–≤–Ω–µ–π –∏–µ—Ä–∞—Ä—Ö–∏–∏

**–ê–ª–≥–æ—Ä–∏—Ç–º**:
```python
def _extract_full_position_path(department: str, position: str) -> Dict[str, Any]:
    # 1. –ï—Å–ª–∏ –ø–µ—Ä–µ–¥–∞–Ω –ø–æ–ª–Ω—ã–π –ø—É—Ç—å, –∏–∑–≤–ª–µ–∫–∞–µ–º –∫–æ—Ä–æ—Ç–∫–æ–µ –∏–º—è
    if "/" in department:
        department_parts = department.split("/")
        department_name = department_parts[-1]  # –ü–æ—Å–ª–µ–¥–Ω–∏–π —ç–ª–µ–º–µ–Ω—Ç
    else:
        department_name = department

    # 2. –ò—â–µ–º –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç –≤ –∫–µ—à–µ
    dept_info = organization_cache.find_department(department_name)
    if not dept_info:
        return _create_fallback_hierarchy_info(department_name, position)

    # 3. –ü–æ–ª—É—á–∞–µ–º –±–∞–∑–æ–≤—ã–π –ø—É—Ç—å –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞
    dept_path = dept_info["path"]
    path_parts = dept_path.split("/")

    # 4. –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –ø–æ–∑–∏—Ü–∏—è –≤ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–µ
    dept_node = dept_info["node"]
    positions_in_dept = dept_node.get("positions", [])

    if position in positions_in_dept:
        # –ü–æ–∑–∏—Ü–∏—è –≤ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–µ
        full_path_parts = path_parts
        final_unit = department
    else:
        # –ò—â–µ–º –ø–æ–∑–∏—Ü–∏—é –≤ –¥–æ—á–µ—Ä–Ω–∏—Ö –ø–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è—Ö (—Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ)
        position_unit, position_path = _find_position_in_children(dept_node, position, dept_path)
        if position_unit:
            full_path_parts = position_path.split("/")
            final_unit = position_unit
        else:
            # –ü–æ–∑–∏—Ü–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞, –∏—Å–ø–æ–ª—å–∑—É–µ–º –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç
            full_path_parts = path_parts
            final_unit = department

    # 5. –°—Ç—Ä–æ–∏–º –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
    return _build_hierarchy_info(full_path_parts, final_unit, position)

def _build_hierarchy_info(path_parts: List[str], final_unit: str, position: str):
    return {
        "full_path_parts": path_parts,
        "hierarchy_level": len(path_parts),
        "business_block": path_parts[0] if len(path_parts) > 0 else "",
        "department_unit": path_parts[1] if len(path_parts) > 1 else path_parts[0],
        "section_unit": path_parts[2] if len(path_parts) > 2 else "",
        "group_unit": path_parts[3] if len(path_parts) > 3 else "",
        "sub_section_unit": path_parts[4] if len(path_parts) > 4 else "",
        "final_group_unit": path_parts[5] if len(path_parts) > 5 else "",
        "final_unit": final_unit,
        "position": position,
        "full_hierarchy_path": " ‚Üí ".join(path_parts),
        "department_path_legacy": "/".join(path_parts),
    }
```

**–ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã**:

**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**:
```python
department = "–ë–ª–æ–∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏/–°–ª—É–∂–±–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏/–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏"
position = "–°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç"
```

**–®–∞–≥–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**:
1. –ò–∑–≤–ª–µ–∫–∞–µ–º –∫–æ—Ä–æ—Ç–∫–æ–µ –∏–º—è: `"–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏"`
2. –ò—â–µ–º –≤ –∫–µ—à–µ: `organization_cache.find_department("–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏")`
3. –ù–∞—Ö–æ–¥–∏–º –ø—É—Ç—å: `"–ë–ª–æ–∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏/–°–ª—É–∂–±–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏/–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏"`
4. –†–∞–∑–±–∏–≤–∞–µ–º –Ω–∞ —á–∞—Å—Ç–∏: `["–ë–ª–æ–∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏", "–°–ª—É–∂–±–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏", "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏"]`
5. –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–∑–∏—Ü–∏–∏: `"–°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç"` –≤ `["–°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç", "–†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è", "–ì–ª–∞–≤–Ω—ã–π —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç"]` ‚Üí ‚úÖ –ù–ê–ô–î–ï–ù–û
6. –°—Ç—Ä–æ–∏–º –∏–µ—Ä–∞—Ä—Ö–∏—é:

```python
{
    "full_path_parts": ["–ë–ª–æ–∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏", "–°–ª—É–∂–±–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏", "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏"],
    "hierarchy_level": 3,
    "business_block": "–ë–ª–æ–∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏",
    "department_unit": "–°–ª—É–∂–±–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏",
    "section_unit": "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏",
    "group_unit": "",
    "sub_section_unit": "",
    "final_group_unit": "",
    "final_unit": "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏",
    "position": "–°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç",
    "full_hierarchy_path": "–ë–ª–æ–∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ ‚Üí –°–ª—É–∂–±–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ ‚Üí –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏",
    "department_path_legacy": "–ë–ª–æ–∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏/–°–ª—É–∂–±–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏/–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏"
}
```

**–û—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞**:
- ‚úÖ **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ 6 —É—Ä–æ–≤–Ω–µ–π**: –ü–æ–∫—Ä—ã–≤–∞–µ—Ç –≤—Å—é –≥–ª—É–±–∏–Ω—É –∏–µ—Ä–∞—Ä—Ö–∏–∏ –ê101
- ‚úÖ **–†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –ø–æ–∏—Å–∫**: –ò—â–µ—Ç –ø–æ–∑–∏—Ü–∏—é –≤–æ –≤—Å–µ—Ö –¥–æ—á–µ—Ä–Ω–∏—Ö –ø–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è—Ö
- ‚úÖ **Fallback —Å—Ç—Ä–∞—Ç–µ–≥–∏—è**: –ï—Å–ª–∏ –ø–æ–∑–∏—Ü–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —É—Ä–æ–≤–µ–Ω—å –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞
- ‚ö†Ô∏è **–¢–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –∏–º–µ–Ω**: –ï—Å–ª–∏ –∏–º—è –ø–æ–∑–∏—Ü–∏–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Ç–æ—á–Ω–æ, –º–æ–∂–µ—Ç –Ω–µ –Ω–∞–π—Ç–∏

---

### 2.5 –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ - –ó–∞–≥—Ä—É–∑–∫–∞ —Å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º

#### 2.5.1 –ö–∞—Ä—Ç–∞ –∫–æ–º–ø–∞–Ω–∏–∏ –ê101 (_load_company_map_cached)

**–ò—Å—Ç–æ—á–Ω–∏–∫**: `/home/yan/A101/HR/data/–ö–∞—Ä—Ç–∞ –ö–æ–º–ø–∞–Ω–∏–∏ –ê101.md`

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏**:
- **–†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞**: 180K (183,296 –±–∞–π—Ç)
- **–û—Ü–µ–Ω–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤**: ~51,000 —Ç–æ–∫–µ–Ω–æ–≤ (180K / 3.5)
- **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ù–∞–≤—Å–µ–≥–¥–∞ (–∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ)
- **–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ**: –ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –±–∏–∑–Ω–µ—Å-–º–æ–¥–µ–ª–∏ –ê101, –∏—Å—Ç–æ—Ä–∏–∏, —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –±–∏–∑–Ω–µ—Å–∞

**–†–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø—Ä–æ—Ñ–∏–ª—è**:
- ‚úÖ **–ù—É–∂–Ω–æ –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞**: –ò—Å—Ç–æ—Ä–∏—è –∫–æ–º–ø–∞–Ω–∏–∏, —Ü–µ–Ω–Ω–æ—Å—Ç–∏, –±–∏–∑–Ω–µ—Å-–º–æ–¥–µ–ª—å
- ‚ö†Ô∏è **–ò–∑–±—ã—Ç–æ—á–Ω–æ—Å—Ç—å**: 51K —Ç–æ–∫–µ–Ω–æ–≤ - –æ—á–µ–Ω—å –º–Ω–æ–≥–æ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è
- üí° **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è**: –ú–æ–∂–Ω–æ —Å–æ–∫—Ä–∞—Ç–∏—Ç—å –¥–æ 10-15K —Ç–æ–∫–µ–Ω–æ–≤, –æ—Å—Ç–∞–≤–∏–≤ —Ç–æ–ª—å–∫–æ –∫–ª—é—á–µ–≤—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é

#### 2.5.2 IT —Å–∏—Å—Ç–µ–º—ã (_load_it_systems_cached)

**–ò—Å—Ç–æ—á–Ω–∏–∫**: `/home/yan/A101/HR/data/anonymized_digitization_map.md`

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏**:
- **–†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞**: 16K (16,384 –±–∞–π—Ç)
- **–û—Ü–µ–Ω–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤**: ~4,500 —Ç–æ–∫–µ–Ω–æ–≤ (16K / 3.5)
- **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ù–∞–≤—Å–µ–≥–¥–∞
- **–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ**: –ö–∞—Ä—Ç–∞ —Ü–∏—Ñ—Ä–æ–≤–∏–∑–∞—Ü–∏–∏, IT —Å–∏—Å—Ç–µ–º—ã –ê101

**–†–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å**:
- ‚úÖ **–ù—É–∂–Ω–æ –¥–ª—è IT –ø–æ–∑–∏—Ü–∏–π**: –ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä —Ä–µ—à–µ–Ω–∏–π, –°–∏—Å—Ç–µ–º–Ω—ã–π –∞–Ω–∞–ª–∏—Ç–∏–∫
- ‚ö†Ô∏è **–ù–µ –Ω—É–∂–Ω–æ –¥–ª—è –¥—Ä—É–≥–∏—Ö**: –°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, HR –º–µ–Ω–µ–¥–∂–µ—Ä
- üí° **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è**: –ó–∞–≥—Ä—É–∂–∞—Ç—å —Ç–æ–ª—å–∫–æ –¥–ª—è IT –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–æ–≤

#### 2.5.3 JSON —Å—Ö–µ–º–∞ –ø—Ä–æ—Ñ–∏–ª—è (_load_profile_schema_cached)

**–ò—Å—Ç–æ—á–Ω–∏–∫**: `/home/yan/A101/HR/templates/job_profile_schema.json`

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏**:
- **–†–∞–∑–º–µ—Ä**: ~3K —Å–∏–º–≤–æ–ª–æ–≤
- **–û—Ü–µ–Ω–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤**: ~1,000 —Ç–æ–∫–µ–Ω–æ–≤
- **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ù–∞–≤—Å–µ–≥–¥–∞
- **–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ**: JSON Schema –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞

**–†–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å**:
- ‚úÖ **–ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û**: –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ—Ñ–∏–ª—è
- ‚úÖ **–û–ø—Ç–∏–º–∞–ª—å–Ω–æ**: –†–∞–∑–º–µ—Ä –∞–¥–µ–∫–≤–∞—Ç–Ω—ã–π

#### 2.5.4 –ü–æ–ª–Ω–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–æ–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (_get_organization_structure_with_target)

**–ò—Å—Ç–æ—á–Ω–∏–∫**: `structure.json` —á–µ—Ä–µ–∑ `organization_cache`

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏**:
- **–†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞**: 356K (364,544 –±–∞–π—Ç)
- **–û—Ü–µ–Ω–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤**: ~101,000 —Ç–æ–∫–µ–Ω–æ–≤ (356K / 3.5)
- **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è**: –° –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π —Ü–µ–ª–µ–≤–æ–π –ø–æ–∑–∏—Ü–∏–∏ (`is_target=True`)
- **–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ**: –í–°–ï 567 –±–∏–∑–Ω–µ—Å-–µ–¥–∏–Ω–∏—Ü —Å –ø–æ–∑–∏—Ü–∏—è–º–∏ –∏ —á–∏—Å–ª–µ–Ω–Ω–æ—Å—Ç—å—é

**üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–ë–õ–ï–ú–ê: –ò–∑–±—ã—Ç–æ—á–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö**

**–ß—Ç–æ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è**:
```json
{
  "target_path": "–ë–ª–æ–∫ –û–î/–î–ò–¢/–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏",
  "total_business_units": 567,
  "structure": {
    "organization": {
      "–ë–ª–æ–∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏": {
        "name": "–ë–ª–æ–∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏",
        "positions": ["–ó–∞–º–µ—Å—Ç–∏—Ç–µ–ª—å –≥–µ–Ω–µ—Ä–∞–ª—å–Ω–æ–≥–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∞ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏"],
        "children": { ... }
      },
      "–ë–ª–æ–∫ –±–∏–∑–Ω–µ—Å-–¥–∏—Ä–µ–∫—Ç–æ—Ä–∞": { ... },
      "–ë–ª–æ–∫ –≥–ª–∞–≤–Ω–æ–≥–æ –±—É—Ö–≥–∞–ª—Ç–µ—Ä–∞": { ... },
      ... –í–°–ï 567 –ï–î–ò–ù–ò–¶ ...
      "–ë–ª–æ–∫ –û–î": {
        "name": "–ë–ª–æ–∫ –û–î",
        "is_target": true,
        "children": {
          "–î–ò–¢": {
            "name": "–î–ò–¢",
            "is_target": true,
            "children": {
              "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏": {
                "name": "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏",
                "is_target": true,
                "is_target_exact": true,
                "positions": ["–ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä —Ä–µ—à–µ–Ω–∏–π", "–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫", ...]
              }
            }
          }
        }
      }
    }
  }
}
```

**–ü—Ä–æ–±–ª–µ–º—ã**:
1. ‚ùå **–û–≥—Ä–æ–º–Ω—ã–π —Ä–∞–∑–º–µ—Ä**: 101K —Ç–æ–∫–µ–Ω–æ–≤ –¥–ª—è –ö–ê–ñ–î–û–ô –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
2. ‚ùå **99% –¥–∞–Ω–Ω—ã—Ö –Ω–µ—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã**: –î–ª—è –ø–æ–∑–∏—Ü–∏–∏ –≤ –î–ò–¢ –Ω–µ –Ω—É–∂–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–ª–æ–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
3. ‚ùå **–î–æ—Ä–æ–≥–æ**: $0.03/1M —Ç–æ–∫–µ–Ω–æ–≤ √ó 101K = $0.00303 –Ω–∞ –∫–∞–∂–¥—ã–π –ø—Ä–æ—Ñ–∏–ª—å –¢–û–õ–¨–ö–û –∑–∞ —ç—Ç—É –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é
4. ‚ö†Ô∏è **–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–µ —É—Ö—É–¥—à–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞**: LLM –º–æ–∂–µ—Ç –∑–∞–ø—É—Ç–∞—Ç—å—Å—è –≤ –æ–≥—Ä–æ–º–Ω–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ**:
```python
def _get_relevant_org_structure(target_path: str, levels_up: int = 2, levels_down: int = 1):
    """
    –ò–∑–≤–ª–µ—á—å –¢–û–õ–¨–ö–û —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É:
    - 2 —É—Ä–æ–≤–Ω—è –≤–≤–µ—Ä—Ö (—Ä–æ–¥–∏—Ç–µ–ª–∏)
    - 1 —É—Ä–æ–≤–µ–Ω—å –≤–Ω–∏–∑ (–¥–µ—Ç–∏)
    - Siblings (–±—Ä–∞—Ç—å—è/—Å–µ—Å—Ç—Ä—ã) –Ω–∞ —Ç–æ–º –∂–µ —É—Ä–æ–≤–Ω–µ

    –†–∞–∑–º–µ—Ä: ~5-10K —Ç–æ–∫–µ–Ω–æ–≤ –≤–º–µ—Å—Ç–æ 101K
    """
```

---

## 3. –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

### 3.1 –û–±—ä–µ–º –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö

**–°—É–º–º–∞—Ä–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤ –¥–ª—è —Ç–∏–ø–∏—á–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏**:

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°–∏–º–≤–æ–ª—ã | –¢–æ–∫–µ–Ω—ã | % –æ—Ç –æ–±—â–µ–≥–æ | –†–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å |
|-----------|---------|--------|-------------|---------------|
| `company_map` | 180,000 | 51,000 | 32.3% | ‚ö†Ô∏è –ò–ó–ë–´–¢–û–ß–ù–û |
| `OrgStructure` (–ü–û–õ–ù–ê–Ø) | 356,000 | 101,000 | 64.0% | ‚ùå –ö–†–ò–¢–ò–ß–ù–û –ò–ó–ë–´–¢–û–ß–ù–û |
| `kpi_data` | 0-45,000 | 0-13,000 | 0-8.2% | ‚úÖ –†–ï–õ–ï–í–ê–ù–¢–ù–û (–µ—Å–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–∞–π–ª) |
| `it_systems` | 16,000 | 4,500 | 2.8% | ‚ö†Ô∏è –ò–ó–ë–´–¢–û–ß–ù–û (–Ω–µ –¥–ª—è –≤—Å–µ—Ö) |
| `org_structure` (—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–∞—è) | 5,000 | 1,400 | 0.9% | ‚úÖ –†–ï–õ–ï–í–ê–ù–¢–ù–û |
| `json_schema` | 3,000 | 1,000 | 0.6% | ‚úÖ –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û |
| –û—Å—Ç–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ | 1,000 | 300 | 0.2% | ‚úÖ –†–ï–õ–ï–í–ê–ù–¢–ù–û |
| **–ò–¢–û–ì–û** | **~561,000** | **~158,000** | **100%** | **‚ö†Ô∏è 97% –ò–ó–ë–´–¢–û–ß–ù–û** |

**üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–ë–õ–ï–ú–ê: 97% –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏–∑–±—ã—Ç–æ—á–Ω—ã**

**–û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞**:
```
json_schema:           1,000 —Ç–æ–∫–µ–Ω–æ–≤  ‚úÖ
company_map (—Å–∂–∞—Ç—ã–π):  10,000 —Ç–æ–∫–µ–Ω–æ–≤ ‚úÖ (–≤–º–µ—Å—Ç–æ 51K)
org_structure (—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–∞—è): 5,000 —Ç–æ–∫–µ–Ω–æ–≤ ‚úÖ (–≤–º–µ—Å—Ç–æ 101K)
kpi_data:              0-13,000 —Ç–æ–∫–µ–Ω–æ–≤ ‚úÖ
it_systems (—É—Å–ª–æ–≤–Ω–æ):  0-4,500 —Ç–æ–∫–µ–Ω–æ–≤ ‚úÖ (—Ç–æ–ª—å–∫–æ –¥–ª—è IT)
metadata:              300 —Ç–æ–∫–µ–Ω–æ–≤ ‚úÖ

–ò–¢–û–ì–û: ~19,000-33,000 —Ç–æ–∫–µ–Ω–æ–≤ (–≤–º–µ—Å—Ç–æ 158K)
–≠–ö–û–ù–û–ú–ò–Ø: 79-88% —Ç–æ–∫–µ–Ω–æ–≤
```

### 3.2 –°—Ç–æ–∏–º–æ—Å—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

**–¢–µ–∫—É—â–∏–µ —Ä–∞—Å—Ö–æ–¥—ã** (–ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ Gemini 2.5 Flash):

```
Input tokens: 158,000
Output tokens: ~4,000 (—Å—Ä–µ–¥–Ω–∏–π –ø—Ä–æ—Ñ–∏–ª—å)

–°—Ç–æ–∏–º–æ—Å—Ç—å –∑–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é:
Input:  158,000 √ó $0.03/1M = $0.00474
Output: 4,000 √ó $0.12/1M = $0.00048
–ò–¢–û–ì–û: $0.00522 –∑–∞ –ø—Ä–æ—Ñ–∏–ª—å
```

**–ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏**:

```
Input tokens: 25,000 (—Å—Ä–µ–¥–Ω–∏–π –ø–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏)
Output tokens: ~4,000

–°—Ç–æ–∏–º–æ—Å—Ç—å –∑–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é:
Input:  25,000 √ó $0.03/1M = $0.00075
Output: 4,000 √ó $0.12/1M = $0.00048
–ò–¢–û–ì–û: $0.00123 –∑–∞ –ø—Ä–æ—Ñ–∏–ª—å

–≠–ö–û–ù–û–ú–ò–Ø: $0.00399 –∑–∞ –ø—Ä–æ—Ñ–∏–ª—å (76% —Å–Ω–∏–∂–µ–Ω–∏–µ)
```

**–ü—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ 1000 –ø—Ä–æ—Ñ–∏–ª–µ–π**:
- –¢–µ–∫—É—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å: $5.22
- –ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏: $1.23
- **–≠–∫–æ–Ω–æ–º–∏—è: $3.99 (76%)**

### 3.3 –ü–æ–ª–Ω–æ—Ç–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —É—Ä–æ–≤–Ω–µ–π –∏–µ—Ä–∞—Ä—Ö–∏–∏

**–û—Ü–µ–Ω–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –ø–æ —É—Ä–æ–≤–Ω—è–º**:

| –£—Ä–æ–≤–µ–Ω—å | –ü—Ä–∏–º–µ—Ä | –û—Ä–≥—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ | KPI –¥–∞–Ω–Ω—ã–µ | –ü–æ–¥—á–∏–Ω–µ–Ω–Ω—ã–µ | –ü–æ–ª–Ω–æ—Ç–∞ |
|---------|--------|--------------|------------|-------------|---------|
| 1. –ë–ª–æ–∫ | –ë–ª–æ–∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ | ‚úÖ –î–ê | ‚ùå –ù–ï–¢ (fallback –Ω–∞ –î–ò–¢) | ‚úÖ –î–ê | ‚ö†Ô∏è 66% |
| 2. –î–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç | –î–ò–¢ | ‚úÖ –î–ê | ‚úÖ –î–ê | ‚úÖ –î–ê | ‚úÖ 100% |
| 3. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ | ‚úÖ –î–ê | ‚ö†Ô∏è –ù–ê–°–õ–ï–î–£–ï–¢–°–Ø –æ—Ç –î–ò–¢ | ‚úÖ –î–ê | ‚ö†Ô∏è 83% |
| 4. –û—Ç–¥–µ–ª | –û—Ç–¥–µ–ª –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã | ‚úÖ –î–ê | ‚ö†Ô∏è –ù–ê–°–õ–ï–î–£–ï–¢–°–Ø –æ—Ç –î–ò–¢ | ‚úÖ –î–ê | ‚ö†Ô∏è 83% |
| 5. –ü–æ–¥-–æ—Ç–¥–µ–ª | –ì—Ä—É–ø–ø–∞ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (–ø–æ–¥ –æ—Ç–¥–µ–ª–æ–º) | ‚úÖ –î–ê | ‚ö†Ô∏è –ù–ê–°–õ–ï–î–£–ï–¢–°–Ø –æ—Ç –î–ò–¢ | ‚úÖ –î–ê | ‚ö†Ô∏è 83% |
| 6. –ì—Ä—É–ø–ø–∞ | –ì—Ä—É–ø–ø–∞ –±—ç–∫–µ–Ω–¥-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ | ‚úÖ –î–ê | ‚ö†Ô∏è –ù–ê–°–õ–ï–î–£–ï–¢–°–Ø –æ—Ç –î–ò–¢ | ‚úÖ –î–ê | ‚ö†Ô∏è 83% |

**–ü—Ä–æ–±–ª–µ–º—ã –ø–æ–ª–Ω–æ—Ç—ã**:

1. **KPI –¥–∞–Ω–Ω—ã–µ**:
   - ‚úÖ –£—Ä–æ–≤–µ–Ω—å 2 (–î–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç): 9 –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–æ–≤ –∏–º–µ—é—Ç —Å–≤–æ–∏ KPI
   - ‚ùå –£—Ä–æ–≤–µ–Ω—å 1 (–ë–ª–æ–∫): –ù–µ—Ç KPI —Ñ–∞–π–ª–æ–≤ –¥–ª—è –±–ª–æ–∫–æ–≤
   - ‚ö†Ô∏è –£—Ä–æ–≤–µ–Ω—å 3-6: –ù–∞—Å–ª–µ–¥—É—é—Ç KPI –æ—Ç —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞ (–º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ—Ç–æ—á–Ω–æ)

2. **–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–æ–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞**:
   - ‚úÖ –í–°–ï —É—Ä–æ–≤–Ω–∏: –î–æ—Å—Ç—É–ø–Ω–∞ –ø–æ–ª–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏–∑ `structure.json`

3. **–ß–∏—Å–ª–µ–Ω–Ω–æ—Å—Ç—å –∏ –ø–æ–¥—á–∏–Ω–µ–Ω–Ω—ã–µ**:
   - ‚úÖ –í–°–ï —É—Ä–æ–≤–Ω–∏: –î–∞–Ω–Ω—ã–µ `headcount` –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç –Ω–∞ –≤—Å–µ—Ö —É—Ä–æ–≤–Ω—è—Ö
   - ‚úÖ –†–∞—Å—á–µ—Ç –ø–æ–¥—á–∏–Ω–µ–Ω–Ω—ã—Ö: –†–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –¥–ª—è –≤—Å–µ—Ö —É—Ä–æ–≤–Ω–µ–π

---

## 4. –ü—Ä–æ–±–ª–µ–º–Ω—ã–µ –∑–æ–Ω—ã

### 4.1 –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø: –ò–∑–±—ã—Ç–æ—á–Ω–æ—Å—Ç—å –ø–æ–ª–Ω–æ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–æ–Ω–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

**–ü—Ä–æ–±–ª–µ–º–∞**:
- –ü–µ—Ä–µ–¥–∞–µ—Ç—Å—è –ü–û–õ–ù–ê–Ø —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (567 –±–∏–∑–Ω–µ—Å-–µ–¥–∏–Ω–∏—Ü, 356K —Å–∏–º–≤–æ–ª–æ–≤, ~101K —Ç–æ–∫–µ–Ω–æ–≤)
- –î–ª—è –ø–æ–∑–∏—Ü–∏–∏ "–ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä —Ä–µ—à–µ–Ω–∏–π" –≤ "–î–ò–¢" –Ω–µ –Ω—É–∂–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ "–ë–ª–æ–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏"

**–í–ª–∏—è–Ω–∏–µ**:
- ‚ùå **–°—Ç–æ–∏–º–æ—Å—Ç—å**: 64% –æ—Ç –≤—Å–µ—Ö input —Ç–æ–∫–µ–Ω–æ–≤
- ‚ùå **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç latency –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- ‚ùå **–ö–∞—á–µ—Å—Ç–≤–æ**: LLM –º–æ–∂–µ—Ç –∑–∞–ø—É—Ç–∞—Ç—å—Å—è –≤ –æ–≥—Ä–æ–º–Ω–æ–º –Ω–µ—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ

**–†–µ—à–µ–Ω–∏–µ**:
```python
def _get_relevant_org_structure_optimized(target_path: str):
    """
    –ò–∑–≤–ª–µ—á—å –¢–û–õ–¨–ö–û —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É:
    1. –†–æ–¥–∏—Ç–µ–ª—å—Å–∫—É—é —Ü–µ–ø–æ—á–∫—É –¥–æ –∫–æ—Ä–Ω—è (–ë–ª–æ–∫ ‚Üí –î–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç ‚Üí –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ)
    2. Siblings –Ω–∞ —Ç–æ–º –∂–µ —É—Ä–æ–≤–Ω–µ (–±—Ä–∞—Ç—Å–∫–∏–µ –ø–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è)
    3. Children –Ω–∞ 1-2 —É—Ä–æ–≤–Ω—è –≤–Ω–∏–∑

    –ü—Ä–∏–º–µ—Ä –¥–ª—è "–î–ò–¢/–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏/–ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä —Ä–µ—à–µ–Ω–∏–π":

    –ë–ª–æ–∫ –û–î (—Ä–æ–¥–∏—Ç–µ–ª—å)
    ‚îú‚îÄ –î–ò–¢ (—Ä–æ–¥–∏—Ç–µ–ª—å + —Ü–µ–ª–µ–≤–æ–π)
    ‚îÇ  ‚îú‚îÄ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (—Ü–µ–ª–µ–≤–æ–π)
    ‚îÇ  ‚îÇ  ‚îú‚îÄ –û—Ç–¥–µ–ª –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã (child)
    ‚îÇ  ‚îÇ  ‚îî‚îÄ –û—Ç–¥–µ–ª —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (child)
    ‚îÇ  ‚îú‚îÄ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã (sibling)
    ‚îÇ  ‚îî‚îÄ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ (sibling)
    ‚îî‚îÄ –î–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (sibling –Ω–∞ —É—Ä–æ–≤–Ω–µ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞)

    –†–∞–∑–º–µ—Ä: ~5-10K —Ç–æ–∫–µ–Ω–æ–≤ –≤–º–µ—Å—Ç–æ 101K
    –≠–ö–û–ù–û–ú–ò–Ø: 90-95%
    """
    pass
```

### 4.2 –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø: –ù–∏–∑–∫–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ KPI –º–∞–ø–ø–∏–Ω–≥–∞

**–ü—Ä–æ–±–ª–µ–º–∞**:
- –¢–æ–ª—å–∫–æ 9 –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–æ–≤ –∏–∑ 567 –±–∏–∑–Ω–µ—Å-–µ–¥–∏–Ω–∏—Ü –∏–º–µ—é—Ç KPI —Ñ–∞–π–ª—ã
- 558 –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–æ–≤ –ø–æ–ª—É—á–∞—é—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ KPI (fallback –Ω–∞ KPI_DIT.md)

**–ü—Ä–∏–º–µ—Ä—ã –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –º–∞–ø–ø–∏–Ω–≥–∞**:

```python
# –î–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç "–ë–ª–æ–∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏"
kpi_data = load_kpi_content("–ë–ª–æ–∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏")
# –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç KPI_DIT.md —Å –ø–æ–∫–∞–∑–∞—Ç–µ–ª—è–º–∏ IT –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞:
# - "–ü–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ SLA –ø–æ —É—Å–ª—É–≥–∞–º –î–ò–¢"
# - "–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å —Å–µ—Ç–∏ –≤ —É–¥–∞–ª–µ–Ω–Ω—ã—Ö –æ—Ñ–∏—Å–∞—Ö"
# - "–í–≤–µ–¥–µ–Ω–∏–µ –≤ —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏—é —Å–∏—Å—Ç–µ–º—ã –£–º–Ω–æ–µ –∑–¥–∞–Ω–∏–µ"
#
# ‚ùå –≠–¢–û –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û –î–õ–Ø –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–ò!
```

**–í–ª–∏—è–Ω–∏–µ**:
- ‚ùå **–ö–∞—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Ñ–∏–ª–µ–π**: LLM –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø—Ä–æ—Ñ–∏–ª–∏ —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ KPI –ø–æ–∫–∞–∑–∞—Ç–µ–ª—è–º–∏
- ‚ùå **–î–æ–≤–µ—Ä–∏–µ –∫ —Å–∏—Å—Ç–µ–º–µ**: HR —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—ã –º–æ–≥—É—Ç –∑–∞–º–µ—Ç–∏—Ç—å –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è

**–†–µ—à–µ–Ω–∏–µ**:

**–ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–æ–µ** (1-2 –Ω–µ–¥–µ–ª–∏):
```python
def load_kpi_content_with_fallback(department: str) -> str:
    """
    1. –ü–æ–ø—ã—Ç–∞—Ç—å—Å—è –Ω–∞–π—Ç–∏ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–π KPI —Ñ–∞–π–ª
    2. –ï—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –û–ë–©–ò–ï KPI –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏
    3. –ù–ï –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å KPI –¥—Ä—É–≥–æ–≥–æ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞
    """
    kpi_file = find_kpi_file(department)

    if kpi_file == "KPI_DIT.md" and "–ò–¢" not in department.upper():
        # –ù–µ –Ω–∞–π–¥–µ–Ω —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–π —Ñ–∞–π–ª
        return """
        # –û–±—â–∏–µ KPI –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –ê101

        ## –ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ KPI
        - –ü—Ä–æ–¥–∞–∂–∏/–≤—ã—Ä—É—á–∫–∞ –ø–æ –≤—Å–µ–º –±–∏–∑–Ω–µ—Å–∞–º
        - –í–≤–æ–¥ –≤ —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏—é –ñ–ö
        - –í—ã–ø–ª–∞—Ç–∞ –¥–∏–≤–∏–¥–µ–Ω–¥–æ–≤
        - –°—Ç—Ä–∞—Ç–µ–≥–∏—è –ú–ü–¢

        ## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞–Ω–∏—é –ª–∏—á–Ω—ã—Ö KPI
        [–û–±—â–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –±–µ–∑ –ø—Ä–∏–≤—è–∑–∫–∏ –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç—É]
        """
    else:
        return load_kpi_file(kpi_file)
```

**–î–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–µ** (1-2 –º–µ—Å—è—Ü–∞):
1. –°–æ–∑–¥–∞—Ç—å KPI —Ñ–∞–π–ª—ã –¥–ª—è –≤—Å–µ—Ö –æ—Å–Ω–æ–≤–Ω—ã—Ö –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–æ–≤ (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: —Ç–æ–ø-20 –ø–æ —á–∏—Å–ª–µ–Ω–Ω–æ—Å—Ç–∏)
2. –°–æ–∑–¥–∞—Ç—å generic KPI —à–∞–±–ª–æ–Ω—ã –¥–ª—è —Ç–∏–ø–æ–≤ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–æ–≤:
   - `KPI_generic_operations.md` (–æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç—ã)
   - `KPI_generic_support.md` (–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–µ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç—ã)
   - `KPI_generic_management.md` (—É–ø—Ä–∞–≤–ª–µ–Ω—á–µ—Å–∫–∏–µ –ø–æ–∑–∏—Ü–∏–∏)

### 4.3 –í–´–°–û–ö–ê–Ø: –ò–∑–±—ã—Ç–æ—á–Ω–æ—Å—Ç—å –∫–∞—Ä—Ç—ã –∫–æ–º–ø–∞–Ω–∏–∏

**–ü—Ä–æ–±–ª–µ–º–∞**:
- –ö–∞—Ä—Ç–∞ –∫–æ–º–ø–∞–Ω–∏–∏ –ê101: 180K —Å–∏–º–≤–æ–ª–æ–≤ (~51K —Ç–æ–∫–µ–Ω–æ–≤)
- 32% –æ—Ç –≤—Å–µ–≥–æ input –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- –°–æ–¥–µ—Ä–∂–∏—Ç –º–Ω–æ–≥–æ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä–∞—è –Ω–µ –Ω—É–∂–Ω–∞ –¥–ª—è –ö–ê–ñ–î–û–ì–û –ø—Ä–æ—Ñ–∏–ª—è

**–ß—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø—Ä–æ—Ñ–∏–ª—è**:
- ‚úÖ –ú–∏—Å—Å–∏—è –∏ —Ü–µ–Ω–Ω–æ—Å—Ç–∏ –∫–æ–º–ø–∞–Ω–∏–∏ (500 —Ç–æ–∫–µ–Ω–æ–≤)
- ‚úÖ –ö–ª—é—á–µ–≤—ã–µ –±–∏–∑–Ω–µ—Å-–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è (1000 —Ç–æ–∫–µ–Ω–æ–≤)
- ‚úÖ –°–ø–µ—Ü–∏—Ñ–∏–∫–∞ –ê101 (1000 —Ç–æ–∫–µ–Ω–æ–≤)
- ‚ùå –ò—Å—Ç–æ—Ä–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–º–ø–∞–Ω–∏–∏ (–Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ)
- ‚ùå –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ (–∏–∑–±—ã—Ç–æ—á–Ω–æ)

**–†–µ—à–µ–Ω–∏–µ**:
```python
def _load_company_map_optimized_cached() -> str:
    """
    –ó–∞–≥—Ä—É–∑–∏—Ç—å –°–ñ–ê–¢–£–Æ –≤–µ—Ä—Å–∏—é –∫–∞—Ä—Ç—ã –∫–æ–º–ø–∞–Ω–∏–∏:
    - –ú–∏—Å—Å–∏—è, —Ü–µ–Ω–Ω–æ—Å—Ç–∏, —Å—Ç—Ä–∞—Ç–µ–≥–∏—è
    - –ö–ª—é—á–µ–≤—ã–µ –±–∏–∑–Ω–µ—Å-–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è
    - –°–ø–µ—Ü–∏—Ñ–∏–∫–∞ —Ä–∞–±–æ—Ç—ã –≤ –ê101

    –†–∞–∑–º–µ—Ä: 10-15K —Ç–æ–∫–µ–Ω–æ–≤ (–≤–º–µ—Å—Ç–æ 51K)
    –≠–ö–û–ù–û–ú–ò–Ø: 70-80%
    """
    full_map = _load_company_map_cached()

    # –ò–∑–≤–ª–µ—á—å —Ç–æ–ª—å–∫–æ –∫–ª—é—á–µ–≤—ã–µ —Å–µ–∫—Ü–∏–∏
    sections_to_keep = [
        "## –ú–∏—Å—Å–∏—è –∏ —Ü–µ–Ω–Ω–æ—Å—Ç–∏",
        "## –ë–∏–∑–Ω–µ—Å-–º–æ–¥–µ–ª—å",
        "## –ö–ª—é—á–µ–≤—ã–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è",
        "## –ö—É–ª—å—Ç—É—Ä–∞ –∫–æ–º–ø–∞–Ω–∏–∏"
    ]

    optimized_map = extract_sections(full_map, sections_to_keep)
    return optimized_map
```

### 4.4 –°–†–ï–î–ù–Ø–Ø: –£—Å–ª–æ–≤–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ IT —Å–∏—Å—Ç–µ–º

**–ü—Ä–æ–±–ª–µ–º–∞**:
- IT —Å–∏—Å—Ç–µ–º—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –¥–ª—è –í–°–ï–• –ø–æ–∑–∏—Ü–∏–π (16K —Å–∏–º–≤–æ–ª–æ–≤, ~4.5K —Ç–æ–∫–µ–Ω–æ–≤)
- –ù–æ –Ω—É–∂–Ω—ã —Ç–æ–ª—å–∫–æ –¥–ª—è IT –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–æ–≤

**–†–µ—à–µ–Ω–∏–µ**:
```python
def prepare_langfuse_variables(department: str, position: str, ...):
    ...

    # –£—Å–ª–æ–≤–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ IT —Å–∏—Å—Ç–µ–º
    if _is_it_related_department(department):
        it_systems = _load_it_systems_cached()
    else:
        it_systems = ""

    variables = {
        ...
        "it_systems": it_systems,
        ...
    }

def _is_it_related_department(department: str) -> bool:
    """–ü—Ä–æ–≤–µ—Ä–∫–∞, –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –ª–∏ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç –∫ IT"""
    it_keywords = ["–ò–¢", "–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω", "—Ü–∏—Ñ—Ä", "digital", "–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä", "–¥–∞–Ω–Ω—ã—Ö"]
    return any(keyword in department.lower() for keyword in it_keywords)
```

### 4.5 –°–†–ï–î–ù–Ø–Ø: –ù–µ–¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å timestamp

**–ü—Ä–æ–±–ª–µ–º–∞**:
- `generation_timestamp` –∏–∑–º–µ–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- –ù–∞—Ä—É—à–∞–µ—Ç –ø–æ–ª–Ω—É—é –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

**–í–ª–∏—è–Ω–∏–µ**:
- ‚ö†Ô∏è –ù–µ–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ: timestamp –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –∫–∞—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Ñ–∏–ª—è
- ‚ö†Ô∏è –ù–æ –º–æ–∂–µ—Ç –≤–ª–∏—è—Ç—å –Ω–∞ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–†–µ—à–µ–Ω–∏–µ** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
```python
def prepare_langfuse_variables(..., deterministic: bool = False):
    ...

    variables = {
        ...
        "generation_timestamp": (
            "2025-01-01T00:00:00" if deterministic
            else datetime.now().isoformat()
        ),
        ...
    }
```

### 4.6 –ù–ò–ó–ö–ê–Ø: –î—É–±–ª–∏–∫–∞—Ç KPI —Ñ–∞–π–ª–∞ (KPI_DIT.md vs KPI_–î–ò–¢.md)

**–ü—Ä–æ–±–ª–µ–º–∞**:
- –î–≤–∞ —Ñ–∞–π–ª–∞ —Å —Ä–∞–∑–Ω—ã–º —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ–º (34 vs 47 —Å—Ç—Ä–æ–∫)
- –ù–µ–¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –º–∞–ø–ø–∏–Ω–≥–∞

**–†–µ—à–µ–Ω–∏–µ**:
1. –£–¥–∞–ª–∏—Ç—å `KPI_DIT.md` (—Å—Ç–∞—Ä—ã–π —Ñ–∞–π–ª)
2. –û–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ `KPI_–î–ò–¢.md`
3. –û–±–Ω–æ–≤–∏—Ç—å fallback –≤ `KPIMapper`:

```python
class KPIMapper:
    def __init__(self, kpi_dir: str = "data/KPI"):
        self.kpi_dir = Path(kpi_dir)
        self.default_kpi_file = "KPI_–î–ò–¢.md"  # –ò–∑–º–µ–Ω–∏—Ç—å —Å "KPI_DIT.md"
```

---

## 5. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é

### 5.1 –ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô)

#### 5.1.1 –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–æ–ª–Ω–æ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–æ–Ω–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å**:
–ó–∞–º–µ–Ω–∏—Ç—å `_get_organization_structure_with_target()` –Ω–∞ `_get_relevant_org_structure_optimized()`

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è**:
```python
def _get_relevant_org_structure_optimized(
    target_path: str,
    levels_up: int = 2,
    levels_down: int = 1,
    include_siblings: bool = True
) -> Dict[str, Any]:
    """
    –ò–∑–≤–ª–µ—á—å –¢–û–õ–¨–ö–û —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—É—é –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–æ–Ω–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É.

    Args:
        target_path: –ü–æ–ª–Ω—ã–π –ø—É—Ç—å –∫ —Ü–µ–ª–µ–≤–æ–π –ø–æ–∑–∏—Ü–∏–∏
        levels_up: –°–∫–æ–ª—å–∫–æ —É—Ä–æ–≤–Ω–µ–π –≤–≤–µ—Ä—Ö –≤–∫–ª—é—á–∏—Ç—å (—Ä–æ–¥–∏—Ç–µ–ª–∏)
        levels_down: –°–∫–æ–ª—å–∫–æ —É—Ä–æ–≤–Ω–µ–π –≤–Ω–∏–∑ –≤–∫–ª—é—á–∏—Ç—å (–¥–µ—Ç–∏)
        include_siblings: –í–∫–ª—é—á–∏—Ç—å –ª–∏ –±—Ä–∞—Ç—Å–∫–∏–µ –ø–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è

    Returns:
        –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (~5-10K —Ç–æ–∫–µ–Ω–æ–≤ –≤–º–µ—Å—Ç–æ 101K)
    """
    target_unit = organization_cache.find_unit_by_path(target_path)
    if not target_unit:
        return {"error": f"Target path not found: {target_path}"}

    path_parts = target_path.split("/")
    relevant_structure = {}

    # 1. –ò–∑–≤–ª–µ–∫–∞–µ–º —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫—É—é —Ü–µ–ø–æ—á–∫—É
    for i in range(len(path_parts)):
        parent_path = "/".join(path_parts[:i+1])
        parent_unit = organization_cache.find_unit_by_path(parent_path)
        if parent_unit:
            relevant_structure[parent_path] = {
                "name": parent_unit["name"],
                "positions": parent_unit["positions"],
                "is_target": (parent_path == target_path),
                "is_parent": True
            }

    # 2. –ò–∑–≤–ª–µ–∫–∞–µ–º siblings (–±—Ä–∞—Ç—Å–∫–∏–µ –ø–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è)
    if include_siblings and len(path_parts) > 1:
        parent_path = "/".join(path_parts[:-1])
        siblings = _get_siblings(parent_path, path_parts[-1])
        for sibling_path, sibling_data in siblings.items():
            relevant_structure[sibling_path] = {
                "name": sibling_data["name"],
                "positions": sibling_data["positions"],
                "is_sibling": True
            }

    # 3. –ò–∑–≤–ª–µ–∫–∞–µ–º –¥–µ—Ç–µ–π (–Ω–∞ levels_down —É—Ä–æ–≤–Ω–µ–π)
    children = _get_children_recursive(target_path, levels_down)
    relevant_structure.update(children)

    return {
        "target_path": target_path,
        "relevant_units_count": len(relevant_structure),
        "structure": relevant_structure,
        "optimization": f"Reduced from 567 units to {len(relevant_structure)} relevant units"
    }
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**:
- –†–∞–∑–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã: 5-10K —Ç–æ–∫–µ–Ω–æ–≤ (–≤–º–µ—Å—Ç–æ 101K)
- **–≠–∫–æ–Ω–æ–º–∏—è: 90-95% —Ç–æ–∫–µ–Ω–æ–≤**
- **–£–ª—É—á—à–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞**: LLM —Ñ–æ–∫—É—Å–∏—Ä—É–µ—Ç—Å—è –Ω–∞ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ

#### 5.1.2 –°–æ–∑–¥–∞–Ω–∏–µ generic KPI fallback

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å**:
–°–æ–∑–¥–∞—Ç—å –æ–±—â–∏–π KPI —Ñ–∞–π–ª –¥–ª—è –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–æ–≤ –±–µ–∑ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö KPI

**–§–∞–π–ª**: `/home/yan/A101/HR/data/KPI/KPI_generic.md`

```markdown
---
department: Generic
responsible: HR Department
description: –û–±—â–∏–µ KPI –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –¥–ª—è –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–æ–≤ –±–µ–∑ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ–≥–æ KPI —Ñ–∞–π–ª–∞
format_version: '1.0'
---

# –û–±—â–∏–µ KPI –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –ê101

## –ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ –ö–ü–≠

–ü—Ä–∏–º–µ–Ω–∏–º—ã –∫–æ –≤—Å–µ–º —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º –∫–æ–º–ø–∞–Ω–∏–∏:

| –ö–ü–≠ | –¶–µ–ª–µ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ | –ï–¥. –∏–∑–º. | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----|------------------|----------|----------|
| –ü—Ä–æ–¥–∞–∂–∏/–≤—ã—Ä—É—á–∫–∞ –ø–æ –≤—Å–µ–º –±–∏–∑–Ω–µ—Å–∞–º | 126041 | –º–ª–Ω. —Ä—É–±. | –û–±—â–∞—è –≤—ã—Ä—É—á–∫–∞ –∫–æ–º–ø–∞–Ω–∏–∏ |
| –í–≤–æ–¥ –≤ —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏—é –ñ–ö | 1007 | —Ç—ã—Å. –º2 | –í–≤–µ–¥–µ–Ω–Ω—ã–µ –ø–ª–æ—â–∞–¥–∏ |
| –í—ã–ø–ª–∞—Ç–∞ –¥–∏–≤–∏–¥–µ–Ω–¥–æ–≤ | 15171 | –º–ª–Ω. —Ä—É–±. | –î–∏–≤–∏–¥–µ–Ω–¥—ã –∞–∫—Ü–∏–æ–Ω–µ—Ä–∞–º |
| –°—Ç—Ä–∞—Ç–µ–≥–∏—è –ú–ü–¢ | 100 | % | –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ |

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞–Ω–∏—é –ª–∏—á–Ω—ã—Ö KPI

### –î–ª—è —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª–µ–π
- –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –±—é–¥–∂–µ—Ç–∞ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞
- –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ —Ü–µ–ª–µ–≤—ã—Ö –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π –∫–æ–º–∞–Ω–¥—ã
- –†–∞–∑–≤–∏—Ç–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ (–æ–±—É—á–µ–Ω–∏–µ, –∞—Ç—Ç–µ—Å—Ç–∞—Ü–∏—è)
- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏—Ö –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤

### –î–ª—è —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤
- –ö–∞—á–µ—Å—Ç–≤–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á
- –°–≤–æ–µ–≤—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–æ–≤
- –°–æ–±–ª—é–¥–µ–Ω–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–≤ –∏ –ø—Ä–æ—Ü–µ–¥—É—Ä
- –ò–Ω–∏—Ü–∏–∞—Ç–∏–≤–Ω–æ—Å—Ç—å –∏ –≤–∫–ª–∞–¥ –≤ —É–ª—É—á—à–µ–Ω–∏—è

### –î–ª—è —ç–∫—Å–ø–µ—Ä—Ç–æ–≤
- –ö–∞—á–µ—Å—Ç–≤–æ —ç–∫—Å–ø–µ—Ä—Ç–∏–∑—ã –∏ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–π
- –í–Ω–µ–¥—Ä–µ–Ω–∏–µ best practices
- –ù–∞—Å—Ç–∞–≤–Ω–∏—á–µ—Å—Ç–≤–æ –∏ –æ–±—É—á–µ–Ω–∏–µ –∫–æ–ª–ª–µ–≥
- –£—á–∞—Å—Ç–∏–µ –≤ —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö

## –ú–µ—Ç–æ–¥–∏–∫–∞ —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞–Ω–∏—è KPI

1. **SMART –∫—Ä–∏—Ç–µ—Ä–∏–∏**: Specific, Measurable, Achievable, Relevant, Time-bound
2. **–ë–∞–ª–∞–Ω—Å**: –ö–æ–ª–∏—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏
3. **–ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è**: 3-5 –∫–ª—é—á–µ–≤—ã—Ö –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π
4. **–ò–∑–º–µ—Ä–∏–º–æ—Å—Ç—å**: –ß–µ—Ç–∫–∏–µ –º–µ—Ç—Ä–∏–∫–∏ –∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö

## –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –¥–ª—è KPI

- –ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã —É—á–µ—Ç–∞
- –û—Ç—á–µ—Ç—ã –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–æ–≤
- –û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å –æ—Ç –∑–∞–∫–∞–∑—á–∏–∫–æ–≤
- –û–ø—Ä–æ—Å—ã —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
```

**–û–±–Ω–æ–≤–∏—Ç—å KPIMapper**:
```python
class KPIMapper:
    def __init__(self, kpi_dir: str = "data/KPI"):
        self.kpi_dir = Path(kpi_dir)
        self.default_kpi_file = "KPI_generic.md"  # –ò–∑–º–µ–Ω–∏—Ç—å —Å "KPI_DIT.md"
```

#### 5.1.3 –°–∂–∞—Ç–∏–µ –∫–∞—Ä—Ç—ã –∫–æ–º–ø–∞–Ω–∏–∏

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å**:
–°–æ–∑–¥–∞—Ç—å —Å–∂–∞—Ç—É—é –≤–µ—Ä—Å–∏—é –∫–∞—Ä—Ç—ã –∫–æ–º–ø–∞–Ω–∏–∏ —Å –∫–ª—é—á–µ–≤–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π

**–§–∞–π–ª**: `/home/yan/A101/HR/data/–ö–∞—Ä—Ç–∞ –ö–æ–º–ø–∞–Ω–∏–∏ –ê101 (—Å–∂–∞—Ç–∞—è).md`

**–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ**:
- –ú–∏—Å—Å–∏—è –∏ —Ü–µ–Ω–Ω–æ—Å—Ç–∏ (500 —Ç–æ–∫–µ–Ω–æ–≤)
- –ë–∏–∑–Ω–µ—Å-–º–æ–¥–µ–ª—å (1000 —Ç–æ–∫–µ–Ω–æ–≤)
- –ö–ª—é—á–µ–≤—ã–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è (1000 —Ç–æ–∫–µ–Ω–æ–≤)
- –ö—É–ª—å—Ç—É—Ä–∞ –∏ –ø—Ä–∏–Ω—Ü–∏–ø—ã —Ä–∞–±–æ—Ç—ã (500 —Ç–æ–∫–µ–Ω–æ–≤)
- **–ò–¢–û–ì–û: ~3000 —Ç–æ–∫–µ–Ω–æ–≤ (–≤–º–µ—Å—Ç–æ 51K)**

**–û–±–Ω–æ–≤–∏—Ç—å DataLoader**:
```python
def _load_company_map_cached(self) -> str:
    """–ó–∞–≥—Ä—É–∑–∫–∞ –°–ñ–ê–¢–û–ô –∫–∞—Ä—Ç—ã –∫–æ–º–ø–∞–Ω–∏–∏"""
    cache_key = "company_map"

    if cache_key not in self._cache:
        # –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–∂–∞—Ç—É—é –≤–µ—Ä—Å–∏—é
        compact_path = self.base_path / "data" / "–ö–∞—Ä—Ç–∞ –ö–æ–º–ø–∞–Ω–∏–∏ –ê101 (—Å–∂–∞—Ç–∞—è).md"
        if compact_path.exists():
            with open(compact_path, "r", encoding="utf-8") as f:
                content = f.read()
        else:
            # Fallback –Ω–∞ –ø–æ–ª–Ω—É—é –≤–µ—Ä—Å–∏—é (–¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)
            with open(self.paths["company_map"], "r", encoding="utf-8") as f:
                content = f.read()
            logger.warning("Compact company map not found, using full version")

        self._cache[cache_key] = content

    return self._cache[cache_key]
```

### 5.2 –ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è (1-2 –Ω–µ–¥–µ–ª–∏)

#### 5.2.1 –£—Å–ª–æ–≤–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ IT —Å–∏—Å—Ç–µ–º

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å**:
–ó–∞–≥—Ä—É–∂–∞—Ç—å IT —Å–∏—Å—Ç–µ–º—ã —Ç–æ–ª—å–∫–æ –¥–ª—è IT-related –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–æ–≤

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è**:
```python
def prepare_langfuse_variables(self, department: str, position: str, ...):
    ...

    # –£—Å–ª–æ–≤–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ IT —Å–∏—Å—Ç–µ–º
    if self._is_it_related_department(department):
        it_systems = self._load_it_systems_cached()
        logger.info(f"Loaded IT systems for IT-related department: {department}")
    else:
        it_systems = ""
        logger.info(f"Skipped IT systems for non-IT department: {department}")

    variables = {
        ...
        "it_systems": it_systems,
        ...
    }

def _is_it_related_department(self, department: str) -> bool:
    """–ü—Ä–æ–≤–µ—Ä–∫–∞, –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –ª–∏ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç –∫ IT"""
    it_keywords = [
        "–ò–¢", "–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω", "—Ü–∏—Ñ—Ä", "digital", "–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä", "–¥–∞–Ω–Ω—ã—Ö",
        "—Ä–∞–∑—Ä–∞–±–æ—Ç–∫", "–∞–Ω–∞–ª–∏—Ç–∏–∫", "—Å–∏—Å—Ç–µ–º", "devops", "qa"
    ]
    dept_lower = department.lower()
    return any(keyword in dept_lower for keyword in it_keywords)
```

#### 5.2.2 –£–¥–∞–ª–µ–Ω–∏–µ –¥—É–±–ª–∏–∫–∞—Ç–∞ KPI —Ñ–∞–π–ª–∞

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å**:
1. –£–¥–∞–ª–∏—Ç—å `KPI_DIT.md`
2. –û—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ `KPI_–î–ò–¢.md`
3. –û–±–Ω–æ–≤–∏—Ç—å fallback –≤ `KPIMapper`

**–ö–æ–º–∞–Ω–¥—ã**:
```bash
cd /home/yan/A101/HR/data/KPI/
rm KPI_DIT.md
git add -A
git commit -m "fix(data): remove duplicate KPI file KPI_DIT.md, keep KPI_–î–ò–¢.md"
```

#### 5.2.3 –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∞–ø–ø–∏–Ω–≥–∞ KPI

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å**:
–î–æ–±–∞–≤–∏—Ç—å –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –º–∞–ø–ø–∏–Ω–≥–∞

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è**:
```python
class KPIMapper:
    def find_kpi_file(self, department: str) -> str:
        ...

        # –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
        if kpi_file == self.default_kpi_file:
            logger.warning(
                f"‚ö†Ô∏è KPI FALLBACK: Department '{department}' mapped to default '{kpi_file}'. "
                f"Consider creating specific KPI file for this department."
            )
        else:
            logger.info(
                f"‚úÖ KPI MATCH: Department '{department}' mapped to '{kpi_file}'"
            )

        return kpi_file
```

### 5.3 –°—Ä–µ–¥–Ω–µ—Å—Ä–æ—á–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è (1-2 –º–µ—Å—è—Ü–∞)

#### 5.3.1 –°–æ–∑–¥–∞–Ω–∏–µ KPI —Ñ–∞–π–ª–æ–≤ –¥–ª—è —Ç–æ–ø-20 –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–æ–≤

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å**:
–°–æ–∑–¥–∞—Ç—å —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ KPI —Ñ–∞–π–ª—ã –¥–ª—è —Å–∞–º—ã—Ö –∫—Ä—É–ø–Ω—ã—Ö –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–æ–≤

**–ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è** (–ø–æ —á–∏—Å–ª–µ–Ω–Ω–æ—Å—Ç–∏ –∏–∑ structure.json):
1. –ö–æ–º–º–µ—Ä—á–µ—Å–∫–∏–π –±–ª–æ–∫ (~400 —á–µ–ª)
2. –ë–ª–æ–∫ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–∞ (~300 —á–µ–ª)
3. –ë–ª–æ–∫ —Ä–∞–∑–≤–∏—Ç–∏—è (~250 —á–µ–ª)
4. –§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –±–ª–æ–∫ (~150 —á–µ–ª)
5. –î–ò–¢ (—É–∂–µ –µ—Å—Ç—å)
6. HR –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç (—É–∂–µ –µ—Å—Ç—å - –ü–†–ü)
7. ...

**–ü—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è**:
1. –°–æ–±—Ä–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ KPI –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ —É —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª–µ–π –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–æ–≤
2. –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ —Ñ–æ—Ä–º–∞—Ç–µ YAML + —Ç–∞–±–ª–∏—Ü–∞
3. –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª—ã `KPI_[–∫–æ–¥ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞].md`
4. –û–±–Ω–æ–≤–∏—Ç—å `KPIDepartmentMapper.DEPARTMENT_TO_KPI_FILE`

#### 5.3.2 –£–ª—É—á—à–µ–Ω–∏–µ –∞–ª–≥–æ—Ä–∏—Ç–º–∞ calculate_subordinates_count

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å**:
–î–æ–±–∞–≤–∏—Ç—å –±–æ–ª–µ–µ —Ç–æ—á–Ω—É—é –ª–æ–≥–∏–∫—É —Ä–∞—Å—á–µ—Ç–∞ –ø–æ–¥—á–∏–Ω–µ–Ω–Ω—ã—Ö —Å —É—á–µ—Ç–æ–º —Ç–∏–ø–∞ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è**:
```python
def calculate_subordinates_count_v2(
    self,
    department_name: str,
    position_title: str,
    department_type: Optional[str] = None
) -> Dict[str, int]:
    """
    –£–ª—É—á—à–µ–Ω–Ω—ã–π —Ä–∞—Å—á–µ—Ç –ø–æ–¥—á–∏–Ω–µ–Ω–Ω—ã—Ö —Å —É—á–µ—Ç–æ–º —Ç–∏–ø–∞ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞.

    Args:
        department_name: –ù–∞–∑–≤–∞–Ω–∏–µ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞
        position_title: –ù–∞–∑–≤–∞–Ω–∏–µ –¥–æ–ª–∂–Ω–æ—Å—Ç–∏
        department_type: –¢–∏–ø –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞ (operations, support, sales, etc.)
    """
    # 1. –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
    if department_type is None:
        department_type = self._detect_department_type(department_name)

    # 2. –ü–æ–ª—É—á–∞–µ–º —á–∏—Å–ª–µ–Ω–Ω–æ—Å—Ç—å
    dept_headcount = self.get_department_headcount(department_name)
    if dept_headcount is None:
        estimated_headcount = self._estimate_headcount(department_name)
    else:
        estimated_headcount = dept_headcount

    # 3. –û–ø—Ä–µ–¥–µ–ª—è–µ–º —É—Ä–æ–≤–µ–Ω—å –ø–æ–∑–∏—Ü–∏–∏
    position_level = self._determine_management_level(position_title)

    # 4. –ü—Ä–∏–º–µ–Ω—è–µ–º –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–æ–≤
    coefficients = {
        "operations": {"dept_div": 20, "report_div": 8},
        "support": {"dept_div": 30, "report_div": 10},
        "sales": {"dept_div": 15, "report_div": 6},
        "technical": {"dept_div": 25, "report_div": 7},
        "default": {"dept_div": 25, "report_div": 10}
    }

    coef = coefficients.get(department_type, coefficients["default"])

    # 5. –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –ø–æ–¥—á–∏–Ω–µ–Ω–Ω—ã—Ö
    if position_level == "top_management":
        departments = min(estimated_headcount // coef["dept_div"], 8)
        direct_reports = min(estimated_headcount // coef["report_div"], 15)
    # ... –æ—Å—Ç–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ ...

    return {
        "departments": departments,
        "direct_reports": direct_reports,
        "calculation_method": "v2_type_aware",
        "department_type": department_type,
        "position_level": position_level
    }
```

#### 5.3.3 –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å**:
–°–æ–∑–¥–∞—Ç—å unit-—Ç–µ—Å—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

**–§–∞–π–ª**: `/home/yan/A101/HR/tests/test_context_determinism.py`

```python
import pytest
from backend.core.data_loader import DataLoader

@pytest.fixture
def data_loader():
    return DataLoader()

def test_context_determinism_same_inputs(data_loader):
    """–ü—Ä–æ–≤–µ—Ä–∫–∞: –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–∞—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç"""

    department = "–î–ò–¢"
    position = "–ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä —Ä–µ—à–µ–Ω–∏–π"
    employee_name = "–¢–µ—Å—Ç–æ–≤ –¢–µ—Å—Ç –¢–µ—Å—Ç–æ–≤–∏—á"

    # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–≤–∞–∂–¥—ã
    context1 = data_loader.prepare_langfuse_variables(
        department, position, employee_name
    )
    context2 = data_loader.prepare_langfuse_variables(
        department, position, employee_name
    )

    # –ò—Å–∫–ª—é—á–∞–µ–º timestamp –∏–∑ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
    exclude_keys = ["generation_timestamp", "estimated_input_tokens"]

    for key in context1:
        if key not in exclude_keys:
            assert context1[key] == context2[key], f"Mismatch in key: {key}"

def test_context_different_inputs(data_loader):
    """–ü—Ä–æ–≤–µ—Ä–∫–∞: —Ä–∞–∑–Ω—ã–µ –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–∞—é—Ç —Ä–∞–∑–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç"""

    context1 = data_loader.prepare_langfuse_variables("–î–ò–¢", "–ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä —Ä–µ—à–µ–Ω–∏–π")
    context2 = data_loader.prepare_langfuse_variables("–î–ò–¢", "–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫")

    # –ö–æ–Ω—Ç–µ–∫—Å—Ç –¥–æ–ª–∂–µ–Ω –æ—Ç–ª–∏—á–∞—Ç—å—Å—è –ø–æ –ø–æ–∑–∏—Ü–∏–∏
    assert context1["position"] != context2["position"]
    assert context1["position_location"] != context2["position_location"]

def test_kpi_mapping_consistency(data_loader):
    """–ü—Ä–æ–≤–µ—Ä–∫–∞: KPI –º–∞–ø–ø–∏–Ω–≥ –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω"""

    test_departments = ["–î–ò–¢", "–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –±–ª–æ–∫", "–î–ü–£", "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç"]

    for dept in test_departments:
        kpi1 = data_loader.kpi_mapper.find_kpi_file(dept)
        kpi2 = data_loader.kpi_mapper.find_kpi_file(dept)

        assert kpi1 == kpi2, f"KPI mapping not deterministic for {dept}"

def test_subordinates_calculation_consistency(data_loader):
    """–ü—Ä–æ–≤–µ—Ä–∫–∞: –†–∞—Å—á–µ—Ç –ø–æ–¥—á–∏–Ω–µ–Ω–Ω—ã—Ö –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω"""

    test_cases = [
        ("–î–ò–¢", "–î–∏—Ä–µ–∫—Ç–æ—Ä –ø–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–º —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è–º"),
        ("–î–ò–¢", "–†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è"),
        ("–î–ò–¢", "–ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä —Ä–µ—à–µ–Ω–∏–π"),
    ]

    for dept, position in test_cases:
        sub1 = data_loader.org_mapper.calculate_subordinates_count(dept, position)
        sub2 = data_loader.org_mapper.calculate_subordinates_count(dept, position)

        assert sub1 == sub2, f"Subordinates calculation not deterministic for {dept}/{position}"
```

### 5.4 –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è (3-6 –º–µ—Å—è—Ü–µ–≤)

#### 5.4.1 –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–æ–∑–∏—Ü–∏–∏

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å**:
–°–æ–∑–¥–∞—Ç—å –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—É—é —Å–∏—Å—Ç–µ–º—É –≤—ã–±–æ—Ä–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —É—Ä–æ–≤–Ω—è –ø–æ–∑–∏—Ü–∏–∏

**–ò–¥–µ—è**:
```python
def prepare_langfuse_variables_smart(
    self,
    department: str,
    position: str,
    employee_name: Optional[str] = None
) -> Dict[str, Any]:
    """
    –£–º–Ω–∞—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ —Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π –ø–æ —É—Ä–æ–≤–Ω—é –ø–æ–∑–∏—Ü–∏–∏.
    """
    # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —É—Ä–æ–≤–µ–Ω—å –ø–æ–∑–∏—Ü–∏–∏
    position_level = self._determine_position_level_enum(position)

    # –ë–∞–∑–æ–≤—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç (–≤—Å–µ–≥–¥–∞)
    variables = {
        "json_schema": self._load_profile_schema_cached(),
        "position": position,
        "department": department,
        "employee_name": employee_name or "",
        ...
    }

    # –£—Ä–æ–≤–µ–Ω—å-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç
    if position_level in ["top_management", "senior_management"]:
        # –î–ª—è —Ç–æ–ø-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç–∞: –ø–æ–ª–Ω–∞—è –∫–∞—Ä—Ç–∞ –∫–æ–º–ø–∞–Ω–∏–∏ + —à–∏—Ä–æ–∫–∞—è –æ—Ä–≥—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
        variables["company_map"] = self._load_company_map_cached()  # –ü–æ–ª–Ω–∞—è
        variables["org_structure"] = self._get_wide_org_structure(department, levels=3)
    elif position_level in ["middle_management", "team_lead"]:
        # –î–ª—è —Å—Ä–µ–¥–Ω–µ–≥–æ –º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç–∞: —Å–∂–∞—Ç–∞—è –∫–∞—Ä—Ç–∞ + —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–∞—è –æ—Ä–≥—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
        variables["company_map"] = self._load_company_map_compact_cached()
        variables["org_structure"] = self._get_relevant_org_structure(department, levels=2)
    else:
        # –î–ª—è —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤: —Ç–æ–ª—å–∫–æ essentials
        variables["company_map"] = self._load_company_essentials_cached()
        variables["org_structure"] = self._get_narrow_org_structure(department, levels=1)

    # IT —Å–∏—Å—Ç–µ–º—ã —Ç–æ–ª—å–∫–æ –¥–ª—è IT –ø–æ–∑–∏—Ü–∏–π
    if self._is_it_related_department(department):
        variables["it_systems"] = self._load_it_systems_cached()

    return variables
```

#### 5.4.2 A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞ –ø—Ä–æ—Ñ–∏–ª–µ–π

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å**:
–ü—Ä–æ–≤–µ—Å—Ç–∏ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã –¥–ª—è –∏–∑–º–µ—Ä–µ–Ω–∏—è –≤–ª–∏—è–Ω–∏—è –æ–±—ä–µ–º–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –Ω–∞ –∫–∞—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Ñ–∏–ª–µ–π

**–ü–ª–∞–Ω —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞**:
```python
# –í–∞—Ä–∏–∞–Ω—Ç A: –¢–µ–∫—É—â–∏–π (–ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç, 158K —Ç–æ–∫–µ–Ω–æ–≤)
# –í–∞—Ä–∏–∞–Ω—Ç B: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π (—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç, 25K —Ç–æ–∫–µ–Ω–æ–≤)

test_positions = [
    ("–î–ò–¢", "–ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä —Ä–µ—à–µ–Ω–∏–π"),
    ("–î–ò–¢", "–†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è"),
    ("–ë–ª–æ–∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏", "–°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏"),
    ("–ö–æ–º–º–µ—Ä—á–µ—Å–∫–∏–π –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç", "–ú–µ–Ω–µ–¥–∂–µ—Ä –ø–æ –ø—Ä–æ–¥–∞–∂–∞–º"),
    ... # 20 —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π
]

results = []

for dept, pos in test_positions:
    # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –ø—Ä–æ—Ñ–∏–ª–∏ –æ–±–æ–∏–º–∏ –º–µ—Ç–æ–¥–∞–º–∏
    profile_a = generate_profile_full_context(dept, pos)
    profile_b = generate_profile_optimized_context(dept, pos)

    # –û—Ü–µ–Ω–∏–≤–∞–µ–º –∫–∞—á–µ—Å—Ç–≤–æ (—ç–∫—Å–ø–µ—Ä—Ç–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ HR)
    quality_a = expert_evaluate(profile_a)
    quality_b = expert_evaluate(profile_b)

    results.append({
        "department": dept,
        "position": pos,
        "quality_a": quality_a,
        "quality_b": quality_b,
        "tokens_a": 158000,
        "tokens_b": 25000,
        "cost_a": 0.00474,
        "cost_b": 0.00075
    })

# –ê–Ω–∞–ª–∏–∑: –≤–ª–∏—è–µ—Ç –ª–∏ —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –Ω–∞ –∫–∞—á–µ—Å—Ç–≤–æ?
# –ì–∏–ø–æ—Ç–µ–∑–∞: –∫–∞—á–µ—Å—Ç–≤–æ –ù–ï —É—Ö—É–¥—à–∏—Ç—Å—è, –Ω–æ —Å—Ç–æ–∏–º–æ—Å—Ç—å —Å–Ω–∏–∑–∏—Ç—Å—è –Ω–∞ 76%
```

#### 5.4.3 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å HR —Å–∏—Å—Ç–µ–º–∞–º–∏ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è KPI

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å**:
–°–æ–∑–¥–∞—Ç—å pipeline –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è KPI –∏–∑ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã—Ö —Å–∏—Å—Ç–µ–º

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**:
```
HR Systems (1C, SAP) ‚Üí API ‚Üí KPI Extractor ‚Üí Markdown Generator ‚Üí KPI Files
                                    ‚Üì
                            Validation & Review
                                    ‚Üì
                            Git Commit ‚Üí Deploy
```

---

## 6. –ó–∞–∫–ª—é—á–µ–Ω–∏–µ –∏ –ø–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π

### 6.1 –°–≤–æ–¥–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ —Ç–µ–∫—É—â–µ–π —Å–∏—Å—Ç–µ–º—ã

| –ö—Ä–∏—Ç–µ—Ä–∏–π | –û—Ü–µ–Ω–∫–∞ | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|----------|--------|-------------|
| **–î–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å** | ‚úÖ 9/10 | –í—ã—Å–æ–∫–∞—è, –∑–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º timestamp |
| **–û–±—ä–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞** | ‚ùå 3/10 | –ö–†–ò–¢–ò–ß–ï–°–ö–ò –∏–∑–±—ã—Ç–æ—á–µ–Ω (158K —Ç–æ–∫–µ–Ω–æ–≤) |
| **–†–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö** | ‚ö†Ô∏è 5/10 | 97% –¥–∞–Ω–Ω—ã—Ö –∏–∑–±—ã—Ç–æ—á–Ω—ã –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –ø–æ–∑–∏—Ü–∏–π |
| **KPI –ø–æ–∫—Ä—ã—Ç–∏–µ** | ‚ùå 2/10 | –¢–æ–ª—å–∫–æ 1.6% –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–æ–≤ (9 –∏–∑ 567) |
| **–ß–∏—Å–ª–µ–Ω–Ω–æ—Å—Ç—å –ø–æ–¥—á–∏–Ω–µ–Ω–Ω—ã—Ö** | ‚úÖ 8/10 | –†–µ–∞–ª–∏—Å—Ç–∏—á–Ω–∞—è –ª–æ–≥–∏–∫–∞, –æ—Å–Ω–æ–≤–∞–Ω–∞ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö |
| **–ö–∞—á–µ—Å—Ç–≤–æ –æ—Ä–≥—Å—Ç—Ä—É–∫—Ç—É—Ä—ã** | ‚úÖ 9/10 | –ü–æ–ª–Ω–∞—è, –¥–µ—Ç–∞–ª—å–Ω–∞—è, —Å —á–∏—Å–ª–µ–Ω–Ω–æ—Å—Ç—å—é |
| **–°—Ç–æ–∏–º–æ—Å—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏** | ‚ùå 4/10 | $0.00522 –∑–∞ –ø—Ä–æ—Ñ–∏–ª—å (–º–æ–∂–Ω–æ —Å–Ω–∏–∑–∏—Ç—å –Ω–∞ 76%) |
| **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** | ‚ö†Ô∏è 6/10 | –ú–µ–¥–ª–µ–Ω–Ω–∞—è –∏–∑-–∑–∞ –±–æ–ª—å—à–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ |

**–û–ë–©–ê–Ø –û–¶–ï–ù–ö–ê**: ‚ö†Ô∏è **6/10** - –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç –ö–†–ò–¢–ò–ß–ï–°–ö–û–ô –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### 6.2 –ü—Ä–∏–æ—Ä–∏—Ç–µ–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π

#### –≠–¢–ê–ü 1: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (1 –Ω–µ–¥–µ–ª—è)

1. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–æ–ª–Ω–æ–π –æ—Ä–≥—Å—Ç—Ä—É–∫—Ç—É—Ä—ã** (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üî• –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô)
   - –ó–∞–º–µ–Ω–∏—Ç—å `_get_organization_structure_with_target()` –Ω–∞ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é
   - **–≠—Ñ—Ñ–µ–∫—Ç**: –°–Ω–∏–∂–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ —Å 158K –¥–æ 57K (64% —ç–∫–æ–Ω–æ–º–∏—è)
   - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π**: Backend —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
   - **–û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏**: 2-3 –¥–Ω—è

2. **–°–æ–∑–¥–∞–Ω–∏–µ generic KPI fallback** (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üî• –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô)
   - –°–æ–∑–¥–∞—Ç—å `KPI_generic.md` —Å –æ–±—â–∏–º–∏ –ø–æ–∫–∞–∑–∞—Ç–µ–ª—è–º–∏
   - –û–±–Ω–æ–≤–∏—Ç—å fallback –≤ `KPIMapper`
   - **–≠—Ñ—Ñ–µ–∫—Ç**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö KPI –¥–ª—è 558 –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–æ–≤
   - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π**: HR –∞–Ω–∞–ª–∏—Ç–∏–∫ + Backend —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
   - **–û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏**: 1-2 –¥–Ω—è

3. **–°–∂–∞—Ç–∏–µ –∫–∞—Ä—Ç—ã –∫–æ–º–ø–∞–Ω–∏–∏** (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üü† –í–´–°–û–ö–ò–ô)
   - –°–æ–∑–¥–∞—Ç—å —Å–∂–∞—Ç—É—é –≤–µ—Ä—Å–∏—é (10-15K —Ç–æ–∫–µ–Ω–æ–≤ –≤–º–µ—Å—Ç–æ 51K)
   - **–≠—Ñ—Ñ–µ–∫—Ç**: –°–Ω–∏–∂–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ –µ—â–µ –Ω–∞ 36K (–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ 23%)
   - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π**: Content –º–µ–Ω–µ–¥–∂–µ—Ä + Backend —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
   - **–û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏**: 2 –¥–Ω—è

**–ò–¢–û–ì–û –≠–¢–ê–ü 1**: –°–Ω–∏–∂–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ —Å 158K –¥–æ ~27K (**83% —ç–∫–æ–Ω–æ–º–∏—è**)

#### –≠–¢–ê–ü 2: –í–∞–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (2-3 –Ω–µ–¥–µ–ª–∏)

4. **–£—Å–ª–æ–≤–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ IT —Å–∏—Å—Ç–µ–º** (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üü† –í–´–°–û–ö–ò–ô)
   - –ó–∞–≥—Ä—É–∂–∞—Ç—å —Ç–æ–ª—å–∫–æ –¥–ª—è IT –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–æ–≤
   - **–≠—Ñ—Ñ–µ–∫—Ç**: –≠–∫–æ–Ω–æ–º–∏—è 4.5K —Ç–æ–∫–µ–Ω–æ–≤ –¥–ª—è 90% –ø–æ–∑–∏—Ü–∏–π
   - **–û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏**: 1 –¥–µ–Ω—å

5. **–£–¥–∞–ª–µ–Ω–∏–µ –¥—É–±–ª–∏–∫–∞—Ç–∞ KPI** (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üü° –°–†–ï–î–ù–ò–ô)
   - –£–¥–∞–ª–∏—Ç—å `KPI_DIT.md`, –æ—Å—Ç–∞–≤–∏—Ç—å `KPI_–î–ò–¢.md`
   - **–≠—Ñ—Ñ–µ–∫—Ç**: –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏
   - **–û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏**: 0.5 –¥–Ω—è

6. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ KPI –º–∞–ø–ø–∏–Ω–≥–∞** (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üü° –°–†–ï–î–ù–ò–ô)
   - –î–æ–±–∞–≤–∏—Ç—å –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
   - **–≠—Ñ—Ñ–µ–∫—Ç**: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –º–∞–ø–ø–∏–Ω–≥–∞
   - **–û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏**: 0.5 –¥–Ω—è

7. **Unit-—Ç–µ—Å—Ç—ã –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏** (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üü° –°–†–ï–î–ù–ò–ô)
   - –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏
   - **–≠—Ñ—Ñ–µ–∫—Ç**: –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ —Ä–µ–≥—Ä–µ—Å—Å–∏–π
   - **–û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏**: 2 –¥–Ω—è

#### –≠–¢–ê–ü 3: –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (1-3 –º–µ—Å—è—Ü–∞)

8. **–°–æ–∑–¥–∞–Ω–∏–µ KPI —Ñ–∞–π–ª–æ–≤ –¥–ª—è —Ç–æ–ø-20 –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–æ–≤** (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üü† –í–´–°–û–ö–ò–ô)
   - –ü–æ–∫—Ä—ã—Ç–∏–µ 80% —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–º–∏ KPI
   - **–≠—Ñ—Ñ–µ–∫—Ç**: –ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞ –ø—Ä–æ—Ñ–∏–ª–µ–π
   - **–û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏**: 4-6 –Ω–µ–¥–µ–ª—å

9. **–£–ª—É—á—à–µ–Ω–∏–µ –∞–ª–≥–æ—Ä–∏—Ç–º–∞ calculate_subordinates_count** (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üü° –°–†–ï–î–ù–ò–ô)
   - –£—á–µ—Ç —Ç–∏–ø–∞ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞
   - **–≠—Ñ—Ñ–µ–∫—Ç**: –ë–æ–ª–µ–µ —Ç–æ—á–Ω—ã–π —Ä–∞—Å—á–µ—Ç –ø–æ–¥—á–∏–Ω–µ–Ω–Ω—ã—Ö
   - **–û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏**: 1 –Ω–µ–¥–µ–ª—è

10. **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞** (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üü¢ –ù–ò–ó–ö–ò–ô)
    - –£–º–Ω—ã–π –≤—ã–±–æ—Ä –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –ø–æ —É—Ä–æ–≤–Ω—é –ø–æ–∑–∏—Ü–∏–∏
    - **–≠—Ñ—Ñ–µ–∫—Ç**: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
    - **–û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏**: 2 –Ω–µ–¥–µ–ª–∏

### 6.3 –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ**:
- Input —Ç–æ–∫–µ–Ω—ã: 158,000
- –°—Ç–æ–∏–º–æ—Å—Ç—å: $0.00522 –∑–∞ –ø—Ä–æ—Ñ–∏–ª—å
- –í—Ä–µ–º—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏: ~15-20 —Å–µ–∫—É–Ω–¥
- –ö–∞—á–µ—Å—Ç–≤–æ: 6/10 (–∏–∑–±—ã—Ç–æ—á–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç, –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ KPI)

**–ü–æ—Å–ª–µ –≠–¢–ê–ü–ê 1** (1 –Ω–µ–¥–µ–ª—è):
- Input —Ç–æ–∫–µ–Ω—ã: 27,000 (**83% —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ**)
- –°—Ç–æ–∏–º–æ—Å—Ç—å: $0.00129 –∑–∞ –ø—Ä–æ—Ñ–∏–ª—å (**75% —ç–∫–æ–Ω–æ–º–∏—è**)
- –í—Ä–µ–º—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏: ~5-7 —Å–µ–∫—É–Ω–¥ (**67% —É—Å–∫–æ—Ä–µ–Ω–∏–µ**)
- –ö–∞—á–µ—Å—Ç–≤–æ: 8/10 (—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç, –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ generic KPI)

**–ü–æ—Å–ª–µ –≠–¢–ê–ü–ê 2** (1 –º–µ—Å—è—Ü):
- Input —Ç–æ–∫–µ–Ω—ã: 25,000 (**84% —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ**)
- –°—Ç–æ–∏–º–æ—Å—Ç—å: $0.00123 –∑–∞ –ø—Ä–æ—Ñ–∏–ª—å (**76% —ç–∫–æ–Ω–æ–º–∏—è**)
- –í—Ä–µ–º—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏: ~5-7 —Å–µ–∫—É–Ω–¥
- –ö–∞—á–µ—Å—Ç–≤–æ: 8.5/10 (+ –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å, + –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥)

**–ü–æ—Å–ª–µ –≠–¢–ê–ü–ê 3** (3 –º–µ—Å—è—Ü–∞):
- Input —Ç–æ–∫–µ–Ω—ã: 25,000
- –°—Ç–æ–∏–º–æ—Å—Ç—å: $0.00123 –∑–∞ –ø—Ä–æ—Ñ–∏–ª—å
- –í—Ä–µ–º—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏: ~5-7 —Å–µ–∫—É–Ω–¥
- –ö–∞—á–µ—Å—Ç–≤–æ: 9/10 (—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ KPI –¥–ª—è 80% —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤)

### 6.4 ROI –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

**–ü—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ 1000 –ø—Ä–æ—Ñ–∏–ª–µ–π**:

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ | –ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ | –≠–∫–æ–Ω–æ–º–∏—è |
|---------|----------------|-------------------|----------|
| –û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å | $5.22 | $1.23 | **$3.99 (76%)** |
| –û–±—â–µ–µ –≤—Ä–µ–º—è | 4.6 —á–∞—Å–∞ | 1.4 —á–∞—Å–∞ | **3.2 —á–∞—Å–∞ (69%)** |
| –ö–∞—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Ñ–∏–ª–µ–π | 6/10 | 9/10 | **+50%** |

**–í–´–í–û–î**: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –æ–∫—É–ø–∏—Ç—Å—è —É–∂–µ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ **100 –ø—Ä–æ—Ñ–∏–ª–µ–π**.

---

## –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ A: –ü—Ä–∏–º–µ—Ä—ã –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π

**A.1 –¢–æ–ø-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç** (–ì–µ–Ω–µ—Ä–∞–ª—å–Ω—ã–π –¥–∏—Ä–µ–∫—Ç–æ—Ä):
```
–ù—É–∂–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç:
- –ü–æ–ª–Ω–∞—è –∫–∞—Ä—Ç–∞ –∫–æ–º–ø–∞–Ω–∏–∏ (51K —Ç–æ–∫–µ–Ω–æ–≤) ‚úÖ
- –®–∏—Ä–æ–∫–∞—è –æ—Ä–≥—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (20K —Ç–æ–∫–µ–Ω–æ–≤) ‚úÖ
- –ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ KPI (5K —Ç–æ–∫–µ–Ω–æ–≤) ‚úÖ
- –°—Ç—Ä–∞—Ç–µ–≥–∏—è –∫–æ–º–ø–∞–Ω–∏–∏ (10K —Ç–æ–∫–µ–Ω–æ–≤) ‚úÖ

–ò–¢–û–ì–û: ~86K —Ç–æ–∫–µ–Ω–æ–≤
```

**A.2 –°—Ä–µ–¥–Ω–∏–π –º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç** (–†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è):
```
–ù—É–∂–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç:
- –°–∂–∞—Ç–∞—è –∫–∞—Ä—Ç–∞ –∫–æ–º–ø–∞–Ω–∏–∏ (10K —Ç–æ–∫–µ–Ω–æ–≤) ‚úÖ
- –†–µ–ª–µ–≤–∞–Ω—Ç–Ω–∞—è –æ—Ä–≥—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (10K —Ç–æ–∫–µ–Ω–æ–≤) ‚úÖ
- KPI –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞ (5-13K —Ç–æ–∫–µ–Ω–æ–≤) ‚úÖ
- IT —Å–∏—Å—Ç–µ–º—ã (–µ—Å–ª–∏ IT –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç) (0-4.5K —Ç–æ–∫–µ–Ω–æ–≤) ‚ö†Ô∏è

–ò–¢–û–ì–û: ~25-37K —Ç–æ–∫–µ–Ω–æ–≤
```

**A.3 –°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—ã** (–ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä —Ä–µ—à–µ–Ω–∏–π):
```
–ù—É–∂–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç:
- Essentials –∫–∞—Ä—Ç—ã –∫–æ–º–ø–∞–Ω–∏–∏ (5K —Ç–æ–∫–µ–Ω–æ–≤) ‚úÖ
- –£–∑–∫–∞—è –æ—Ä–≥—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (5K —Ç–æ–∫–µ–Ω–æ–≤) ‚úÖ
- KPI –ø–æ–∑–∏—Ü–∏–∏ (5-13K —Ç–æ–∫–µ–Ω–æ–≤) ‚úÖ
- IT —Å–∏—Å—Ç–µ–º—ã (–¥–ª—è IT —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤) (4.5K —Ç–æ–∫–µ–Ω–æ–≤) ‚úÖ
- –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è (3K —Ç–æ–∫–µ–Ω–æ–≤) ‚úÖ

–ò–¢–û–ì–û: ~22-30K —Ç–æ–∫–µ–Ω–æ–≤
```

### –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ B: –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –º–µ—Ç–æ–¥–æ–≤ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –æ—Ä–≥—Å—Ç—Ä—É–∫—Ç—É—Ä—ã

**B.1 –¢–µ–∫—É—â–∏–π –º–µ—Ç–æ–¥** (_get_organization_structure_with_target):
```json
{
  "total_business_units": 567,
  "size_bytes": 364544,
  "tokens_estimate": 101000,
  "relevant_units": 1,
  "irrelevant_units": 566,
  "relevance_ratio": 0.18%
}
```

**B.2 –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–µ—Ç–æ–¥** (_get_relevant_org_structure_optimized):
```json
{
  "total_business_units": 15,
  "size_bytes": 18000,
  "tokens_estimate": 5000,
  "parent_chain": 3,
  "siblings": 5,
  "children": 7,
  "relevance_ratio": 100%,
  "reduction": "95%"
}
```

### –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ C: –ö–∞—Ä—Ç–∞ –ø–æ–∫—Ä—ã—Ç–∏—è KPI –ø–æ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞–º

**C.1 –î–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç—ã —Å KPI —Ñ–∞–π–ª–∞–º–∏** (9 –∏–∑ 567):
```
1. –î–ò–¢ (KPI_–î–ò–¢.md) - 150 —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
2. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –±–ª–æ–∫ (KPI_–ê–°.md) - 30 —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
3. –î–ü–£ (KPI_–î–ü–£.md) - 80 —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
4. –î–†–† (KPI_–î–†–†.md) - 120 —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
5. –ó–∞–∫—É–ø–∫–∏ (KPI_–ó–∞–∫—É–ø–∫–∏.md) - 50 —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
6. –ü–†–ü (KPI_–ü–†–ü.md) - 60 —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
7. –£–í–ê–∏–ö (KPI_–£–í–ê–∏–ö.md) - 40 —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
8. –¶–∏—Ñ—Ä–∞ (KPI_–¶–∏—Ñ—Ä–∞.md) - 25 —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤

–ò–¢–û–ì–û: ~555 —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ (~13% –æ—Ç –≤—Å–µ—Ö)
```

**C.2 –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è KPI** (—Ç–æ–ø-10 –ø–æ —á–∏—Å–ª–µ–Ω–Ω–æ—Å—Ç–∏):
```
1. –ö–æ–º–º–µ—Ä—á–µ—Å–∫–∏–π –±–ª–æ–∫ - 425 —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ ‚ùå
2. –ë–ª–æ–∫ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–∞ - 350 —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ ‚ùå
3. –ë–ª–æ–∫ —Ä–∞–∑–≤–∏—Ç–∏—è - 280 —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ ‚ùå
4. –§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –±–ª–æ–∫ - 200 —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ ‚ùå
5. –î–ò–¢ - 150 —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ ‚úÖ
6. –Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏–π –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç - 140 —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ ‚ùå
7. –î–†–† - 120 —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ ‚úÖ
8. –î–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç –∑–∞–∫—É–ø–æ–∫ - 100 —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ ‚ö†Ô∏è (—á–∞—Å—Ç–∏—á–Ω–æ)
9. –î–ü–£ - 80 —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ ‚úÖ
10. HR –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç - 60 —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ ‚úÖ

–ü–û–ö–†–´–¢–ò–ï: 4/10 –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–æ–≤ = 40%
–ü–û–ö–†–´–¢–ò–ï –ü–û –ß–ò–°–õ–ï–ù–ù–û–°–¢–ò: 410/1905 = 21.5%
```

---

**–ö–æ–Ω–µ—Ü –æ—Ç—á–µ—Ç–∞**

**–ü–æ–¥–≥–æ—Ç–æ–≤–∏–ª**: Claude (AI Assistant)
**–î–∞—Ç–∞**: 2025-10-25
**–í–µ—Ä—Å–∏—è**: 1.0
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ì–û–¢–û–í –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ
