# üèóÔ∏è **–ê–†–•–ò–¢–ï–ö–¢–£–†–ê –°–ò–°–¢–ï–ú–´ –ì–ï–ù–ï–†–ê–¶–ò–ò –ü–†–û–§–ò–õ–ï–ô –î–û–õ–ñ–ù–û–°–¢–ï–ô**

## üìã **–û–ë–ó–û–† –°–ò–°–¢–ï–ú–´**

**–¶–µ–ª—å:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–æ—Ñ–∏–ª–µ–π –¥–æ–ª–∂–Ω–æ—Å—Ç–µ–π –¥–ª—è –∫–æ–º–ø–∞–Ω–∏–∏ –ê101 —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º AI

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫:**
- üé® **Frontend:** NiceGUI (Material Design)
- ‚ö° **Backend:** FastAPI (REST API)
- ü§ñ **LLM:** Gemini 2.5 Flash —á–µ—Ä–µ–∑ OpenRouter API
- üóÑÔ∏è **Database:** SQLite
- üìä **Monitoring:** Langfuse
- üè† **Deployment:** VPS (–¥–æ 10 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)

## üèõÔ∏è **–í–´–°–û–ö–û–£–†–û–í–ù–ï–í–ê–Ø –ê–†–•–ò–¢–ï–ö–¢–£–†–ê**

```
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚îÇ              üåê VPS Environment                ‚îÇ
                    ‚îÇ                                                 ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ    HTTP/REST    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê             ‚îÇ
‚îÇ   NiceGUI UI    ‚îÇ ‚îÇ ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ ‚îÇ   FastAPI       ‚îÇ             ‚îÇ
‚îÇ   (Frontend)    ‚îÇ ‚îÇ                  ‚îÇ   (Backend)     ‚îÇ             ‚îÇ
‚îÇ   Port: 8033    ‚îÇ ‚îÇ                  ‚îÇ   Port: 8022    ‚îÇ             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ                  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò             ‚îÇ
                    ‚îÇ                            ‚îÇ                     ‚îÇ
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ           ‚îÇ                  ‚îÇ         ‚îÇ         ‚îÇ           ‚îÇ     ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ     ‚îÇ
‚îÇ Nginx Reverse ‚îÇ   ‚îÇ         ‚îÇ     üß† Backend Core Layers      ‚îÇ     ‚îÇ     ‚îÇ
‚îÇ    Proxy      ‚îÇ   ‚îÇ         ‚îÇ                                 ‚îÇ     ‚îÇ     ‚îÇ
‚îÇ   Port: 8033  ‚îÇ   ‚îÇ         ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ     ‚îÇ     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ         ‚îÇ  ‚îÇ    ProfileGenerator     ‚îÇ    ‚îÇ     ‚îÇ     ‚îÇ
                    ‚îÇ         ‚îÇ  ‚îÇ   (Main Orchestrator)   ‚îÇ    ‚îÇ     ‚îÇ     ‚îÇ
                    ‚îÇ         ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ     ‚îÇ     ‚îÇ
                    ‚îÇ         ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ     ‚îÇ     ‚îÇ
                    ‚îÇ         ‚îÇ  ‚îÇ     DataLoader          ‚îÇ    ‚îÇ     ‚îÇ     ‚îÇ
                    ‚îÇ         ‚îÇ  ‚îÇ  (Deterministic Logic)  ‚îÇ    ‚îÇ     ‚îÇ     ‚îÇ
                    ‚îÇ         ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ     ‚îÇ     ‚îÇ
                    ‚îÇ         ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ     ‚îÇ     ‚îÇ
                    ‚îÇ         ‚îÇ  ‚îÇ   OrganizationMapper    ‚îÇ    ‚îÇ     ‚îÇ     ‚îÇ
                    ‚îÇ         ‚îÇ  ‚îÇ      KPIMapper          ‚îÇ    ‚îÇ     ‚îÇ     ‚îÇ
                    ‚îÇ         ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ     ‚îÇ     ‚îÇ
                    ‚îÇ         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ     ‚îÇ
                    ‚îÇ                            ‚îÇ                     ‚îÇ     ‚îÇ
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
        ‚îÇ           ‚îÇ                            ‚îÇ                     ‚îÇ     ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ   SQLite DB   ‚îÇ   ‚îÇ         ‚îÇ  OpenRouter API   ‚îÇ    ‚îÇ   Langfuse    ‚îÇ   ‚îÇ ‚îÇ
‚îÇ  (Profiles)   ‚îÇ   ‚îÇ         ‚îÇ   (Gemini LLM)    ‚îÇ    ‚îÇ  (Monitoring, ‚îÇ   ‚îÇ ‚îÇ
‚îÇ  - profiles   ‚îÇ   ‚îÇ         ‚îÇ                   ‚îÇ    ‚îÇ   Prompts)    ‚îÇ   ‚îÇ ‚îÇ
‚îÇ  - history    ‚îÇ   ‚îÇ         ‚îÇ  Model: gemini-   ‚îÇ    ‚îÇ               ‚îÇ   ‚îÇ ‚îÇ
‚îÇ  - cache      ‚îÇ   ‚îÇ         ‚îÇ  2.5-flash        ‚îÇ    ‚îÇ  - Traces     ‚îÇ   ‚îÇ ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ         ‚îÇ                   ‚îÇ    ‚îÇ  - Metrics    ‚îÇ   ‚îÇ ‚îÇ
                    ‚îÇ         ‚îÇ  Context: 1M tok  ‚îÇ    ‚îÇ  - Prompts    ‚îÇ   ‚îÇ ‚îÇ
                    ‚îÇ         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
                    ‚îÇ                                                  ‚îÇ     ‚îÇ
                    ‚îÇ  üìÅ File Storage                                 ‚îÇ     ‚îÇ
                    ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ     ‚îÇ
                    ‚îÇ  ‚îÇ  /storage/                                  ‚îÇ ‚îÇ     ‚îÇ
                    ‚îÇ  ‚îÇ  ‚îú‚îÄ‚îÄ profiles/  (Generated JSON/MD)         ‚îÇ ‚îÇ     ‚îÇ
                    ‚îÇ  ‚îÇ  ‚îú‚îÄ‚îÄ data/      (Company Data)              ‚îÇ ‚îÇ     ‚îÇ
                    ‚îÇ  ‚îÇ  ‚îÇ   ‚îú‚îÄ‚îÄ structure.json                    ‚îÇ ‚îÇ     ‚îÇ
                    ‚îÇ  ‚îÇ  ‚îÇ   ‚îú‚îÄ‚îÄ kpi/*.md                          ‚îÇ ‚îÇ     ‚îÇ
                    ‚îÇ  ‚îÇ  ‚îÇ   ‚îî‚îÄ‚îÄ it_systems/*.md                   ‚îÇ ‚îÇ     ‚îÇ
                    ‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ templates/ (Schemas & Examples)       ‚îÇ ‚îÇ     ‚îÇ
                    ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ     ‚îÇ
                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ
                                                                            ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                    üîå External Services                                 ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                         ‚îÇ
‚îÇ  üåç OpenRouter API                    üìä Langfuse Cloud                ‚îÇ
‚îÇ  - Authentication                     - Trace Management                ‚îÇ
‚îÇ  - Model Selection                    - Prompt Versioning               ‚îÇ
‚îÇ  - Rate Limiting                      - Analytics Dashboard             ‚îÇ
‚îÇ  - Cost Optimization                  - A/B Testing                     ‚îÇ
‚îÇ                                                                         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### **üîÑ –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö:**

```
[–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å] ‚Üí[Nginx:80] ‚Üí [NiceGUI:8033] ‚Üí [FastAPI:8022]
                                                        ‚Üì
[DataLoader] ‚Üê [ProfileGenerator] ‚Üí [LangfuseService] ‚Üí [OpenRouter]
     ‚Üì                                    ‚Üì                 ‚Üì
[Company Data] ‚Üí [Langfuse Variables] ‚Üí [Prompt+Context] ‚Üí [Gemini 2.5]
                                                                ‚Üì
[SQLite] ‚Üê [Profile Validation] ‚Üê [JSON Parsing] ‚Üê [LLM Response]
    ‚Üì
[File Storage] ‚Üí [JSON/MD Export] ‚Üí [Frontend Display]
```

## üìÅ **–°–¢–†–£–ö–¢–£–†–ê –ü–†–û–ï–ö–¢–ê**

```
hr-profile-generator/
‚îú‚îÄ‚îÄ üì¶ backend/                    # FastAPI Backend
‚îÇ   ‚îú‚îÄ‚îÄ üöÄ main.py                # FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ üìä api/                   # API endpoints
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.py              # –ü—Ä–æ—Å—Ç–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ profiles.py          # CRUD –ø—Ä–æ—Ñ–∏–ª–µ–π
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ generation.py        # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–æ—Ñ–∏–ª–µ–π
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ catalog.py           # –ö–∞—Ç–∞–ª–æ–≥ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ üß† core/                  # –ë–∏–∑–Ω–µ—Å –ª–æ–≥–∏–∫–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models.py            # Pydantic –º–æ–¥–µ–ª–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ database.py          # SQLite –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ llm_client.py        # OpenRouter –∫–ª–∏–µ–Ω—Ç
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ profile_generator.py # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–æ—Ñ–∏–ª–µ–π
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ data_loader.py       # –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∫–æ–º–ø–∞–Ω–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ üîß services/             # –°–µ—Ä–≤–∏—Å–Ω—ã–µ –º–æ–¥—É–ª–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ langfuse_client.py   # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Langfuse + Prompt Management
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ file_storage.py      # –§–∞–π–ª–æ–≤–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ template_engine.py   # MD —à–∞–±–ª–æ–Ω—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ export_service.py    # –≠–∫—Å–ø–æ—Ä—Ç JSON/MD
‚îÇ   ‚îú‚îÄ‚îÄ üóÇÔ∏è storage/              # –§–∞–π–ª–æ–≤–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ profiles/           # –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ –î–ò–¢/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ –†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å_–æ—Ç–¥–µ–ª–∞_v1.json
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ –†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å_–æ—Ç–¥–µ–ª–∞_v1.md
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ –ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä_—Å–∏—Å—Ç–µ–º—ã_v2.json
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ –ö–æ–º–º–µ—Ä—á–µ—Å–∫–∏–π_–¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ data/               # –ò—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ structure.json
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ kpi/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ profiles_examples/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ templates/          # MD —à–∞–±–ª–æ–Ω—ã
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ profile_template.md
‚îÇ   ‚îú‚îÄ‚îÄ ‚öôÔ∏è config/               # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ settings.py         # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ prompts/            # LLM –ø—Ä–æ–º–ø—Ç—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ langfuse_config.py  # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
‚îÇ   ‚îî‚îÄ‚îÄ üóÉÔ∏è database.db          # SQLite –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ üé® frontend/                  # NiceGUI Frontend
‚îÇ   ‚îú‚îÄ‚îÄ üöÄ main.py               # NiceGUI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ üß© components/           # UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth_form.py        # –§–æ—Ä–º–∞ –≤—Ö–æ–¥–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ org_tree.py         # –î–µ—Ä–µ–≤–æ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ profile_form.py     # –§–æ—Ä–º–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ profile_viewer.py   # –ü—Ä–æ—Å–º–æ—Ç—Ä –ø—Ä–æ—Ñ–∏–ª—è
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ export_panel.py     # –ü–∞–Ω–µ–ª—å —ç–∫—Å–ø–æ—Ä—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ üîß services/            # Frontend —Å–µ—Ä–≤–∏—Å—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api_client.py       # –ö–ª–∏–µ–Ω—Ç –¥–ª—è FastAPI
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ui_helpers.py       # UI —É—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ üéØ assets/              # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ—Å—É—Ä—Å—ã
‚îÇ       ‚îú‚îÄ‚îÄ logo.png
‚îÇ       ‚îî‚îÄ‚îÄ styles.css
‚îú‚îÄ‚îÄ üß™ tests/                    # –¢–µ—Å—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ test_backend/
‚îÇ   ‚îî‚îÄ‚îÄ test_frontend/
‚îú‚îÄ‚îÄ üìö docs/                     # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ üê≥ docker/                   # Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile.backend
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile.frontend
‚îÇ   ‚îî‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ üìã requirements.txt          # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ üåç .env.example             # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îî‚îÄ‚îÄ üìñ README.md                # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## üóÑÔ∏è **–ë–ê–ó–ê –î–ê–ù–ù–´–• (SQLite)**

### **–¢–∞–±–ª–∏—Ü—ã:**

```sql
-- –ü—Ä–æ—Ñ–∏–ª–∏ –¥–æ–ª–∂–Ω–æ—Å—Ç–µ–π
CREATE TABLE profiles (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    position_title VARCHAR(255) NOT NULL,
    department_path VARCHAR(500) NOT NULL,  -- "–î–ò–¢/–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã"
    version INTEGER DEFAULT 1,
    status VARCHAR(20) DEFAULT 'active',    -- active, archived
    json_data TEXT NOT NULL,               -- JSON –ø—Ä–æ—Ñ–∏–ª—è
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    created_by VARCHAR(100),
    langfuse_trace_id VARCHAR(255)         -- –°–≤—è–∑—å —Å Langfuse
);

-- –ò—Å—Ç–æ—Ä–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–π
CREATE TABLE generation_history (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    profile_id INTEGER REFERENCES profiles(id),
    prompt_version VARCHAR(50),
    model_used VARCHAR(100),
    generation_time_ms INTEGER,
    tokens_used INTEGER,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    langfuse_trace_id VARCHAR(255)
);

-- –ö—ç—à –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–æ–Ω–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
CREATE TABLE org_structure_cache (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    department_path VARCHAR(500) NOT NULL,
    position_title VARCHAR(255) NOT NULL,
    has_profile BOOLEAN DEFAULT FALSE,
    last_updated TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- –ò–Ω–¥–µ–∫—Å—ã
CREATE INDEX idx_profiles_department ON profiles(department_path);
CREATE INDEX idx_profiles_position ON profiles(position_title, version);
CREATE INDEX idx_org_cache_path ON org_structure_cache(department_path);
```

## üöÄ **API ENDPOINTS (FastAPI)**

### **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:**
```
POST /api/auth/login          # –ü—Ä–æ—Å—Ç–æ–π –ø–∞—Ä–æ–ª—å
POST /api/auth/logout         # –í—ã—Ö–æ–¥
```

### **–ö–∞—Ç–∞–ª–æ–≥ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏:**
```
GET  /api/catalog/structure   # –î–µ—Ä–µ–≤–æ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
GET  /api/catalog/department/{path}  # –ü–æ–∑–∏—Ü–∏–∏ –≤ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–µ
```

### **–ü—Ä–æ—Ñ–∏–ª–∏:**
```
GET    /api/profiles/                    # –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø—Ä–æ—Ñ–∏–ª–µ–π
GET    /api/profiles/{id}               # –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å
POST   /api/profiles/generate           # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è
PUT    /api/profiles/{id}/regenerate    # –ü–µ—Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è (–Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è)
DELETE /api/profiles/{id}               # –£–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
```

### **–≠–∫—Å–ø–æ—Ä—Ç:**
```
GET /api/export/profile/{id}/json      # JSON —ç–∫—Å–ø–æ—Ä—Ç
GET /api/export/profile/{id}/markdown  # MD —ç–∫—Å–ø–æ—Ä—Ç
POST /api/export/batch                 # Batch —ç–∫—Å–ø–æ—Ä—Ç (–±—É–¥—É—â–µ–µ)
```

### **–°–∏—Å—Ç–µ–º–∞:**
```
GET /api/health                        # Health check
GET /api/stats                         # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã
```

## ü§ñ **LLM –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø**

### **OpenRouter API Client:**
```python
# backend/core/llm_client.py
class OpenRouterClient:
    def __init__(self):
        self.api_key = settings.OPENROUTER_API_KEY
        self.base_url = –µ–¥–ø–æ–∏—Ç —Ö–∑—Ä–∞–Ω–∏—Ç—Å—è –≤ .env
        self.model = –º–æ–¥–µ–ª—å —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ langfuse.

    async def generate_profile(self, prompt: str, context: dict) -> dict:
        # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å OpenRouter API
        # Langfuse —Ç—Ä–µ–π—Å–∏–Ω–≥
        # –≤ langfuse —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è —Ç—Ä–µ–π—Å –∏ –º–µ—Ç—Ä–∏–∫–∏
        # –≤ langfus—É —Ö—Ä–∞–Ω–∏—Ç—Å—è –ø—Ä–æ–º–ø—Ç
        pass
```

### **–ü—Ä–æ–º–ø—Ç—ã (JSON –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è):**
```json
// backend/config/prompts/profile_generation.json
{
  "profile_generation": {
    "version": "1.0",
    "model": "google/gemini-2.5-flash",
    "temperature": 0.3,
    "max_tokens": 4000,
    "system_prompt": "–¢—ã HR —ç–∫—Å–ø–µ—Ä—Ç –∫–æ–º–ø–∞–Ω–∏–∏ –ê101...",
    "user_prompt_template": "–°–æ–∑–¥–∞–π –ø—Ä–æ—Ñ–∏–ª—å –¥–æ–ª–∂–Ω–æ—Å—Ç–∏ {position} –≤ {department}...",
    "parameters": {
      "structured_output": true,
      "json_schema": "job_profile_schema.json"
    }
  }
}
```

## üìä **LANGFUSE –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø**

### **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**
```python
# backend/services/langfuse_client.py
from langfuse import Langfuse

class LangfuseService:
    def __init__(self):
        self.client = Langfuse(
            secret_key="sk-lf-f9828023-7031-4e76-9db3-da1c9030cbe5",
            public_key="pk-lf-f4a9dfd3-f57a-4fa5-8d7b-3624748fdfc8",
            host="https://cloud.langfuse.com"
        )

    def trace_generation(self, profile_data: dict) -> str:
        # –°–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–µ–π—Å–∞ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø—Ä–æ—Ñ–∏–ª—è
        pass
```

## üîÑ **DATA FLOW**

### **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–æ—Ñ–∏–ª—è:**
```
[NiceGUI] ‚Üí POST /api/profiles/generate
    ‚Üì
[FastAPI] ‚Üí Validate request
    ‚Üì
[DataLoader] ‚Üí Load company data (structure.json, KPI, –∏ –≤—Å–æ –æ—Å—Ç–∞–ª—å–Ω–æ–µ –∏ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –≤ langfuse)
    ‚Üì
[PromptEngine] ‚Üí Build prompt with context
    ‚Üì
[OpenRouter] ‚Üí Call Gemini model
    ‚Üì
[Langfuse] ‚Üí Log trace & metrics
    ‚Üì
[Database] ‚Üí Save profile + version
    ‚Üì
[FileStorage] ‚Üí Save JSON + MD files
    ‚Üì
[Response] ‚Üí Return profile to frontend
```

### **–ö–∞—Ç–∞–ª–æ–≥ –ø—Ä–æ—Ñ–∏–ª–µ–π:**
```
[NiceGUI] ‚Üí GET /api/catalog/structure
    ‚Üì
[OrgStructure] ‚Üí Parse structure.json
    ‚Üì
[Database] ‚Üí Check existing profiles
    ‚Üì
[Response] ‚Üí Tree with generated/missing profiles
```

## üöÄ **DEPLOYMENT (VPS)**

### **Docker Compose:**
```yaml
version: '3.8'
services:
  backend:
    build: ./docker/Dockerfile.backend
    ports:
      - "8022:8000"
    environment:
      - DATABASE_URL=sqlite:///./database.db
      - OPENROUTER_API_KEY=${OPENROUTER_API_KEY}
      - OPENROUTER_BASE_URL=${OPENROUTER_BASE_URL}
      - LANGFUSE_SECRET_KEY=${LANGFUSE_SECRET_KEY}
      - LANGFUSE_PUBLIC_KEY=${LANGFUSE_PUBLIC_KEY}
      - LANGFUSE_HOST=${LANGFUSE_HOST}

    volumes:
      - ./storage:/app/storage

  frontend:
    build: ./docker/Dockerfile.frontend
    ports:
      - "8033:8080"
    depends_on:
      - backend
    environment:
      - BACKEND_URL=http://backend:8000
```

### **Nginx Configuration:**
```nginx
server {
    listen 80;
    server_name your-domain.com;

    location / {
        proxy_pass http://localhost:8080;  # NiceGUI
    }

    location /api {
        proxy_pass http://localhost:8000;  # FastAPI
    }
}
```

## üîß **–ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø**

### **Environment Variables:**
```env
# .env
OPENROUTER_API_KEY=your_openrouter_key
OPENROUTER_BASE_URL=https://openrouter.ai/api/v1
LANGFUSE_SECRET_KEY=sk-lf-f9828023-7031-4e76-9db3-da1c9030cbe5
LANGFUSE_PUBLIC_KEY=pk-lf-f4a9dfd3-f57a-4fa5-8d7b-3624748fdfc8
LANGFUSE_HOST=https://cloud.langfuse.com
DATABASE_URL=sqlite:///./database.db
AUTH_PASSWORD=your_simple_password
DEBUG=true # –¥–ª—è –¥–µ–±–∞–≥–∞
```

## üìà **–ú–ê–°–®–¢–ê–ë–ò–†–£–ï–ú–û–°–¢–¨**

### **–ë—É–¥—É—â–∏–µ –º–æ–¥—É–ª–∏:**
1. **Excel Export** - —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π —ç–∫—Å–ø–æ—Ä—Ç
2. **Data Pipeline Module** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å—ã—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö
3. **Batch Generation Service** - –º–∞—Å—Å–æ–≤–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–æ—Ñ–∏–ª–µ–π
4. **Advanced Auth** - —Ä–æ–ª–∏ –∏ –ø—Ä–∞–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
5. **API Integrations** - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏


## üéØ **MVP SCOPE**

### **–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤ MVP:**
- ‚úÖ NiceGUI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å –∫–∞—Ç–∞–ª–æ–≥–æ–º
- ‚úÖ FastAPI backend —Å SQLite
- ‚úÖ Gemini –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ OpenRouter
- ‚úÖ Langfuse –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–∞–º–∏
- ‚úÖ JSON/MD —ç–∫—Å–ø–æ—Ä—Ç
- ‚úÖ –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª–µ–π
- ‚úÖ –ü—Ä–æ—Å—Ç–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

### **–ü–æ—Å–ª–µ MVP:**
- üìä Excel —ç–∫—Å–ø–æ—Ä—Ç
- üîÑ Batch –≥–µ–Ω–µ—Ä–∞—Ü–∏—è
- üìÅ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
- üë• –†–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- üé® Admin –ø–∞–Ω–µ–ª—å

## üöÄ **–î–û–ü–û–õ–ù–ï–ù–ò–Ø –ü–û–°–õ–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô**

### **DataLoader –¥–ª—è Langfuse Variables:**
```python
# backend/core/data_loader.py
class DataLoader:
    def prepare_langfuse_variables(self, department: str, position: str) -> dict:
        """–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –≤ Langfuse variables"""
        return {
            "company_data": self.load_company_map(),           # –ö–∞—Ä—Ç–∞ –∫–æ–º–ø–∞–Ω–∏–∏ –ê101
            "kpi_data": self.load_kpi_for_department(department), # –†–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ KPI
            "profile_template": self.load_profile_template(),  # –ü—Ä–æ—Ñ–∏–ª—å –¥–æ–ª–∂–Ω–æ—Å—Ç–∏
            "org_structure": self.load_org_structure(),       # –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–æ–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
            "position": position,                              # –¶–µ–ª–µ–≤–∞—è –¥–æ–ª–∂–Ω–æ—Å—Ç—å
            "department": department,                          # –î–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç
            "it_systems": self.load_relevant_it_systems(department) # IT —Å–∏—Å—Ç–µ–º—ã
        }
```

### **–û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ Langfuse –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:**
```python
# backend/services/langfuse_client.py
class LangfuseService:
    async def generate_with_prompt(self, prompt_name: str, variables: dict) -> dict:
        """–ü–æ–ª–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å Langfuse Prompt Management"""

        # 1. –ü–æ–ª—É—á–∞–µ–º –ø—Ä–æ–º–ø—Ç –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
        prompt_config = await self.get_prompt_config(prompt_name)

        # 2. –°–æ–∑–¥–∞–µ–º —Ç—Ä–µ–π—Å
        trace_id = self.trace_generation(variables, prompt_name)

        # 3. –í—ã–∑—ã–≤–∞–µ–º OpenRouter —Å –ø–æ–ª–Ω—ã–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º (1M —Ç–æ–∫–µ–Ω–æ–≤)
        result = await self.call_openrouter(
            prompt=prompt_config["prompt"],
            variables=variables,
            config=prompt_config["config"],
            trace_id=trace_id
        )

        return result
```

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏! üöÄ**

**–í—Å–µ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã:**
- ‚úÖ Langfuse Prompt Management —Å —Å–∞–º–æ–≥–æ –Ω–∞—á–∞–ª–∞
- ‚úÖ –ú–æ–¥–µ–ª—å: google/gemini-2.5-flash
- ‚úÖ –ö–æ–Ω—Ç–µ–∫—Å—Ç 1M —Ç–æ–∫–µ–Ω–æ–≤ —É—á—Ç–µ–Ω (max_tokens: 8000)
- ‚úÖ –£–±—Ä–∞–Ω—ã JSON —Ñ–∞–π–ª—ã –ø—Ä–æ–º–ø—Ç–æ–≤
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –æ–ø–µ—á–∞—Ç–∫–∏ –≤ –∫–æ–¥–µ
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ variables –¥–ª—è Langfuse
