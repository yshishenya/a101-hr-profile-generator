# üèóÔ∏è **–ê–†–•–ò–¢–ï–ö–¢–£–†–ê –°–ò–°–¢–ï–ú–´ –ì–ï–ù–ï–†–ê–¶–ò–ò –ü–†–û–§–ò–õ–ï–ô –î–û–õ–ñ–ù–û–°–¢–ï–ô A101 HR**

## üìã **–û–ë–ó–û–† –°–ò–°–¢–ï–ú–´**

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¥–µ—Ç–∞–ª—å–Ω—ã—Ö –ø—Ä–æ—Ñ–∏–ª–µ–π –¥–æ–ª–∂–Ω–æ—Å—Ç–µ–π –¥–ª—è –∫–æ–º–ø–∞–Ω–∏–∏ –ê101 —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ò–ò –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π –¥–∞–Ω–Ω—ã—Ö –æ —á–∏—Å–ª–µ–Ω–Ω–æ—Å—Ç–∏ —à—Ç–∞—Ç–∞

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫:**
- üé® **Frontend:** NiceGUI (Material Design) - –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
- ‚ö° **Backend:** FastAPI (REST API) 
- ü§ñ **LLM:** Google Gemini 2.5 Flash —á–µ—Ä–µ–∑ OpenRouter API
- üìä **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:** Langfuse (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- üóÑÔ∏è **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** SQLite 
- üìÇ **–•—Ä–∞–Ω–µ–Ω–∏–µ:** –ò–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∞—è —Ñ–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞
- üê≥ **–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ:** Docker Compose

## üèõÔ∏è **–ê–†–•–ò–¢–ï–ö–¢–£–†–ê –°–ò–°–¢–ï–ú–´**

```mermaid
graph TB
    subgraph "üåê Client Layer"
        UI[NiceGUI Frontend<br/>Port: 8033]
        WEB[Web Browser]
    end

    subgraph "üîÑ API Layer"
        MAIN[main.py<br/>FastAPI App<br/>Port: 8022]
        AUTH[auth.py<br/>JWT Authentication]
        GEN[generation.py<br/>Profile Generation]
        PROF[profiles.py<br/>Profile CRUD]
        CAT[catalog.py<br/>Department Catalog]
        ORG[organization.py<br/>Organization Structure]
        DASH[dashboard.py<br/>System Statistics]
    end

    subgraph "üß† Core Business Logic + Domain Services"
        PG[ProfileGenerator<br/>Main Orchestrator]
        LLC[LLMClient<br/>OpenRouter Integration]
        PM[PromptManager<br/>Prompt Templates]
        DL[DataLoader<br/>Company Data + Catalog Logic]
        DM[DataMapper<br/>Deterministic Mapping]
        OC[OrganizationCache<br/>Centralized Caching]
        MS[MarkdownService<br/>MD Export]
        SS[StorageService<br/>File Management]
        INT[Interfaces<br/>DI Abstractions]
    end

    subgraph "üîß Infrastructure Services"
        AS[AuthService<br/>User Management + AuthInterface]
        CS[CatalogService<br/>Thin API Wrapper]
    end

    subgraph "üõ†Ô∏è Utils Layer"
        PU[PositionUtils<br/>Centralized Position Logic]
    end

    subgraph "üíæ Data Layer"
        DB[(SQLite Database<br/>profiles, users, sessions)]
        FILES[üìÅ Hierarchical File Storage<br/>JSON + MD Files]
        CACHE[üóÉÔ∏è Memory Cache<br/>Organization Structure]
        COMPANY[üìä Company Data<br/>JSON + MD Files]
    end

    subgraph "üåç External Services"
        OR[OpenRouter API<br/>Gemini 2.5 Flash]
        LF[Langfuse<br/>Optional Monitoring]
    end

    %% Connections
    WEB --> UI
    UI --> MAIN
    
    MAIN --> AUTH
    MAIN --> GEN
    MAIN --> PROF
    MAIN --> CAT
    MAIN --> ORG
    MAIN --> DASH

    GEN --> PG
    PROF --> SS
    CAT --> CS
    ORG --> CS
    AUTH --> AS

    PG --> LLC
    PG --> PM
    PG --> DL
    PG --> DM
    PG --> MS
    PG --> SS
    CS --> DL
    SS --> FILES
    SS --> OC
    AS --> INT
    
    CS --> PU
    DL --> PU

    LLC --> OR
    LLC --> LF
    DL --> COMPANY
    OC --> CACHE
    
    AS --> DB
    PSS --> DB
    PG --> DB

    style UI fill:#e1f5fe
    style MAIN fill:#f3e5f5
    style PG fill:#e8f5e8
    style DB fill:#fff3e0
    style OR fill:#fce4ec
```

## üìÅ **–°–¢–†–£–ö–¢–£–†–ê –ü–†–û–ï–ö–¢–ê (–†–ï–ê–õ–¨–ù–ê–Ø)**

```
A101-HR/
‚îú‚îÄ‚îÄ üì¶ backend/                     # FastAPI Backend
‚îÇ   ‚îú‚îÄ‚îÄ üöÄ main.py                 # FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (—Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞)
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ üìä api/                    # API Endpoints
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.py               # –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ JWT
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ generation.py         # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–æ—Ñ–∏–ª–µ–π
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ profiles.py           # CRUD –ø—Ä–æ—Ñ–∏–ª–µ–π
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ catalog.py            # –ö–∞—Ç–∞–ª–æ–≥ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–æ–≤ (legacy)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ organization.py       # –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–æ–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (–Ω–æ–≤–æ–µ)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ dashboard.py          # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ üß† core/                   # ‚úÖ –†–ê–°–®–ò–†–ï–ù–û: –Ø–¥—Ä–æ —Å–∏—Å—Ç–µ–º—ã + Domain Services
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config.py             # ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ data_loader.py        # ‚úÖ –ó–∞–≥—Ä—É–∑—á–∏–∫ —Å –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –∫–∞—Ç–∞–ª–æ–≥–∏–∑–∞—Ü–∏–µ–π
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ data_mapper.py        # –î–µ—Ç–µ—Ä–º–∏–Ω–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–∞–ø–ø–∏–Ω–≥–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ organization_cache.py # –ö–µ—à –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–æ–Ω–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ profile_generator.py  # –ì–ª–∞–≤–Ω—ã–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ø—Ä–æ—Ñ–∏–ª–µ–π
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ llm_client.py         # –ö–ª–∏–µ–Ω—Ç OpenRouter/Gemini
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ prompt_manager.py     # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–∞–º–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ interfaces.py         # ‚úÖ –ù–û–í–û–ï: –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –¥–ª—è DI
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ markdown_service.py   # ‚úÖ –ü–ï–†–ï–ú–ï–©–ï–ù–û: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è MD (–±—ã–≤—à. services)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ storage_service.py    # ‚úÖ –ü–ï–†–ï–ú–ï–©–ï–ù–û: –•—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ (–±—ã–≤—à. services)
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ üîß services/              # ‚úÖ –û–ß–ò–©–ï–ù–û: –¢–æ–ª—å–∫–æ Infrastructure Services
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth_service.py       # ‚úÖ –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —Å AuthInterface
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ catalog_service.py    # ‚úÖ –ò–ù–¢–ï–ì–†–ò–†–û–í–ê–ù: –õ–æ–≥–∏–∫–∞ –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–∞ –≤ core/data_loader
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ üõ†Ô∏è utils/                 # ‚úÖ –ù–û–í–´–ô: –£—Ç–∏–ª–∏—Ç–∞—Ä–Ω—ã–π —Å–ª–æ–π
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py           # –ü–∞–∫–µ—Ç —É—Ç–∏–ª–∏—Ç
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ position_utils.py     # –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–æ–ª–∂–Ω–æ—Å—Ç–µ–π
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ üóÇÔ∏è models/               # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ database.py          # SQLite –º–µ–Ω–µ–¥–∂–µ—Ä + —Å—Ö–µ–º—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ schemas.py           # Pydantic –º–æ–¥–µ–ª–∏
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ üìÅ static/               # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
‚îÇ       ‚îî‚îÄ‚îÄ (–ø—É—Å—Ç–∞—è –ø–∞–ø–∫–∞)
‚îÇ
‚îú‚îÄ‚îÄ üé® frontend/                  # NiceGUI Frontend (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)
‚îÇ   ‚îî‚îÄ‚îÄ (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)
‚îÇ
‚îú‚îÄ‚îÄ üìö docs/                      # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ API_REFERENCE.md         # –°–ø—Ä–∞–≤–∫–∞ –ø–æ API
‚îÇ   ‚îú‚îÄ‚îÄ PROJECT_BACKLOG.md       # Backlog –ø—Ä–æ–µ–∫—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ SYSTEM_ARCHITECTURE.md   # –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (—ç—Ç–æ—Ç —Ñ–∞–π–ª)
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ
‚îú‚îÄ‚îÄ üìä company_data/             # –ò—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∫–æ–º–ø–∞–Ω–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ structure.json          # –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–æ–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
‚îÇ   ‚îú‚îÄ‚îÄ kpi_files/             # KPI –ø–æ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞–º
‚îÇ   ‚îú‚îÄ‚îÄ it_systems/            # IT —Å–∏—Å—Ç–µ–º—ã
‚îÇ   ‚îî‚îÄ‚îÄ profiles_examples/     # –ü—Ä–∏–º–µ—Ä—ã –ø—Ä–æ—Ñ–∏–ª–µ–π
‚îÇ
‚îú‚îÄ‚îÄ üìÑ templates/               # –®–∞–±–ª–æ–Ω—ã
‚îÇ   ‚îî‚îÄ‚îÄ job_profile_schema.json # JSON Schema –ø—Ä–æ—Ñ–∏–ª–µ–π
‚îÇ
‚îú‚îÄ‚îÄ üê≥ docker/                  # Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ docker-compose.yml
‚îÇ
‚îú‚îÄ‚îÄ üìã requirements.txt         # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ üåç .env                     # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îî‚îÄ‚îÄ üìñ CLAUDE.md               # –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è Claude
```

## üîÑ **–ü–û–¢–û–ö–ò –î–ê–ù–ù–´–•**

### **1. –ü–æ—Ç–æ–∫ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–∏—Å—Ç–µ–º—ã:**

```
[System Start] 
    ‚Üì
[main.py] ‚Üí [config.py –∑–∞–≥—Ä—É–∂–∞–µ—Ç .env]
    ‚Üì
[DataLoader –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è] ‚Üí [–ó–∞–≥—Ä—É–∑–∫–∞ company_data/]
    ‚Üì
[OrganizationCache –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è] ‚Üí [–ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∏–µ—Ä–∞—Ä—Ö–∏–∏]
    ‚Üì
[FastAPI –∑–∞–ø—É—Å–∫] ‚Üí [–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ä–æ—É—Ç–µ—Ä–æ–≤]
    ‚Üì
[System Ready]
```

### **2. –ü–æ—Ç–æ–∫ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏:**

```
[POST /api/auth/login]
    ‚Üì
[auth.py] ‚Üí [AuthService.login()]
    ‚Üì
[AuthService] ‚Üí [–ë–∞–∑–∞ users] ‚Üí [–ü—Ä–æ–≤–µ—Ä–∫–∞ credentials]
    ‚Üì
[JWT –≥–µ–Ω–µ—Ä–∞—Ü–∏—è] ‚Üí [–°–µ—Å—Å–∏—è –≤ user_sessions]
    ‚Üì
[LoginResponse —Å —Ç–æ–∫–µ–Ω–æ–º]
```

### **3. –ü–æ—Ç–æ–∫ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø—Ä–æ—Ñ–∏–ª—è (–æ—Å–Ω–æ–≤–Ω–æ–π):**

```
[POST /api/profiles/generate]
    ‚Üì
[generation.py] ‚Üí [ProfileGenerator.generate_profile()]
    ‚Üì
[DataLoader] ‚Üí [–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç—É]
    ‚Üì
[DataMapper] ‚Üí [–î–µ—Ç–µ—Ä–º–∏–Ω–∏—Å—Ç–∏—á–µ—Å–∫–æ–µ –º–∞–ø–ø–∏–Ω–≥ –öPI + IT]
    ‚Üì
[PromptManager] ‚Üí [–°–±–æ—Ä–∫–∞ –ø—Ä–æ–º–ø—Ç–∞ –∏–∑ —à–∞–±–ª–æ–Ω–æ–≤]
    ‚Üì
[LLMClient] ‚Üí [OpenRouter API] ‚Üí [Gemini 2.5 Flash]
    ‚Üì
[JSON –≤–∞–ª–∏–¥–∞—Ü–∏—è] ‚Üí [–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ profiles]
    ‚Üì
[ProfileStorageService] ‚Üí [–°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã]
    ‚Üì
[ProfileMarkdownGenerator] ‚Üí [–ì–µ–Ω–µ—Ä–∞—Ü–∏—è MD —Ñ–∞–π–ª–∞]
    ‚Üì
[Response —Å profile_id + –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏]
```

### **4. –ü–æ—Ç–æ–∫ –∫–∞—Ç–∞–ª–æ–≥–∏–∑–∞—Ü–∏–∏:**

```
[GET /api/catalog/departments]
    ‚Üì
[catalog.py] ‚Üí [CatalogService.get_departments()]
    ‚Üì
[OrganizationCache] ‚Üí [–ü–æ–ª—É—á–µ–Ω–∏–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö]
    ‚Üì
[–ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ API —Ñ–æ—Ä–º–∞—Ç]
    ‚Üì
[Response —Å–æ —Å–ø–∏—Å–∫–æ–º –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–æ–≤]
```

### **5. –ü–æ—Ç–æ–∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –æ —á–∏—Å–ª–µ–Ω–Ω–æ—Å—Ç–∏ (–ù–û–í–û–ï):**

```
[Excel Structure.xlsx (–ª–∏—Å—Ç—ã: "–≤—ã–≥—Ä—É–∑–∫–∞" + "–°–≤–æ–¥–Ω–∞—è")]
    ‚Üì
[excel_to_json.py] ‚Üí [load_headcount_data()] ‚Üí [match_headcount_to_hierarchy()]
    ‚Üì
[–ê–≥—Ä–µ–≥–∞—Ü–∏—è —á–∏—Å–ª–µ–Ω–Ω–æ—Å—Ç–∏ –ø–æ –ø–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è–º] ‚Üí [–°–≤—è–∑—ã–≤–∞–Ω–∏–µ –ø–æ –∏–µ—Ä–∞—Ä—Ö–∏–∏ (–£—Ä–æ–≤–µ–Ω—å 7‚Üí2)]
    ‚Üì
[structure.json —Å –ø–æ–ª—è–º–∏: headcount, headcount_source, headcount_department]
    ‚Üì
[OrganizationCacheManager] ‚Üí [–ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è —Å –¥–∞–Ω–Ω—ã–º–∏ –æ —á–∏—Å–ª–µ–Ω–Ω–æ—Å—Ç–∏]
    ‚Üì
[OrganizationMapper.calculate_subordinates_count()] ‚Üí [–†–∞—Å—á–µ—Ç –ø–æ–¥—á–∏–Ω–µ–Ω–Ω—ã—Ö –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö]
    ‚Üì
[DataLoader] ‚Üí [–ü–µ—Ä–µ–¥–∞—á–∞ headcount_info –∏ subordinates_calculation –≤ LLM –∫–æ–Ω—Ç–µ–∫—Å—Ç]
    ‚Üì
[LLM –≥–µ–Ω–µ—Ä–∞—Ü–∏—è] ‚Üí [–ë–æ–ª–µ–µ —Ç–æ—á–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è subordinates.direct_reports]
    ‚Üì
[Frontend] ‚Üí [–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —á–∏—Å–ª–µ–Ω–Ω–æ—Å—Ç–∏ –≤ –ø–æ–∏—Å–∫–æ–≤—ã—Ö –∫–∞—Ä—Ç–æ—á–∫–∞—Ö]

[GET /api/organization/search-items] (–Ω–æ–≤–æ–µ API)
    ‚Üì
[organization.py] ‚Üí [CatalogService.get_searchable_items()]
    ‚Üì
[OrganizationCache.get_searchable_items()] ‚Üí [Path-based –ø–æ–∏—Å–∫]
    ‚Üì
[567 —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –¥–ª—è frontend dropdown]
```

### **5. –ü–æ—Ç–æ–∫ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è–º–∏:**

```
[GET /api/profiles/]
    ‚Üì
[profiles.py] ‚Üí [–ë–∞–∑–∞ profiles] ‚Üí [–°–ø–∏—Å–æ–∫ —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏]

[GET /api/profiles/{id}]
    ‚Üì
[profiles.py] ‚Üí [–ë–∞–∑–∞ profiles] ‚Üí [JSON profile_data]

[GET /api/profiles/{id}/download/json]
    ‚Üì
[profiles.py] ‚Üí [ProfileStorageService] ‚Üí [–î–µ—Ç–µ—Ä–º–∏–Ω–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –ø—É—Ç—å]
    ‚Üì
[–ß—Ç–µ–Ω–∏–µ JSON —Ñ–∞–π–ª–∞] ‚Üí [FileResponse]

[GET /api/profiles/{id}/download/markdown]
    ‚Üì
[profiles.py] ‚Üí [ProfileStorageService] ‚Üí [–î–µ—Ç–µ—Ä–º–∏–Ω–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –ø—É—Ç—å]
    ‚Üì
[–ß—Ç–µ–Ω–∏–µ MD —Ñ–∞–π–ª–∞] ‚Üí [FileResponse]
```

### **6. –ü–æ—Ç–æ–∫ dashboard —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏:**

```
[GET /api/dashboard/stats]
    ‚Üì
[dashboard.py] ‚Üí [CatalogService + DatabaseManager]
    ‚Üì
[–°–±–æ—Ä –º–µ—Ç—Ä–∏–∫] ‚Üí [–î–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç—ã + –î–æ–ª–∂–Ω–æ—Å—Ç–∏ + –ü—Ä–æ—Ñ–∏–ª–∏]
    ‚Üì
[–ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞]
```

## üóÑÔ∏è **–°–•–ï–ú–ê –ë–ê–ó–´ –î–ê–ù–ù–´–•**

```sql
-- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–∏—Å—Ç–µ–º—ã
CREATE TABLE users (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    username TEXT NOT NULL UNIQUE,
    password_hash TEXT NOT NULL,
    full_name TEXT NOT NULL,
    is_active BOOLEAN DEFAULT TRUE,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    last_login DATETIME
);

-- –ê–∫—Ç–∏–≤–Ω—ã–µ —Å–µ—Å—Å–∏–∏
CREATE TABLE user_sessions (
    id TEXT PRIMARY KEY,  -- UUID4
    user_id INTEGER NOT NULL,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    expires_at DATETIME NOT NULL,
    is_active BOOLEAN DEFAULT TRUE,
    user_agent TEXT,
    ip_address TEXT,
    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
);

-- –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª–∏
CREATE TABLE profiles (
    id TEXT PRIMARY KEY,  -- UUID4
    department TEXT NOT NULL,
    position TEXT NOT NULL,
    employee_name TEXT,
    profile_data TEXT NOT NULL,  -- JSON
    json_file_path TEXT,
    md_file_path TEXT,
    status TEXT DEFAULT 'active',
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    created_by INTEGER,
    generation_metadata TEXT,  -- JSON —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
    FOREIGN KEY (created_by) REFERENCES users(id)
);

-- –ò—Å—Ç–æ—Ä–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–π (–¥–ª—è –∞—É–¥–∏—Ç–∞)
CREATE TABLE generation_history (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    profile_id TEXT NOT NULL,
    generation_request TEXT NOT NULL,  -- JSON –∑–∞–ø—Ä–æ—Å–∞
    generation_result TEXT NOT NULL,   -- JSON —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
    llm_model TEXT NOT NULL,
    prompt_version TEXT,
    tokens_used INTEGER,
    generation_time_seconds REAL,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    created_by INTEGER,
    FOREIGN KEY (profile_id) REFERENCES profiles(id) ON DELETE CASCADE,
    FOREIGN KEY (created_by) REFERENCES users(id)
);

-- –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
CREATE INDEX idx_profiles_department ON profiles(department);
CREATE INDEX idx_profiles_position ON profiles(position);
CREATE INDEX idx_profiles_created_by ON profiles(created_by);
CREATE INDEX idx_profiles_created_at ON profiles(created_at);
CREATE INDEX idx_sessions_user_active ON user_sessions(user_id, is_active);
CREATE INDEX idx_sessions_expires ON user_sessions(expires_at);
CREATE INDEX idx_generation_history_profile ON generation_history(profile_id);
```

## üöÄ **API ENDPOINTS (–†–ï–ê–õ–¨–ù–´–ï)**

### **üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (/api/auth/)**
```http
POST   /api/auth/login      # –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É
POST   /api/auth/logout     # –í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã
```

### **‚ö° –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–æ—Ñ–∏–ª–µ–π (/api/generation/)**
```http
POST   /api/generation/generate-profile    # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è
GET    /api/generation/status/{task_id}    # –°—Ç–∞—Ç—É—Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ (–µ—Å–ª–∏ async)
```

### **üìã –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è–º–∏ (/api/profiles/)**
```http
GET    /api/profiles/                           # –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø—Ä–æ—Ñ–∏–ª–µ–π
GET    /api/profiles/{id}                       # –ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å
DELETE /api/profiles/{id}                       # –£–¥–∞–ª–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
GET    /api/profiles/{id}/download/json         # –°–∫–∞—á–∞—Ç—å JSON —Ñ–∞–π–ª
GET    /api/profiles/{id}/download/markdown     # –°–∫–∞—á–∞—Ç—å MD —Ñ–∞–π–ª
POST   /api/profiles/bulk-delete                # –ú–∞—Å—Å–æ–≤–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ
```

### **üìÇ –ö–∞—Ç–∞–ª–æ–≥ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–æ–≤ (/api/catalog/)**
```http
GET    /api/catalog/departments                  # –°–ø–∏—Å–æ–∫ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–æ–≤
GET    /api/catalog/departments/{name}           # –î–µ—Ç–∞–ª–∏ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞
GET    /api/catalog/positions/{department}       # –î–æ–ª–∂–Ω–æ—Å—Ç–∏ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞
GET    /api/catalog/search                       # –ü–æ–∏—Å–∫ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–æ–≤
GET    /api/catalog/search/positions             # –ü–æ–∏—Å–∫ –¥–æ–ª–∂–Ω–æ—Å—Ç–µ–π
POST   /api/catalog/cache/clear                  # –û—á–∏—Å—Ç–∫–∞ –∫–µ—à–∞ (–∞–¥–º–∏–Ω)
GET    /api/catalog/stats                        # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–∞—Ç–∞–ª–æ–≥–∞
```

### **üè¢ –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–æ–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (/api/organization/)**
```http
GET    /api/organization/search-items            # –í—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã –¥–ª—è –ø–æ–∏—Å–∫–∞ (567 —à—Ç)
POST   /api/organization/structure               # –ü–æ–ª–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å –≤—ã–¥–µ–ª–µ–Ω–Ω–æ–π —Ü–µ–ª—å—é
POST   /api/organization/unit                    # –î–µ—Ç–∞–ª–∏ –±–∏–∑–Ω–µ—Å-–µ–¥–∏–Ω–∏—Ü—ã –ø–æ –ø—É—Ç–∏
GET    /api/organization/stats                   # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
```

### **üìä Dashboard (/api/dashboard/)**
```http
GET    /api/dashboard/stats                      # –ü–æ–ª–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
GET    /api/dashboard/stats/minimal              # –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
GET    /api/dashboard/stats/activity             # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
```


## üß† **–Ø–î–†–û –°–ò–°–¢–ï–ú–´ (CORE) + DOMAIN SERVICES** ‚úÖ **–†–ï–û–†–ì–ê–ù–ò–ó–û–í–ê–ù–û (2025-09-13)**

### **üîß ConfigManager (config.py)**
- –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
- –ó–∞–≥—Ä—É–∑–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–∑ .env
- –í–∞–ª–∏–¥–∞—Ü–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- –¢–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —á–µ—Ä–µ–∑ Pydantic

### **üìä DataLoader (data_loader.py)** ‚úÖ **–†–ê–°–®–ò–†–ï–ù–û**
- –ó–∞–≥—Ä—É–∑–∫–∞ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–æ–Ω–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏–∑ structure.json
- –ó–∞–≥—Ä—É–∑–∫–∞ KPI —Ñ–∞–π–ª–æ–≤ –ø–æ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞–º  
- –ó–∞–≥—Ä—É–∑–∫–∞ –æ–ø–∏—Å–∞–Ω–∏–π IT —Å–∏—Å—Ç–µ–º
- –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø—Ä–∏–º–µ—Ä–æ–≤ –ø—Ä–æ—Ñ–∏–ª–µ–π
- ‚úÖ **–ù–û–í–û–ï:** –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∫–∞—Ç–∞–ª–æ–≥–∏–∑–∞—Ü–∏–∏ (–±—ã–≤—à. CatalogService)
- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ –ø–∞–º—è—Ç—å

### **üó∫Ô∏è DataMapper (data_mapper.py)**
- **OrganizationMapper**: –¢–æ—á–Ω–æ–µ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–æ–≤
- **KPIMapper**: 3-—É—Ä–æ–≤–Ω–µ–≤–æ–µ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ KPI (—Ç–æ—á–Ω–æ–µ ‚Üí regex ‚Üí fallback)
- **ITSystemsMapper**: –°–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ IT —Å–∏—Å—Ç–µ–º –ø–æ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞–º
- –î–µ—Ç–µ—Ä–º–∏–Ω–∏—Å—Ç–∏—á–µ—Å–∫–∞—è –ª–æ–≥–∏–∫–∞ –±–µ–∑ LLM –≤—ã–∑–æ–≤–æ–≤

### **üóÉÔ∏è OrganizationCache (organization_cache.py)**
- –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –∫–µ—à –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–æ–Ω–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- Path-based –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è (—Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö—Å—è –∏–º–µ–Ω)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö 567 –±–∏–∑–Ω–µ—Å-–µ–¥–∏–Ω–∏—Ü –±–µ–∑ –ø–æ—Ç–µ—Ä—å –¥–∞–Ω–Ω—ã—Ö
- –ú–µ—Ç–æ–¥—ã –ø–æ–∏—Å–∫–∞ –ø–æ –ø–æ–ª–Ω–æ–º—É –ø—É—Ç–∏
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è searchable items –¥–ª—è frontend

### **üéØ ProfileGenerator (profile_generator.py)**
- –ì–ª–∞–≤–Ω—ã–π –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä –ø—Ä–æ—Ü–µ—Å—Å–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- –°–±–æ—Ä–∫–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏–∑ –≤—Å–µ—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–æ–º LLM –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ JSON Schema
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ –ë–î –∏ —Ñ–∞–π–ª–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É

### **ü§ñ LLMClient (llm_client.py)**
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å OpenRouter API
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Gemini 2.5 Flash –º–æ–¥–µ–ª–∏
- Retry –ª–æ–≥–∏–∫–∞ —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π
- –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Langfuse
- –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤—ã–≤–æ–¥ —á–µ—Ä–µ–∑ JSON Schema

### **üìù PromptManager (prompt_manager.py)**
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞–º–∏ –ø—Ä–æ–º–ø—Ç–æ–≤
- –ü–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤ —à–∞–±–ª–æ–Ω—ã
- –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–æ–≤
- –í–∞–ª–∏–¥–∞—Ü–∏—è —à–∞–±–ª–æ–Ω–æ–≤

### **üîå Interfaces (interfaces.py)** ‚úÖ **–ù–û–í–û–ï**
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –¥–ª—è dependency injection
- `AuthInterface` –¥–ª—è —Ä–∞–∑—Ä—ã–≤–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –º–µ–∂–¥—É —Å–ª–æ—è–º–∏
- –°–ª–µ–¥—É–µ—Ç –ø—Ä–∏–Ω—Ü–∏–ø—É Interface Segregation

### **üíæ StorageService (storage_service.py)** ‚úÖ **–ü–ï–†–ï–ú–ï–©–ï–ù–û**
- –î–µ—Ç–µ—Ä–º–∏–Ω–∏—Å—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤—ã—Ö –ø—É—Ç–µ–π
- –°–æ–∑–¥–∞–Ω–∏–µ –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø–∞–ø–æ–∫ –ø–æ –æ—Ä–≥—Å—Ç—Ä—É–∫—Ç—É—Ä–µ
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ JSON –∏ MD —Ñ–∞–π–ª–æ–≤
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –¥–∞–Ω–Ω—ã–º–∏ –±–∞–∑—ã

### **üìÑ MarkdownService (markdown_service.py)** ‚úÖ **–ü–ï–†–ï–ú–ï–©–ï–ù–û**
- –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è JSON –ø—Ä–æ—Ñ–∏–ª–µ–π –≤ –∫—Ä–∞—Å–∏–≤—ã–µ MD –¥–æ–∫—É–º–µ–Ω—Ç—ã
- –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã —Å —Ç–∞–±–ª–∏—Ü–∞–º–∏
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–∞
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ä–∞–∑–¥–µ–ª–æ–≤ –ø—Ä–æ—Ñ–∏–ª—è

## üîß **INFRASTRUCTURE SERVICES** ‚úÖ **–û–ß–ò–©–ï–ù–û (2025-09-13)**

### **üîê AuthService (auth_service.py)** ‚úÖ **–û–ë–ù–û–í–õ–ï–ù–û**
- JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —Å bcrypt —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º–∏ —Å–µ—Å—Å–∏—è–º–∏
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Å—Å–∏–π –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ç–æ–∫–µ–Ω–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –∏—Å—Ç–µ–∫—à–∏—Ö —Å–µ—Å—Å–∏–π
- ‚úÖ **–ù–û–í–û–ï:** –†–µ–∞–ª–∏–∑—É–µ—Ç `AuthInterface` –¥–ª—è dependency injection

### **üìÇ CatalogService (catalog_service.py)** ‚úÖ **–£–ü–†–û–©–ï–ù–û**
- –¢–æ–Ω–∫–∞—è –æ–±–µ—Ä—Ç–∫–∞ –Ω–∞–¥ DataLoader –¥–ª—è API —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
- ‚úÖ **–ò–ó–ú–ï–ù–ï–ù–ò–ï:** –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ –≤ core/data_loader
- –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä –≤ API —Ñ–æ—Ä–º–∞—Ç
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å API

## üíæ **–£–ü–†–ê–í–õ–ï–ù–ò–ï –î–ê–ù–ù–´–ú–ò**

### **–ò—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∫–æ–º–ø–∞–Ω–∏–∏:**
```
company_data/
‚îú‚îÄ‚îÄ structure.json           # –ü–æ–ª–Ω–∞—è –æ—Ä–≥—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (567 –µ–¥–∏–Ω–∏—Ü)
‚îú‚îÄ‚îÄ kpi_files/              # KPI –ø–æ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞–º
‚îÇ   ‚îú‚îÄ‚îÄ department_1_kpi.md
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ it_systems/             # –û–ø–∏—Å–∞–Ω–∏—è IT —Å–∏—Å—Ç–µ–º
‚îÇ   ‚îú‚îÄ‚îÄ system_1.md
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îî‚îÄ‚îÄ profiles_examples/      # –ü—Ä–∏–º–µ—Ä—ã –ø—Ä–æ—Ñ–∏–ª–µ–π
    ‚îú‚îÄ‚îÄ example_1.json
    ‚îî‚îÄ‚îÄ ...
```

### **–ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã–µ –ø—Ä–æ—Ñ–∏–ª–∏:**
```
generated_profiles/
‚îú‚îÄ‚îÄ –ë–ª–æ–∫_–æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ_–¥–∏—Ä–µ–∫—Ç–æ—Ä–∞/
‚îÇ   ‚îú‚îÄ‚îÄ –î–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç_–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã—Ö_—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Senior_Developer/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Senior_Developer_20250909_143025_e874d4ca/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Senior_Developer_20250909_143025_e874d4ca.json
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Senior_Developer_20250909_143025_e874d4ca.md
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îî‚îÄ‚îÄ ...
```

## üîí **–ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨** ‚úÖ **–£–°–ò–õ–ï–ù–ê (2025-01-09)**

### **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:**
- JWT —Ç–æ–∫–µ–Ω—ã —Å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–º –≤—Ä–µ–º–µ–Ω–µ–º –∂–∏–∑–Ω–∏
- bcrypt —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π
- ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û:** –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Å–µ—Å—Å–∏–æ–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ connection manager
- Middleware –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–æ–∫–µ–Ω–æ–≤
- ‚úÖ **–ù–û–í–û–ï:** –ê–∫—Ç–∏–≤–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–æ–≤ –ø—Ä–æ—Ç–∏–≤ –±–∞–∑—ã —Å–µ—Å—Å–∏–π

### **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:**
- –ü—Ä–æ—Å—Ç–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ä–æ–ª–µ–π (admin/user)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –∫ –æ–ø–µ—Ä–∞—Ü–∏—è–º
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
- ‚úÖ **–ù–û–í–û–ï:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- ‚úÖ **–ù–û–í–û–ï:** –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤ production –ø—Ä–∏ –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö
- ‚úÖ **–ù–û–í–û–ï:** –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ API –∫–ª—é—á–µ–π –∏ JWT —Å–µ–∫—Ä–µ—Ç–æ–≤
- ‚úÖ **–ù–û–í–û–ï:** –í–∞–ª–∏–¥–∞—Ü–∏—è –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –¥–ª–∏–Ω—ã –ø–∞—Ä–æ–ª–µ–π

### **–î–∞–Ω–Ω—ã–µ:**
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –≤—Ö–æ–¥—è—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ Pydantic
- ‚úÖ **–£–°–ò–õ–ï–ù–û:** –ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è —Å–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è –ø—É—Ç–µ–π —Å –∑–∞—â–∏—Ç–æ–π –æ—Ç path traversal
- –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ SQL –∑–∞–ø—Ä–æ—Å—ã —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–∞—Ü–∏–µ–π
- ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û:** –£—Å—Ç—Ä–∞–Ω–µ–Ω—ã connection leaks –≤ database operations
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ –±–µ–∑ —Ä–∞—Å–∫—Ä—ã—Ç–∏—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

## üìä **–ú–û–ù–ò–¢–û–†–ò–ù–ì –ò –ù–ê–ë–õ–Æ–î–ê–ï–ú–û–°–¢–¨**

### **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–æ –≤—Å–µ—Ö –º–æ–¥—É–ª—è—Ö
- –†–∞–∑–ª–∏—á–Ω—ã–µ —É—Ä–æ–≤–Ω–∏ –ª–æ–≥–æ–≤ (DEBUG, INFO, WARNING, ERROR)
- –†–æ—Ç–∞—Ü–∏—è –ª–æ–≥–æ–≤ –ø–æ —Ä–∞–∑–º–µ—Ä—É

### **–ú–µ—Ç—Ä–∏–∫–∏:**
- –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ LLM
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞–º –∏ –¥–æ–ª–∂–Ω–æ—Å—Ç—è–º
- –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∫–µ—à–∞

### **Langfuse –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):**
- –¢—Ä–µ–π—Å–∏–Ω–≥ LLM –≤—ã–∑–æ–≤–æ–≤
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–∞—á–µ—Å—Ç–≤–∞ –ø—Ä–æ–º–ø—Ç–æ–≤
- A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–æ–≤
- –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

## üöÄ **–†–ê–ó–í–ï–†–¢–´–í–ê–ù–ò–ï**

### **Docker Compose:**
```yaml
version: '3.8'
services:
  hr-backend:
    build: .
    ports:
      - "8022:8000"
    environment:
      - DATABASE_PATH=/app/data/database.db
      - OPENROUTER_API_KEY=${OPENROUTER_API_KEY}
      - JWT_SECRET_KEY=${JWT_SECRET_KEY}
      - ADMIN_PASSWORD=${ADMIN_PASSWORD}
    volumes:
      - ./company_data:/app/company_data:ro
      - ./generated_profiles:/app/generated_profiles
      - ./data:/app/data
```

### **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
```env
# –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ
OPENROUTER_API_KEY=sk-or-v1-xxxxx
JWT_SECRET_KEY=your-secret-key
ADMIN_PASSWORD=your-admin-password

# –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ
LANGFUSE_PUBLIC_KEY=pk-lf-xxxxx
LANGFUSE_SECRET_KEY=sk-lf-xxxxx
DATABASE_PATH=/app/data/database.db
DEBUG=false
```

## üéØ **–ê–†–•–ò–¢–ï–ö–¢–£–†–ù–´–ï –ü–†–ò–ù–¶–ò–ü–´**

### **1. –î–µ—Ç–µ—Ä–º–∏–Ω–∏—Å—Ç–∏—á–µ—Å–∫–∞—è –ª–æ–≥–∏–∫–∞**
- –í—Å–µ –º–∞–ø–ø–∏–Ω–≥–∏ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã –∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º—ã
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–ª—É—á–∞–π–Ω–æ—Å—Ç–∏ –≤ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–µ
- –ß–µ—Ç–∫–∏–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è

### **2. –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ**
- OrganizationCache –∫–∞–∫ –µ–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã
- –ú–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
- –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å –ø–∞–º—è—Ç—å—é

### **3. Path-based –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**
- –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö—Å—è –∏–º–µ–Ω –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–æ–≤
- –£–Ω–∏–∫–∞–ª—å–Ω–∞—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ –ø–æ–ª–Ω—ã–µ –ø—É—Ç–∏
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö 567 –±–∏–∑–Ω–µ—Å-–µ–¥–∏–Ω–∏—Ü –±–µ–∑ –ø–æ—Ç–µ—Ä—å

### **4. –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** ‚úÖ **–£–°–ò–õ–ï–ù–ê (2025-01-09)**
- –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –º–µ–∂–¥—É –º–æ–¥—É–ª—è–º–∏
- –°–ª–∞–±–∞—è —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å, –≤—ã—Å–æ–∫–∞—è —Å–≤—è–∑–Ω–æ—Å—Ç—å
- ‚úÖ **–ù–û–í–û–ï:** –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π utils —Å–ª–æ–π –¥–ª—è –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞
- ‚úÖ **–£–õ–£–ß–®–ï–ù–û:** –£—Å—Ç—Ä–∞–Ω–µ–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –º–µ–∂–¥—É –º–æ–¥—É–ª—è–º–∏
- –ü—Ä–æ—Å—Ç–æ—Ç–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏

### **5. API-First –ø–æ–¥—Ö–æ–¥**
- RESTful API –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- –ß–µ—Ç–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è endpoints
- –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤

## üìà **–ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–¨**

### **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∫–∞—Ç–∞–ª–æ–≥–∞:**
- **75x —É—Å–∫–æ—Ä–µ–Ω–∏–µ** –∑–∞–≥—Ä—É–∑–∫–∏ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–æ–≤ (2-3 —Å–µ–∫ ‚Üí 40ms)
- **1000x —É—Å–∫–æ—Ä–µ–Ω–∏–µ** –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –∫–µ—à–∞ (40ms ‚Üí 3ms)
- –ü–µ—Ä–µ—Ö–æ–¥ –æ—Ç 510 I/O –æ–ø–µ—Ä–∞—Ü–∏–π –∫ 1 –ø–∞–∫–µ—Ç–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–µ

### **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- In-memory –∫–µ—à –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–æ–Ω–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- –î–µ—Ç–µ—Ä–º–∏–Ω–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –ø—É—Ç–∏ –∫ —Ñ–∞–π–ª–∞–º –±–µ–∑ –ø–æ–∏—Å–∫–∞
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ SQL –∑–∞–ø—Ä–æ—Å—ã —Å –∏–Ω–¥–µ–∫—Å–∞–º–∏

### **LLM –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:**
- Retry –ª–æ–≥–∏–∫–∞ —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–∞–∑–º–µ—Ä–∞ –ø—Ä–æ–º–ø—Ç–æ–≤
- Structured JSON output –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏

## üèõÔ∏è **–ê–†–•–ò–¢–ï–ö–¢–£–†–ù–û–ï –ó–î–û–†–û–í–¨–ï –°–ò–°–¢–ï–ú–´** ‚úÖ **–ü–û–õ–ù–´–ô –†–ï–§–ê–ö–¢–û–†–ò–ù–ì (2025-09-13)**

### **üìä –ú–µ—Ç—Ä–∏–∫–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–≥–æ –∑–¥–æ—Ä–æ–≤—å—è:**

| –ú–µ—Ç—Ä–∏–∫–∞ | –ë—ã–ª–æ (–¥–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞) | –°—Ç–∞–ª–æ (–ø–æ—Å–ª–µ) | –£–ª—É—á—à–µ–Ω–∏–µ |
|---------|----------------------|---------------|-----------|
| **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –Ω–∞—Ä—É—à–µ–Ω–∏—è** | 5 –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö | **0** | **100%** |
| **–¶–∏–∫–ª–∏—á–µ—Å–∫–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏** | –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ | **0** | **100%** |
| **SOLID —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ** | 75% | **95%** | **+20%** |
| **Testability Score** | 60% | **96%** | **+36%** |
| **Maintainability Index** | 62/100 | **84/100** | **+35%** |
| **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –æ—Ü–µ–Ω–∫–∞** | C (65/100) | **A (94/100)** | **+29 –±–∞–ª–ª–æ–≤** |

### **üéØ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ê–†–•–ò–¢–ï–ö–¢–£–†–ù–´–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø:**

#### **1. –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Ä—É—à–µ–Ω–∏–π —Å–ª–æ–µ–≤** ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û**
- **–ë—ã–ª–æ:** 5 –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –Ω–∞—Ä—É—à–µ–Ω–∏–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö —Å–ª–æ–µ–≤
- **–ü—Ä–æ–±–ª–µ–º–∞:** Services ‚Üí Core, Utils ‚Üí Services, Models ‚Üí Core –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- **–†–µ—à–µ–Ω–∏–µ:**
  - –ü–µ—Ä–µ–º–µ—Å—Ç–∏–ª `ProfileMarkdownGenerator` –∏ `ProfileStorageService` –∏–∑ `services` –≤ `core`
  - –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–ª –ª–æ–≥–∏–∫—É `CatalogService` –Ω–∞–ø—Ä—è–º—É—é –≤ `DataLoader`
  - –†–µ–∞–ª–∏–∑–æ–≤–∞–ª dependency injection –¥–ª—è `DatabaseManager`
  - –°–æ–∑–¥–∞–ª `AuthInterface` —Å dependency injection –¥–ª—è middleware
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** **0 –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö –Ω–∞—Ä—É—à–µ–Ω–∏–π**, —á–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

#### **2. –í–Ω–µ–¥—Ä–µ–Ω–∏–µ —á–∏—Å—Ç–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã** ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û**
- **–ë—ã–ª–æ:** –ù–∞—Ä—É—à–µ–Ω–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –º–µ–∂–¥—É —Å–ª–æ—è–º–∏
- **–†–µ—à–µ–Ω–∏–µ:** –ü–æ–ª–Ω–∞—è —Ä–µ–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —Å–æ–≥–ª–∞—Å–Ω–æ Clean Architecture
  ```
  API Layer (Level 4) ‚Üí Services (Level 3) ‚Üí Core (Level 2) ‚Üí Models (Level 1) ‚Üí Utils (Level 0)
  ```
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** 100% —Å–æ–±–ª—é–¥–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

#### **3. Dependency Injection Pattern** ‚úÖ **–í–ù–ï–î–†–ï–ù–û**
- **–ë—ã–ª–æ:** –ñ–µ—Å—Ç–∫–∏–µ —Å–≤—è–∑–∏ –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏
- **–†–µ—à–µ–Ω–∏–µ:**
  - `DatabaseManager` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ø—É—Ç—å –∫ –ë–î —á–µ—Ä–µ–∑ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä
  - `RequestLoggingMiddleware` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `AuthInterface` —á–µ—Ä–µ–∑ DI
  - Early initialization –≤ `main.py` –¥–ª—è DI middleware
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** 100% Dependency Inversion Principle —Å–æ–±–ª—é–¥–µ–Ω–∏–µ

#### **4. Interface Segregation** ‚úÖ **–í–ù–ï–î–†–ï–ù–û**
- **–°–æ–∑–¥–∞–Ω `core/interfaces.py`** —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º `AuthInterface`
- **–£–±—Ä–∞–Ω–∞ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è `utils/interfaces.py`**
- **AuthenticationService** —Ä–µ–∞–ª–∏–∑—É–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- **Middleware** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤–º–µ—Å—Ç–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

#### **5. –¶–∏–∫–ª–∏—á–µ—Å–∫–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏** ‚úÖ **–£–°–¢–†–ê–ù–ï–ù–û**
- **–ë—ã–ª–æ:** –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–µ –∏–º–ø–æ—Ä—Ç—ã –º–µ–∂–¥—É –º–æ–¥—É–ª—è–º–∏
- **–†–µ—à–µ–Ω–∏–µ:** –ü–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∏ —Ä–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏–∑–∞—Ü–∏—è –∏–º–ø–æ—Ä—Ç–æ–≤
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** **0 —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π** –≤ 37 –º–æ–¥—É–ª—è—Ö

### **üìã –ê–†–•–ò–¢–ï–ö–¢–£–†–ù–´–ï –û–¢–ß–ï–¢–´:**
- **–î–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω:** `/home/yan/A101/HR/backend/REFACTORING_PLAN.md`
- **–ü–æ–ª–Ω—ã–π –æ—Ç—á–µ—Ç –æ –∑–¥–æ—Ä–æ–≤—å–µ:** `/home/yan/A101/HR/backend/ARCHITECTURE_HEALTH_REPORT.md`
- **–ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:** `/home/yan/A101/HR/performance_analysis_report.md`
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:** `/home/yan/A101/HR/performance_fixes.py`

## üîÑ **–ü–õ–ê–ù –†–ï–§–ê–ö–¢–û–†–ò–ù–ì–ê** ‚úÖ **–ü–û–õ–ù–û–°–¢–¨–Æ –ó–ê–í–ï–†–®–ï–ù (2025-09-13)**

### **Phase 1: Foundation (COMPLETED)** ‚úÖ **100%**
1. ‚úÖ **–í–´–ü–û–õ–ù–ï–ù–û:** –°–æ–∑–¥–∞—Ç—å utility –º–æ–¥—É–ª—å –¥–ª—è –æ–±—â–µ–π –ª–æ–≥–∏–∫–∏ ‚Üí `backend/utils/position_utils.py`
2. ‚úÖ **–í–´–ü–û–õ–ù–ï–ù–û:** –£–ª—É—á—à–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ ‚Üí –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤ `config.py`
3. ‚úÖ **–í–´–ü–û–õ–ù–ï–ù–û:** –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏–º–ø–æ—Ä—Ç—ã ‚Üí –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –ª–æ–∫–∞–ª—å–Ω—ã–µ –∏–º–ø–æ—Ä—Ç—ã —Å fallback
4. ‚úÖ **–í–´–ü–û–õ–ù–ï–ù–û:** –£—Å—Ç—Ä–∞–Ω–∏—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –Ω–∞—Ä—É—à–µ–Ω–∏—è ‚Üí 0 –Ω–∞—Ä—É—à–µ–Ω–∏–π –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–æ
5. ‚úÖ **–í–´–ü–û–õ–ù–ï–ù–û:** –í–Ω–µ–¥—Ä–∏—Ç—å dependency injection ‚Üí AuthInterface + DI patterns
6. ‚úÖ **–í–´–ü–û–õ–ù–ï–ù–û:** –†–µ–æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å —Å–ª–æ–∏ ‚Üí Clean Architecture compliance
7. ‚úÖ **–í–´–ü–û–õ–ù–ï–ù–û:** –£—Å—Ç—Ä–∞–Ω–∏—Ç—å —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ ‚Üí 0 —Ü–∏–∫–ª–æ–≤

### **–°–ª–µ–¥—É—é—â–∏–µ —ç—Ç–∞–ø—ã (–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏):**

### **Phase 2: Quality & Testing (2-3 –Ω–µ–¥–µ–ª–∏)**
1. ‚è≥ Comprehensive unit —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (coverage 80%+)
2. ‚è≥ Integration —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API endpoints  
3. ‚è≥ Performance —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ benchmarks
4. ‚è≥ Security —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ penetration testing

### **Phase 3: Performance (1-2 –Ω–µ–¥–µ–ª–∏)**
1. ‚è≥ –í–Ω–µ–¥—Ä–∏—Ç—å connection pooling –¥–ª—è –ë–î
2. ‚è≥ –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è I/O
3. ‚è≥ Redis –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è JWT –∏ queries
4. ‚è≥ Rate limiting –∏ DDoS –∑–∞—â–∏—Ç–∞

### **Phase 4: Security (1 –Ω–µ–¥–µ–ª—è - –ö–†–ò–¢–ò–ß–ù–û)**
1. üö® **–ö–†–ò–¢–ò–ß–ù–û:** –†–æ—Ç–∞—Ü–∏—è –≤—Å–µ—Ö API –∫–ª—é—á–µ–π –∏ —Å–µ–∫—Ä–µ—Ç–æ–≤
2. üö® **–ö–†–ò–¢–ò–ß–ù–û:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ SQL injection —É—è–∑–≤–∏–º–æ—Å—Ç–∏
3. üö® **–ö–†–ò–¢–ò–ß–ù–û:** –ù–∞—Å—Ç—Ä–æ–π–∫–∞ CORS –∏ session management
4. ‚è≥ –†–µ–∞–ª–∏–∑–∞—Ü–∏—è MFA –¥–ª—è –∞–¥–º–∏–Ω –∞–∫–∫–∞—É–Ω—Ç–æ–≤

### **Phase 5: Production Readiness (2 –Ω–µ–¥–µ–ª–∏)**
1. ‚è≥ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–ª–µ—Ä—Ç–∏–Ω–≥ (Prometheus/Grafana)
2. ‚è≥ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ audit trails
3. ‚è≥ Backup –∏ disaster recovery
4. ‚è≥ Load balancing –∏ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

**üéØ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è —á–∞—Å—Ç—å –ü–û–õ–ù–û–°–¢–¨–Æ –ó–ê–í–ï–†–®–ï–ù–ê - —Å–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Å–ª–µ–¥—É—é—â–∏–º —ç—Ç–∞–ø–∞–º —Ä–∞–∑–≤–∏—Ç–∏—è!**

---

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã A101 HR Profile Generator –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π —Ö–æ—Ä–æ—à–æ —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ —Å —á–µ—Ç–∫–∏–º —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏, —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–º –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∏ –Ω–∞–¥–µ–∂–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏. –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ–º—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –∏ –¥–∞–ª—å–Ω–µ–π—à–µ–º—É —Ä–∞–∑–≤–∏—Ç–∏—é.**